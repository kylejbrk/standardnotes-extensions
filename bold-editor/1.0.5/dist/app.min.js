!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=5)}([function(e,t,n){"use strict";e.exports=n(7)},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)i.call(n,l)&&(u[l]=n[l]);if(a){s=a(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";function r(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(8)},function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){(function(t){var n,n;!function(t){e.exports=t()}(function(){return function(){function e(t,r,a){function i(s,u){if(!r[s]){if(!t[s]){var c="function"==typeof n&&n;if(!u&&c)return n(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){return i(t[s][1][e]||e)},f,f.exports,e,t,r,a)}return r[s].exports}for(var o="function"==typeof n&&n,s=0;s<a.length;s++)i(a[s]);return i}return e}()({1:[function(e,n,r){(function(e){function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=o||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,a=e.min(4*t,a),t){for(var u=0;u<t;u+=i)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=a}return new o.init(u,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);!function(){var e=o,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var a=0;a<n;a+=3)for(var i=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;4>o&&a+.75*o<n;o++)e.push(r.charAt(i>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,a=r.charAt(64);a&&-1!=(a=e.indexOf(a))&&(n=a);for(var a=[],i=0,o=0;o<n;o++)if(o%4){var s=r.indexOf(e.charAt(o-1))<<o%4*2,u=r.indexOf(e.charAt(o))>>>6-o%4*2;a[i>>>2]|=(s|u)<<24-i%4*8,i++}return t.create(a,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,a,i,o){return((e=e+(t&n|~t&r)+a+o)<<i|e>>>32-i)+t}function n(e,t,n,r,a,i,o){return((e=e+(t&r|n&~r)+a+o)<<i|e>>>32-i)+t}function r(e,t,n,r,a,i,o){return((e=e+(t^n^r)+a+o)<<i|e>>>32-i)+t}function a(e,t,n,r,a,i,o){return((e=e+(n^(t|~r))+a+o)<<i|e>>>32-i)+t}for(var i=o,s=i.lib,u=s.WordArray,c=s.Hasher,s=i.algo,l=[],f=0;64>f;f++)l[f]=4294967296*e.abs(e.sin(f+1))|0;s=s.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var o=0;16>o;o++){var s=i+o,u=e[s];e[s]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var o=this._hash.words,s=e[i+0],u=e[i+1],c=e[i+2],f=e[i+3],p=e[i+4],d=e[i+5],h=e[i+6],v=e[i+7],m=e[i+8],y=e[i+9],g=e[i+10],b=e[i+11],k=e[i+12],w=e[i+13],x=e[i+14],S=e[i+15],C=o[0],_=o[1],E=o[2],I=o[3],C=t(C,_,E,I,s,7,l[0]),I=t(I,C,_,E,u,12,l[1]),E=t(E,I,C,_,c,17,l[2]),_=t(_,E,I,C,f,22,l[3]),C=t(C,_,E,I,p,7,l[4]),I=t(I,C,_,E,d,12,l[5]),E=t(E,I,C,_,h,17,l[6]),_=t(_,E,I,C,v,22,l[7]),C=t(C,_,E,I,m,7,l[8]),I=t(I,C,_,E,y,12,l[9]),E=t(E,I,C,_,g,17,l[10]),_=t(_,E,I,C,b,22,l[11]),C=t(C,_,E,I,k,7,l[12]),I=t(I,C,_,E,w,12,l[13]),E=t(E,I,C,_,x,17,l[14]),_=t(_,E,I,C,S,22,l[15]),C=n(C,_,E,I,u,5,l[16]),I=n(I,C,_,E,h,9,l[17]),E=n(E,I,C,_,b,14,l[18]),_=n(_,E,I,C,s,20,l[19]),C=n(C,_,E,I,d,5,l[20]),I=n(I,C,_,E,g,9,l[21]),E=n(E,I,C,_,S,14,l[22]),_=n(_,E,I,C,p,20,l[23]),C=n(C,_,E,I,y,5,l[24]),I=n(I,C,_,E,x,9,l[25]),E=n(E,I,C,_,f,14,l[26]),_=n(_,E,I,C,m,20,l[27]),C=n(C,_,E,I,w,5,l[28]),I=n(I,C,_,E,c,9,l[29]),E=n(E,I,C,_,v,14,l[30]),_=n(_,E,I,C,k,20,l[31]),C=r(C,_,E,I,d,4,l[32]),I=r(I,C,_,E,m,11,l[33]),E=r(E,I,C,_,b,16,l[34]),_=r(_,E,I,C,x,23,l[35]),C=r(C,_,E,I,u,4,l[36]),I=r(I,C,_,E,p,11,l[37]),E=r(E,I,C,_,v,16,l[38]),_=r(_,E,I,C,g,23,l[39]),C=r(C,_,E,I,w,4,l[40]),I=r(I,C,_,E,s,11,l[41]),E=r(E,I,C,_,f,16,l[42]),_=r(_,E,I,C,h,23,l[43]),C=r(C,_,E,I,y,4,l[44]),I=r(I,C,_,E,k,11,l[45]),E=r(E,I,C,_,S,16,l[46]),_=r(_,E,I,C,c,23,l[47]),C=a(C,_,E,I,s,6,l[48]),I=a(I,C,_,E,v,10,l[49]),E=a(E,I,C,_,x,15,l[50]),_=a(_,E,I,C,d,21,l[51]),C=a(C,_,E,I,k,6,l[52]),I=a(I,C,_,E,f,10,l[53]),E=a(E,I,C,_,g,15,l[54]),_=a(_,E,I,C,u,21,l[55]),C=a(C,_,E,I,m,6,l[56]),I=a(I,C,_,E,S,10,l[57]),E=a(E,I,C,_,h,15,l[58]),_=a(_,E,I,C,w,21,l[59]),C=a(C,_,E,I,p,6,l[60]),I=a(I,C,_,E,b,10,l[61]),E=a(E,I,C,_,c,15,l[62]),_=a(_,E,I,C,y,21,l[63]);o[0]=o[0]+C|0,o[1]=o[1]+_|0,o[2]=o[2]+E|0,o[3]=o[3]+I|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var i=e.floor(r/4294967296);for(n[15+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)a=n[r],n[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=c._createHelper(s),i.HmacMD5=c._createHmacHelper(s)}(Math),function(){var e=o,t=e.lib,n=t.Base,r=t.WordArray,t=e.algo,a=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=n.hasher.create(),i=r.create(),o=i.words,s=n.keySize,n=n.iterations;o.length<s;){u&&a.update(u);var u=a.update(e).finalize(t);a.reset();for(var c=1;c<n;c++)u=a.finalize(u),a.reset();i.concat(u)}return i.sigBytes=4*s,i}});e.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)}}(),o.lib.Cipher||function(e){var t=o,n=t.lib,r=n.Base,a=n.WordArray,i=n.BufferedBlockAlgorithm,s=t.enc.Base64,u=t.algo.EvpKDF,c=n.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?v:h).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?v:h).decrypt(e,t,n,r)}}}});n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=t.mode={},f=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=r[a]},p=(n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();p.Encryptor=p.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;f.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),p.Decryptor=p.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=e.slice(t,t+r);n.decryptBlock(e,t),f.call(this,e,t,r),this._prevBlock=a}}),l=l.CBC=p,p=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,i=[],o=0;o<n;o+=4)i.push(r);n=a.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:l,padding:p}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){e=s.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=a.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},h=n.SerializableCipher=r.extend({cfg:r.extend({format:l}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var a=e.createEncryptor(n,r);return t=a.finalize(t),a=a.cfg,d.create({ciphertext:t,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=a.random(8)),e=u.create({keySize:t+n}).compute(e,r),n=a.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},v=n.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=h.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,h.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=o,t=e.lib.BlockCipher,n=e.algo,r=[],a=[],i=[],s=[],u=[],c=[],l=[],f=[],p=[],d=[],h=[],v=0;256>v;v++)h[v]=128>v?v<<1:v<<1^283;for(var m=0,y=0,v=0;256>v;v++){var g=y^y<<1^y<<2^y<<3^y<<4,g=g>>>8^255&g^99;r[m]=g,a[g]=m;var b=h[m],k=h[b],w=h[k],x=257*h[g]^16843008*g;i[m]=x<<24|x>>>8,s[m]=x<<16|x>>>16,u[m]=x<<8|x>>>24,c[m]=x,x=16843009*w^65537*k^257*b^16843008*m,l[g]=x<<24|x>>>8,f[g]=x<<16|x>>>16,p[g]=x<<8|x>>>24,d[g]=x,m?(m=b^h[h[h[w^b]]],y^=h[h[y]]):m=y=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),a=this._keySchedule=[],i=0;i<e;i++)if(i<n)a[i]=t[i];else{var o=a[i-1];i%n?6<n&&4==i%n&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=o<<8|o>>>24,o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=S[i/n|0]<<24),a[i]=a[i-n]^o}for(t=this._invKeySchedule=[],n=0;n<e;n++)i=e-n,o=n%4?a[i]:a[i-4],t[n]=4>n||4>=i?o:l[r[o>>>24]]^f[r[o>>>16&255]]^p[r[o>>>8&255]]^d[r[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,s,u,c,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,p,d,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,a,i,o,s){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],p=e[t+3]^n[3],d=4,h=1;h<u;h++)var v=r[c>>>24]^a[l>>>16&255]^i[f>>>8&255]^o[255&p]^n[d++],m=r[l>>>24]^a[f>>>16&255]^i[p>>>8&255]^o[255&c]^n[d++],y=r[f>>>24]^a[p>>>16&255]^i[c>>>8&255]^o[255&l]^n[d++],p=r[p>>>24]^a[c>>>16&255]^i[l>>>8&255]^o[255&f]^n[d++],c=v,l=m,f=y;v=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&p])^n[d++],m=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[p>>>8&255]<<8|s[255&c])^n[d++],y=(s[f>>>24]<<24|s[p>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[d++],p=(s[p>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[d++],e[t]=v,e[t+1]=m,e[t+2]=y,e[t+3]=p},keySize:8});e.AES=t._createHelper(n)}();var o=o||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,a=e.min(4*t,a),t){for(var u=0;u<t;u+=i)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=a}return new o.init(u,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);!function(e){for(var t=o,n=t.lib,r=n.WordArray,a=n.Hasher,n=t.algo,i=[],s=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var f;e:{f=c;for(var p=e.sqrt(f),d=2;d<=p;d++)if(!(f%d)){f=!1;break e}f=!0}f&&(8>l&&(i[l]=u(e.pow(c,.5))),s[l]=u(e.pow(c,1/3)),l++),c++}var h=[],n=n.SHA256=a.extend({_doReset:function(){this._hash=new r.init(i.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],i=n[2],o=n[3],u=n[4],c=n[5],l=n[6],f=n[7],p=0;64>p;p++){if(16>p)h[p]=0|e[t+p];else{var d=h[p-15],v=h[p-2];h[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+h[p-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+h[p-16]}d=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[p]+h[p],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&a^r&i^a&i),f=l,l=c,c=u,u=o+d|0,o=i,i=a,a=r,r=d+v|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+i|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(r/4294967296),n[15+(a+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(n),t.HmacSHA256=a._createHmacHelper(n)}(Math),function(){var e=o,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,a=4*r;n.sigBytes>a&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),o=this._iKey=n.clone(),s=i.words,u=o.words,c=0;c<r;c++)s[c]^=1549556828,u[c]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}();var o=o||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,a=e.min(4*t,a),t){for(var u=0;u<t;u+=i)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=a}return new o.init(u,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);!function(e){var t=o,n=t.lib,r=n.Base,a=n.WordArray,t=t.x64={};t.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,a=0;a<n;a++)t[a]=t[a].clone();return e}})}(),function(){function e(){return a.create.apply(a,arguments)}for(var t=o,n=t.lib.Hasher,r=t.x64,a=r.Word,i=r.WordArray,r=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],u=[],c=0;80>c;c++)u[c]=e();r=r.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],i=n[2],o=n[3],c=n[4],l=n[5],f=n[6],n=n[7],p=r.high,d=r.low,h=a.high,v=a.low,m=i.high,y=i.low,g=o.high,b=o.low,k=c.high,w=c.low,x=l.high,S=l.low,C=f.high,_=f.low,E=n.high,I=n.low,P=p,F=d,T=h,R=v,D=m,O=y,A=g,M=b,N=k,L=w,j=x,B=S,H=C,U=_,z=E,K=I,W=0;80>W;W++){var V=u[W];if(16>W)var q=V.high=0|e[t+2*W],$=V.low=0|e[t+2*W+1];else{var q=u[W-15],$=q.high,J=q.low,q=($>>>1|J<<31)^($>>>8|J<<24)^$>>>7,J=(J>>>1|$<<31)^(J>>>8|$<<24)^(J>>>7|$<<25),G=u[W-2],$=G.high,Q=G.low,G=($>>>19|Q<<13)^($<<3|Q>>>29)^$>>>6,Q=(Q>>>19|$<<13)^(Q<<3|$>>>29)^(Q>>>6|$<<26),$=u[W-7],Y=$.high,X=u[W-16],Z=X.high,X=X.low,$=J+$.low,q=q+Y+($>>>0<J>>>0?1:0),$=$+Q,q=q+G+($>>>0<Q>>>0?1:0),$=$+X,q=q+Z+($>>>0<X>>>0?1:0);V.high=q,V.low=$}var Y=N&j^~N&H,X=L&B^~L&U,V=P&T^P&D^T&D,ee=F&R^F&O^R&O,J=(P>>>28|F<<4)^(P<<30|F>>>2)^(P<<25|F>>>7),G=(F>>>28|P<<4)^(F<<30|P>>>2)^(F<<25|P>>>7),Q=s[W],te=Q.high,ne=Q.low,Q=K+((L>>>14|N<<18)^(L>>>18|N<<14)^(L<<23|N>>>9)),Z=z+((N>>>14|L<<18)^(N>>>18|L<<14)^(N<<23|L>>>9))+(Q>>>0<K>>>0?1:0),Q=Q+X,Z=Z+Y+(Q>>>0<X>>>0?1:0),Q=Q+ne,Z=Z+te+(Q>>>0<ne>>>0?1:0),Q=Q+$,Z=Z+q+(Q>>>0<$>>>0?1:0),$=G+ee,V=J+V+($>>>0<G>>>0?1:0),z=H,K=U,H=j,U=B,j=N,B=L,L=M+Q|0,N=A+Z+(L>>>0<M>>>0?1:0)|0,A=D,M=O,D=T,O=R,T=P,R=F,F=Q+$|0,P=Z+V+(F>>>0<Q>>>0?1:0)|0}d=r.low=d+F,r.high=p+P+(d>>>0<F>>>0?1:0),v=a.low=v+R,a.high=h+T+(v>>>0<R>>>0?1:0),y=i.low=y+O,i.high=m+D+(y>>>0<O>>>0?1:0),b=o.low=b+M,o.high=g+A+(b>>>0<M>>>0?1:0),w=c.low=w+L,c.high=k+N+(w>>>0<L>>>0?1:0),S=l.low=S+B,l.high=x+j+(S>>>0<B>>>0?1:0),_=f.low=_+U,f.high=C+H+(_>>>0<U>>>0?1:0),I=n.low=I+K,n.high=E+z+(I>>>0<K>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(r),t.HmacSHA512=n._createHmacHelper(r)}(),function(){var e=o,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,a=4*r;n.sigBytes>a&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),o=this._iKey=n.clone(),s=i.words,u=o.words,c=0;c<r;c++)s[c]^=1549556828,u[c]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}();var o=o||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,a=e.min(4*t,a),t){for(var u=0;u<t;u+=i)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=a}return new o.init(u,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);!function(){var e=o,t=e.lib,n=t.WordArray,r=t.Hasher,a=[],t=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=0;80>c;c++){if(16>c)a[c]=0|e[t+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}l=(r<<5|r>>>27)+u+a[c],l=20>c?l+(1518500249+(i&o|~i&s)):40>c?l+(1859775393+(i^o^s)):60>c?l+((i&o|i&s|o&s)-1894007588):l+((i^o^s)-899497514),u=s,s=o,o=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(t),e.HmacSHA1=r._createHmacHelper(t)}(),function(){var e=o,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,a=4*r;n.sigBytes>a&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),o=this._iKey=n.clone(),s=i.words,u=o.words,c=0;c<r;c++)s[c]^=1549556828,u[c]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=o,t=e.lib,n=t.Base,r=t.WordArray,t=e.algo,a=t.HMAC,i=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=a.create(n.hasher,e),o=r.create(),s=r.create([1]),u=o.words,c=s.words,l=n.keySize,n=n.iterations;u.length<l;){var f=i.update(t).finalize(s);i.reset();for(var p=f.words,d=p.length,h=f,v=1;v<n;v++){h=i.finalize(h),i.reset();for(var m=h.words,y=0;y<d;y++)p[y]^=m[y]}o.concat(f),c[0]++}return o.sigBytes=4*l,o}});e.PBKDF2=function(e,t,n){return i.create(n).compute(e,t)}}();var o=o||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,a=e.min(4*t,a),t){for(var u=0;u<t;u+=i)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=a}return new o.init(u,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);!function(){var e=o,t=e.lib,n=t.WordArray,r=t.Hasher,a=[],t=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=0;80>c;c++){if(16>c)a[c]=0|e[t+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}l=(r<<5|r>>>27)+u+a[c],l=20>c?l+(1518500249+(i&o|~i&s)):40>c?l+(1859775393+(i^o^s)):60>c?l+((i&o|i&s|o&s)-1894007588):l+((i^o^s)-899497514),u=s,s=o,o=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(t),e.HmacSHA1=r._createHmacHelper(t)}(),Object.defineProperty(r,"__esModule",{value:!0});var s,u=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=r.SFAlertManager=function(){function e(){i(this,e)}return l(e,[{key:"alert",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){window.alert(t.text),e()}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"confirm",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){window.confirm(t.text)?e():n()}));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),p=r.SFAuthManager=function(){function e(t,n,r,a){i(this,e),e.DidSignOutEvent="DidSignOutEvent",e.WillSignInEvent="WillSignInEvent",e.DidSignInEvent="DidSignInEvent",this.httpManager=n,this.storageManager=t,this.alertManager=r||new f,this.$timeout=a||setTimeout.bind(window),this.eventHandlers=[]}return l(e,[{key:"addEventHandler",value:function(e){return this.eventHandlers.push(e),e}},{key:"removeEventHandler",value:function(e){_.pull(this.eventHandlers,e)}},{key:"notifyEvent",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=this.eventHandlers[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){(0,i.value)(e,t||{})}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}}},{key:"saveKeys",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._keys=t,e.next=3,this.storageManager.setItem("mk",t.mk);case 3:return e.next=5,this.storageManager.setItem("ak",t.ak);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"signout",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._keys=null,this._authParams=null,!n){t.next=6;break}return t.abrupt("return",this.storageManager.clearAllData().then(function(){r.notifyEvent(e.DidSignOutEvent)}));case 6:this.notifyEvent(e.DidSignOutEvent);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"keys",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._keys){e.next=11;break}return e.next=3,this.storageManager.getItem("mk");case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.t0=t,e.next=9,this.storageManager.getItem("ak");case 9:e.t1=e.sent,this._keys={mk:e.t0,ak:e.t1};case 11:return e.abrupt("return",this._keys);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"getAuthParams",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._authParams){e.next=5;break}return e.next=3,this.storageManager.getItem("auth_params");case 3:t=e.sent,this._authParams=JSON.parse(t);case 5:if(!this._authParams||this._authParams.version){e.next=9;break}return e.next=8,this.defaultProtocolVersion();case 8:this._authParams.version=e.sent;case 9:return e.abrupt("return",this._authParams);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"defaultProtocolVersion",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.keys();case 2:if(!(t=e.sent)||!t.ak){e.next=7;break}return e.abrupt("return","002");case 7:return e.abrupt("return","001");case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"protocolVersion",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAuthParams();case 2:if(!(t=e.sent)||!t.version){e.next=5;break}return e.abrupt("return",t.version);case 5:return e.abrupt("return",this.defaultProtocolVersion());case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"getAuthParamsForEmail",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){var o=t+"/auth/params";a.httpManager.getAbsolute(o,_.merge({email:n},r),function(t){e(t)},function(t){console.error("Error getting auth params",t),"object"!==(void 0===t?"undefined":c(t))&&(t={error:{message:"A server error occurred while trying to sign in. Please try again."}}),e(t)})}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"isLocked",value:function(){return 1==this.locked}},{key:"unlockAndResolve",value:function(e,t){this.unlock(),e(t)}},{key:"login",value:function(){function t(e,t,r,a,i){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n,r,i,o,s){var u=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(l,f){var p,d,h,v,m,y,g,b,k,w,x,S,C;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.keys();case 2:if(null==(p=t.sent)){t.next=6;break}return l({error:{message:"Cannot log in because already signed in."}}),t.abrupt("return");case 6:if(!u.isLocked()){t.next=9;break}return l({error:{message:"Login already in progress."}}),t.abrupt("return");case 9:return u.lock(),u.notifyEvent(e.WillSignInEvent),t.next=13,u.getAuthParamsForEmail(n,r,s);case 13:if(d=t.sent,d.identifier=r,!d.error){t.next=18;break}return u.unlockAndResolve(l,d),t.abrupt("return");case 18:if(d&&d.pw_cost){t.next=21;break}return u.unlockAndResolve(l,{error:{message:"Invalid email or password."}}),t.abrupt("return");case 21:if(SFJS.supportedVersions().includes(d.version)){t.next=25;break}return h=SFJS.isVersionNewerThanLibraryVersion(d.version)?"This version of the application does not support your newer account type. Please upgrade to the latest version of Standard Notes to sign in.":"The protocol version associated with your account is outdated and no longer supported by this application. Please visit standardnotes.org/help/security for more information.",u.unlockAndResolve(l,{error:{message:h}}),t.abrupt("return");case 25:if(!SFJS.isProtocolVersionOutdated(d.version)){t.next=32;break}return v="The encryption version for your account, "+d.version+", is outdated and requires upgrade. You may proceed with login, but are advised to perform a security update using the web or desktop application. Please visit standardnotes.org/help/security for more information.",m=!1,t.next=30,u.alertManager.confirm({title:"Update Needed",text:v,confirmButtonText:"Sign In"}).catch(function(){u.unlockAndResolve(l,{error:{}}),m=!0});case 30:if(!m){t.next=32;break}return t.abrupt("return");case 32:if(SFJS.supportsPasswordDerivationCost(d.pw_cost)){t.next=36;break}return y="Your account was created on a platform with higher security capabilities than this browser supports. If we attempted to generate your login keys here, it would take hours. Please use a browser with more up to date security capabilities, like Google Chrome or Firefox, to log in.",u.unlockAndResolve(l,{error:{message:y}}),t.abrupt("return");case 36:if(g=SFJS.costMinimumForVersion(d.version),!(d.pw_cost<g)){t.next=41;break}return b="Unable to login due to insecure password parameters. Please visit standardnotes.org/help/security for more information.",u.unlockAndResolve(l,{error:{message:b}}),t.abrupt("return");case 41:if(!o){t.next=47;break}if(k=SFJS.version(),d.version===k){t.next=47;break}return w="Strict sign in refused server sign in parameters. The latest security version is "+k+", but your account is reported to have version "+d.version+". If you'd like to proceed with sign in anyway, please disable strict sign in and try again.",u.unlockAndResolve(l,{error:{message:w}}),t.abrupt("return");case 47:return t.next=49,SFJS.crypto.computeEncryptionKeysForUser(i,d);case 49:x=t.sent,S=n+"/auth/sign_in",C=_.merge({password:x.pw,email:r},s),u.httpManager.postAbsolute(S,C,function(){var t=a(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.handleAuthResponse(a,r,n,d,x);case 2:u.notifyEvent(e.DidSignInEvent),u.$timeout(function(){return u.unlockAndResolve(l,a)});case 4:case"end":return t.stop()}},t,u)}));return function(e){return t.apply(this,arguments)}}(),function(e){console.error("Error logging in",e),"object"!==(void 0===e?"undefined":c(e))&&(e={error:{message:"A server error occurred while trying to sign in. Please try again."}}),u.$timeout(function(){return u.unlockAndResolve(l,e)})});case 53:case"end":return t.stop()}},t,u)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"register",value:function(e,t,n){var r=this;return new Promise(function(){var i=a(regeneratorRuntime.mark(function i(o,s){var u,l,f,p,d;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!r.isLocked()){i.next=3;break}return o({error:{message:"Register already in progress."}}),i.abrupt("return");case 3:return r.lock(),i.next=6,SFJS.crypto.generateInitialKeysAndAuthParamsForUser(t,n);case 6:u=i.sent,l=u.keys,f=u.authParams,p=e+"/auth",d=_.merge({password:l.pw,email:t},f),r.httpManager.postAbsolute(p,d,function(){var n=a(regeneratorRuntime.mark(function n(a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.handleAuthResponse(a,t,e,f,l);case 2:r.unlockAndResolve(o,a);case 3:case"end":return n.stop()}},n,r)}));return function(e){return n.apply(this,arguments)}}(),function(e){console.error("Registration error",e),"object"!==(void 0===e?"undefined":c(e))&&(e={error:{message:"A server error occurred while trying to register. Please try again."}}),r.unlockAndResolve(o,e)});case 12:case"end":return i.stop()}},i,r)}));return function(e,t){return i.apply(this,arguments)}}())}},{key:"changePassword",value:function(){function e(e,n,r,a,i){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,i,o){var s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a(regeneratorRuntime.mark(function e(u,l){var f,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.isLocked()){e.next=3;break}return u({error:{message:"Change password already in progress."}}),e.abrupt("return");case 3:s.lock(),f=i.pw,p=t+"/auth/change_pw",d=_.merge({new_password:f,current_password:r},o),s.httpManager.postAbsolute(p,d,function(){var e=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.handleAuthResponse(t,n,null,o,i);case 2:s.unlockAndResolve(u,t);case 3:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}(),function(e){"object"!==(void 0===e?"undefined":c(e))&&(e={error:{message:"Something went wrong while changing your password. Your password was not changed. Please try again."}}),s.unlockAndResolve(u,e)});case 8:case"end":return e.stop()}},e,s)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleAuthResponse",value:function(){function e(e,n,r,a,i){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return e.next=3,this.storageManager.setItem("server",r);case 3:return this._authParams=a,e.next=6,this.storageManager.setItem("auth_params",JSON.stringify(a));case 6:return e.next=8,this.storageManager.setItem("jwt",t.token);case 8:return e.abrupt("return",this.saveKeys(i));case 9:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),d="undefined"!=typeof window?window:void 0!==e?e:null,h=r.SFHttpManager=function(){function e(t){i(this,e),this.$timeout=t||setTimeout.bind(d)}return l(e,[{key:"setJWTRequestHandler",value:function(e){this.jwtRequestHandler=e}},{key:"setAuthHeadersForRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jwtRequestHandler();case 2:n=e.sent,n&&t.setRequestHeader("Authorization","Bearer "+n);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"postAbsolute",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("post",t,n,r,a));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"patchAbsolute",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("patch",t,n,r,a));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getAbsolute",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("get",t,n,r,a));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"httpRequest",value:function(){function e(e,n,r,a,i){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,i,o){var s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a(regeneratorRuntime.mark(function e(a,u){var c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=new XMLHttpRequest,c.onreadystatechange=function(){if(4==c.readyState){var e=c.responseText;if(e)try{e=JSON.parse(e)}catch(e){}c.status>=200&&c.status<=299?s.$timeout(function(){i(e),a(e)}):(console.error("Request error:",e),s.$timeout(function(){o(e,c.status),u(e)}))}},"get"==t&&Object.keys(r).length>0&&(n+=s.formatParams(r)),c.open(t,n,!0),e.next=6,s.setAuthHeadersForRequest(c);case 6:c.setRequestHeader("Content-type","application/json"),"post"==t||"patch"==t?c.send(JSON.stringify(r)):c.send();case 8:case"end":return e.stop()}},e,s)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"formatParams",value:function(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}}]),e}(),v=r.SFMigrationManager=function(){function e(t,n,r,o){var s=this;i(this,e),this.modelManager=t,this.syncManager=n,this.storageManager=r,this.completionHandlers=[],this.loadMigrations();var u=!1,c=o.addEventHandler(function(e){e==p.DidSignInEvent&&(u=!0)});this.syncManager.addEventHandler(function(){var e=a(regeneratorRuntime.mark(function e(t,n){var r,a,i,l,f,p,d,h,v,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="local-data-loaded"==t,a="sync:completed"==t,!r&&!a){e.next=40;break}if(r?s.receivedLocalDataEvent=!0:a&&(s.receivedSyncCompletedEvent=!0),!s.receivedLocalDataEvent||!s.receivedSyncCompletedEvent){e.next=40;break}if(!u){e.next=39;break}return u=!1,o.removeEventHandler(c),e.next=10,s.getCompletedMigrations();case 10:i=e.sent.slice(),l=!0,f=!1,p=void 0,e.prev=14,d=i[Symbol.iterator]();case 16:if(l=(h=d.next()).done){e.next=25;break}return v=h.value,e.next=20,s.migrationForEncodedName(v);case 20:m=e.sent,m.runOnlyOnce||_.pull(s._completed,v);case 22:l=!0,e.next=16;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(14),f=!0,p=e.t0;case 31:e.prev=31,e.prev=32,!l&&d.return&&d.return();case 34:if(e.prev=34,!f){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(31);case 39:s.runPendingMigrations();case 40:case"end":return e.stop()}},e,s,[[14,27,31,39],[32,,34,38]])}));return function(t,n){return e.apply(this,arguments)}}())}return l(e,[{key:"addCompletionHandler",value:function(e){this.completionHandlers.push(e)}},{key:"removeCompletionHandler",value:function(e){_.pull(this.completionHandlers,e)}},{key:"migrationForEncodedName",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decode(t);case 2:return n=e.sent,e.abrupt("return",this.migrations.find(function(e){return e.name==n}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadMigrations",value:function(){this.migrations=this.registeredMigrations()}},{key:"registeredMigrations",value:function(){}},{key:"runPendingMigrations",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,s,u,c,l,f,p,d,h,v,m,y,g,b,k,w,x,S,C,_,E,I,P,F;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPendingMigrations();case 2:for(t=e.sent,n=!0,r=!1,a=void 0,e.prev=6,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)s=o.value,s.items=[];e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,a=e.t0;case 14:e.prev=14,e.prev=15,!n&&i.return&&i.return();case 17:if(e.prev=17,!r){e.next=20;break}throw a;case 20:return e.finish(17);case 21:return e.finish(14);case 22:u=!0,c=!1,l=void 0,e.prev=25,f=this.modelManager.allNondummyItems[Symbol.iterator]();case 27:if(u=(p=f.next()).done){e.next=51;break}for(d=p.value,h=!0,v=!1,m=void 0,e.prev=32,y=t[Symbol.iterator]();!(h=(g=y.next()).done);h=!0)s=g.value,d.content_type==s.content_type&&s.items.push(d);e.next=40;break;case 36:e.prev=36,e.t1=e.catch(32),v=!0,m=e.t1;case 40:e.prev=40,e.prev=41,!h&&y.return&&y.return();case 43:if(e.prev=43,!v){e.next=46;break}throw m;case 46:return e.finish(43);case 47:return e.finish(40);case 48:u=!0,e.next=27;break;case 51:e.next=57;break;case 53:e.prev=53,e.t2=e.catch(25),c=!0,l=e.t2;case 57:e.prev=57,e.prev=58,!u&&f.return&&f.return();case 60:if(e.prev=60,!c){e.next=63;break}throw l;case 63:return e.finish(60);case 64:return e.finish(57);case 65:b=!0,k=!1,w=void 0,e.prev=68,x=t[Symbol.iterator]();case 70:if(b=(S=x.next()).done){e.next=81;break}if(s=S.value,!(s.items&&s.items.length>0||s.customHandler)){e.next=77;break}return e.next=75,this.runMigration(s,s.items);case 75:e.next=78;break;case 77:this.markMigrationCompleted(s);case 78:b=!0,e.next=70;break;case 81:e.next=87;break;case 83:e.prev=83,e.t3=e.catch(68),k=!0,w=e.t3;case 87:e.prev=87,e.prev=88,!b&&x.return&&x.return();case 90:if(e.prev=90,!k){e.next=93;break}throw w;case 93:return e.finish(90);case 94:return e.finish(87);case 95:for(C=!0,_=!1,E=void 0,e.prev=98,I=this.completionHandlers[Symbol.iterator]();!(C=(P=I.next()).done);C=!0)(F=P.value)();e.next=106;break;case 102:e.prev=102,e.t4=e.catch(98),_=!0,E=e.t4;case 106:e.prev=106,e.prev=107,!C&&I.return&&I.return();case 109:if(e.prev=109,!_){e.next=112;break}throw E;case 112:return e.finish(109);case 113:return e.finish(106);case 114:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21],[25,53,57,65],[32,36,40,48],[41,,43,47],[58,,60,64],[68,83,87,95],[88,,90,94],[98,102,106,114],[107,,109,113]])}));return e}()},{key:"encode",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.btoa(t));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"decode",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.atob(t));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getCompletedMigrations",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._completed){e.next=5;break}return e.next=3,this.storageManager.getItem("migrations");case 3:t=e.sent,this._completed=t?JSON.parse(t):[];case 5:return e.abrupt("return",this._completed);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"getPendingMigrations",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompletedMigrations();case 2:t=e.sent,n=[],r=!0,a=!1,i=void 0,e.prev=7,o=this.migrations[Symbol.iterator]();case 9:if(r=(s=o.next()).done){e.next=22;break}return u=s.value,e.t0=t,e.next=14,this.encode(u.name);case 14:if(e.t1=e.sent,e.t2=e.t0.indexOf.call(e.t0,e.t1),e.t3=-1,e.t2!=e.t3){e.next=19;break}n.push(u);case 19:r=!0,e.next=9;break;case 22:e.next=28;break;case 24:e.prev=24,e.t4=e.catch(7),a=!0,i=e.t4;case 28:e.prev=28,e.prev=29,!r&&o.return&&o.return();case 31:if(e.prev=31,!a){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return e.abrupt("return",n);case 37:case"end":return e.stop()}},e,this,[[7,24,28,36],[29,,31,35]])}));return e}()},{key:"markMigrationCompleted",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompletedMigrations();case 2:return n=e.sent,e.t0=n,e.next=6,this.encode(t.name);case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),this.storageManager.setItem("migrations",JSON.stringify(n)),t.running=!1;case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"runMigration",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.running){e.next=2;break}return e.abrupt("return");case 2:if(console.log("Running migration:",t.name),t.running=!0,!t.customHandler){e.next=8;break}return e.abrupt("return",t.customHandler().then(function(){r.markMigrationCompleted(t)}));case 8:return e.abrupt("return",t.handler(n).then(function(){r.markMigrationCompleted(t)}));case 9:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),m=r.SFModelManager=function(){function e(t){i(this,e),e.MappingSourceRemoteRetrieved="MappingSourceRemoteRetrieved",e.MappingSourceRemoteSaved="MappingSourceRemoteSaved",e.MappingSourceLocalSaved="MappingSourceLocalSaved",e.MappingSourceLocalRetrieved="MappingSourceLocalRetrieved",e.MappingSourceComponentRetrieved="MappingSourceComponentRetrieved",e.MappingSourceDesktopInstalled="MappingSourceDesktopInstalled",e.MappingSourceRemoteActionRetrieved="MappingSourceRemoteActionRetrieved",e.MappingSourceFileImport="MappingSourceFileImport",e.isMappingSourceRetrieved=function(t){return[e.MappingSourceRemoteRetrieved,e.MappingSourceComponentRetrieved,e.MappingSourceRemoteActionRetrieved].includes(t)},this.$timeout=t||setTimeout.bind(window),this.itemSyncObservers=[],this.itemsPendingRemoval=[],this.items=[],this.itemsHash={},this.missedReferences={},this.uuidChangeObservers=[]}return l(e,[{key:"handleSignout",value:function(){this.items.length=0,this.itemsHash={},this.itemsPendingRemoval.length=0,this.missedReferences={}}},{key:"addModelUuidChangeObserver",value:function(e,t){this.uuidChangeObservers.push({id:e,callback:t})}},{key:"notifyObserversOfUuidChange",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=this.uuidChangeObservers[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){i.value.callback(e,t)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}}},{key:"alternateUUIDForItem",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r,a,i,o,s,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.createItem(n,!0),t.next=3,SFJS.crypto.generateUUID();case 3:for(r.uuid=t.sent,r.informReferencesOfUUIDChange(n.uuid,r.uuid),this.informModelsOfUUIDChangeForItem(r,n.uuid,r.uuid),a=!0,i=!1,o=void 0,t.prev=9,s=n.referencingObjects[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)c=u.value,c.setIsNoLongerBeingReferencedBy(n),n.setIsNoLongerBeingReferencedBy(c),c.addItemAsRelationship(r),c.setDirty(!0);t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),i=!0,o=t.t0;case 17:t.prev=17,t.prev=18,!a&&s.return&&s.return();case 20:if(t.prev=20,!i){t.next=23;break}throw o;case 23:return t.finish(20);case 24:return t.finish(17);case 25:return this.resolveReferencesForItem(r),console.log(n.uuid,"--\x3e",r.uuid),n.deleted=!0,n.content.references=[],n.setDirty(!1),this.mapResponseItemsToLocalModels([n],e.MappingSourceLocalSaved),this.addItem(r),r.setDirty(!0),this.notifyObserversOfUuidChange(n,r),t.abrupt("return",r);case 35:case"end":return t.stop()}},t,this,[[9,13,17,25],[18,,20,24]])}));return t}()},{key:"informModelsOfUUIDChangeForItem",value:function(e,t,n){var r=!0,a=!1,i=void 0;try{for(var o,s=this.items[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value.potentialItemOfInterestHasChangedItsUUID(e,t,n)}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}}},{key:"didSyncModelsOffline",value:function(t){this.notifySyncObserversOfModels(t,e.MappingSourceLocalSaved)}},{key:"mapResponseItemsToLocalModels",value:function(e,t,n){return this.mapResponseItemsToLocalModelsWithOptions({items:e,source:t,sourceKey:n})}},{key:"mapResponseItemsToLocalModelsOmittingFields",value:function(e,t,n,r){return this.mapResponseItemsToLocalModelsWithOptions({items:e,omitFields:t,source:n,sourceKey:r})}},{key:"mapResponseItemsToLocalModelsWithOptions",value:function(e){var t=e.items,n=e.omitFields,r=e.source,a=e.sourceKey,i=(e.options,[]),o=[],s=[],c=!0,l=!1,f=void 0;try{for(var p,d=t[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var h=p.value;if(h){var v=!h.content&&!h.errorDecrypting;if(!(!h.content_type||!h.uuid)&&!v||h.deleted){if(Array.isArray(n)){var m=!0,y=!1,g=void 0;try{for(var b,k=n[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){delete h[b.value]}}catch(e){y=!0,g=e}finally{try{!m&&k.return&&k.return()}finally{if(y)throw g}}}var w=this.findItem(h.uuid);if(w&&(w.updateFromJSON(h),w.dummy=!1),this.itemsPendingRemoval.includes(h.uuid))_.pull(this.itemsPendingRemoval,h.uuid);else{var x=h.content_type||w&&w.content_type;if(!(this.acceptableContentTypes&&!this.acceptableContentTypes.includes(x))){var S=!1;if(1==h.deleted){if(!h.dirty){w&&(s.push(w),this.removeItemLocally(w));continue}S=!0}w||(w=this.createItem(h,!0)),this.addItem(w,S),w.errorDecrypting||s.push(w),i.push(w),o.push(h)}}}else console.error("Server response item is corrupt:",h)}}}catch(e){l=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw f}}var C=!0,E=!1,I=void 0;try{for(var P,F=o.entries()[Symbol.iterator]();!(C=(P=F.next()).done);C=!0){var T=P.value,R=u(T,2),D=R[0],O=R[1],A=i[D];O.content&&this.resolveReferencesForItem(A),A.didFinishSyncing()}}catch(e){E=!0,I=e}finally{try{!C&&F.return&&F.return()}finally{if(E)throw I}}var M=this.popMissedReferenceStructsForObjects(o),N=!0,L=!1,j=void 0;try{for(var B,H=M[Symbol.iterator]();!(N=(B=H.next()).done);N=!0){var U=B.value;!function(e){var t=i.find(function(t){return t.uuid==e.reference_uuid});if(t){e.for_item.addItemAsRelationship(t)}}(U)}}catch(e){L=!0,j=e}finally{try{!N&&H.return&&H.return()}finally{if(L)throw j}}return this.notifySyncObserversOfModels(s,r,a),i}},{key:"missedReferenceBuildKey",value:function(e,t){return e+":"+t}},{key:"popMissedReferenceStructsForObjects",value:function(e){if(!e||0==e.length)return[];var t=[],n=[],r=e.map(function(e){return e.uuid}),a=r[0].length,i=Object.keys(this.missedReferences),o=!0,s=!1,u=void 0;try{for(var c,l=i[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;r.includes(f.substring(0,a))&&(t.push(this.missedReferences[f]),n.push(f))}}catch(e){s=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw u}}var p=!0,d=!1,h=void 0;try{for(var v,m=n[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var y=v.value;delete this.missedReferences[y]}}catch(e){d=!0,h=e}finally{try{!p&&m.return&&m.return()}finally{if(d)throw h}}return t}},{key:"resolveReferencesForItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.errorDecrypting){var n=e.contentObject;if(e.updateLocalRelationships(),n.references){var r=n.references.slice(),a=r.map(function(e){return e.uuid}),i=this.findItems(a,!0),o=!0,s=!1,c=void 0;try{for(var l,f=i.entries()[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var p=l.value,d=u(p,2),h=d[0],v=d[1];if(v)e.addItemAsRelationship(v),t&&v.setDirty(!0);else{var m=a[h],y=this.missedReferenceBuildKey(m,e.uuid);if(!this.missedReferences[y]){var g={reference_uuid:m,for_item:e};this.missedReferences[y]=g}}}}catch(e){s=!0,c=e}finally{try{!o&&f.return&&f.return()}finally{if(s)throw c}}}}}},{key:"notifySyncObserversOfModels",value:function(e,t,n){var r=this,a=this.itemSyncObservers.sort(function(e,t){return e.priority<t.priority?-1:1}),i=!0,o=!1,s=void 0;try{for(var u,c=a[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;!function(a){var i=a.types.includes("*")?e:e.filter(function(e){return a.types.includes(e.content_type)}),o=[],s=[],u=!0,c=!1,l=void 0;try{for(var f,p=i[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var d=f.value;d.deleted?s.push(d):o.push(d)}}catch(e){c=!0,l=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw l}}i.length>0&&r._callSyncObserverCallbackWithTimeout(a,i,o,s,t,n)}(l)}}catch(e){o=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}}},{key:"_callSyncObserverCallbackWithTimeout",value:function(e,t,n,r,a,i){this.$timeout(function(){e.callback(t,n,r,a,i)})}},{key:"createItem",value:function(t,n){var r=e.ContentTypeClassMapping&&e.ContentTypeClassMapping[t.content_type];r||(r=x);var a=new r(t);return n||this.notifySyncObserversOfModels([a],e.MappingSourceLocalSaved),a}},{key:"createConflictedItem",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SFJS.crypto.generateUUID();case 2:return n=e.sent,t=_.merge(t,{uuid:n}),r=this.createItem(t,!0),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"addConflictedItem",value:function(e,t){this.addItem(e);var n=!0,r=!1,a=void 0;try{for(var i,o=t.referencingObjects[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;s.addItemAsRelationship(e),s.setDirty(!0)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}this.resolveReferencesForItem(e),e.content.conflict_of=t.uuid,e.setDirty(!0)}},{key:"duplicateItem",value:function(e){var t=new e.constructor({content:e.content});t.created_at=e.created_at,t.content_type=e.content_type,this.addItem(t);var n=!0,r=!1,a=void 0;try{for(var i,o=e.referencingObjects[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;s.addItemAsRelationship(t),s.setDirty(!0)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return this.resolveReferencesForItem(t),t.setDirty(!0),t}},{key:"addItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addItems([e],t)}},{key:"addItems",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach(function(e){t.itemsHash[e.uuid]||(t.itemsHash[e.uuid]=e,t.items.push(e))})}},{key:"addItemSyncObserver",value:function(e,t,n){this.addItemSyncObserverWithPriority({id:e,types:t,callback:n,priority:1})}},{key:"addItemSyncObserverWithPriority",value:function(e){var t=e.id,n=e.priority,r=e.types,a=e.callback;Array.isArray(r)||(r=[r]),this.itemSyncObservers.push({id:t,types:r,priority:n,callback:a})}},{key:"removeItemSyncObserver",value:function(e){_.remove(this.itemSyncObservers,_.find(this.itemSyncObservers,{id:e}))}},{key:"getDirtyItems",value:function(){return this.items.filter(function(e){return 1==e.dirty&&!e.dummy&&(!e.errorDecrypting||e.deleted)})}},{key:"clearDirtyItems",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value.setDirty(!1)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"setItemToBeDeleted",value:function(e){e.deleted=!0,e.dummy||e.setDirty(!0),this.removeAndDirtyAllRelationshipsForItem(e)}},{key:"removeAndDirtyAllRelationshipsForItem",value:function(e){if(!e.errorDecrypting){var t=!0,n=!1,r=void 0;try{for(var a,i=e.content.references[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,s=this.findItem(o.uuid);s&&(e.removeItemAsRelationship(s),s.hasRelationshipWithItem(e)&&(s.removeItemAsRelationship(e),s.setDirty(!0)))}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}var u=!0,c=!1,l=void 0;try{for(var f,p=e.referencingObjects[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var d=f.value;d.removeItemAsRelationship(e),d.setDirty(!0)}}catch(e){c=!0,l=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw l}}e.referencingObjects=[]}},{key:"setAllItemsDirty",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.allItems,n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){i.value.setDirty(!0,e)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}}},{key:"removeItemLocally",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_.remove(this.items,{uuid:t.uuid}),delete this.itemsHash[t.uuid],t.isBeingRemovedLocally(),this.itemsPendingRemoval.push(t.uuid);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"allItemsMatchingTypes",value:function(e){return this.allItems.filter(function(t){return(_.includes(e,t.content_type)||_.includes(e,"*"))&&!t.dummy})}},{key:"invalidItems",value:function(){return this.allItems.filter(function(e){return e.errorDecrypting})}},{key:"validItemsForContentType",value:function(e){return this.allItems.filter(function(t){return t.content_type==e&&!t.errorDecrypting})}},{key:"findItem",value:function(e){return this.itemsHash[e]}},{key:"findItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=this.itemsHash[u];(c||t)&&n.push(c)}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}},{key:"itemsMatchingPredicate",value:function(e){return this.itemsMatchingPredicates([e])}},{key:"itemsMatchingPredicates",value:function(e){return this.filterItemsWithPredicates(this.allItems,e)}},{key:"filterItemsWithPredicates",value:function(e,t){return e.filter(function(e){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(!e.satisfiesPredicate(s))return!1}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return!0})}},{key:"importItems",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r,a,i,o,s,u,c,l,f,p,d,h,v,m,y,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=[],a=!0,i=!1,o=void 0,t.prev=4,s=n[Symbol.iterator]();case 6:if(a=(u=s.next()).done){t.next=21;break}if(c=u.value,!(l=this.findItem(c.uuid))||l.errorDecrypting){t.next=16;break}return t.next=12,this.createConflictedItem(c);case 12:f=t.sent,c.deleted||l.isItemContentEqualWith(f)||(this.addConflictedItem(f,l),r.push(f)),t.next=18;break;case 16:r.push(c),l&&l.errorDecrypting&&(l.errorDecrypting=!1);case 18:a=!0,t.next=6;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(4),i=!0,o=t.t0;case 27:t.prev=27,t.prev=28,!a&&s.return&&s.return();case 30:if(t.prev=30,!i){t.next=33;break}throw o;case 33:return t.finish(30);case 34:return t.finish(27);case 35:for(p=this.mapResponseItemsToLocalModels(r,e.MappingSourceFileImport),d=!0,h=!1,v=void 0,t.prev=39,m=p[Symbol.iterator]();!(d=(y=m.next()).done);d=!0)g=y.value,g.setDirty(!0,!0),g.deleted=!1;t.next=47;break;case 43:t.prev=43,t.t1=t.catch(39),h=!0,v=t.t1;case 47:t.prev=47,t.prev=48,!d&&m.return&&m.return();case 50:if(t.prev=50,!h){t.next=53;break}throw v;case 53:return t.finish(50);case 54:return t.finish(47);case 55:return t.abrupt("return",p);case 56:case"end":return t.stop()}},t,this,[[4,23,27,35],[28,,30,34],[39,43,47,55],[48,,50,54]])}));return t}()},{key:"getAllItemsJSONData",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getJSONDataForItems(this.allItems,t,n,r));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getJSONDataForItems",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(e){return new S(e,n,r).paramsForExportFile()})).then(function(e){if(a&&0==e.length)return null;var t={items:e};return n&&(t.auth_params=r),JSON.stringify(t,null,2)}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"computeDataIntegrityHash",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.allNondummyItems.sort(function(e,t){return t.updated_at-e.updated_at}),n=t.map(function(e){return e.updatedAtTimestamp()}),r=n.join(","),e.next=6,SFJS.crypto.sha256(r);case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error computing data integrity hash",e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return e}()},{key:"allItems",get:function(){return this.items.slice()}},{key:"allNondummyItems",get:function(){return this.items.filter(function(e){return!e.dummy})}}]),e}(),y=r.SFPrivilegesManager=function(){function e(t,n,r){i(this,e),this.modelManager=t,this.syncManager=n,this.singletonManager=r,this.loadPrivileges(),e.CredentialAccountPassword="CredentialAccountPassword",e.CredentialLocalPasscode="CredentialLocalPasscode",e.ActionManageExtensions="ActionManageExtensions",e.ActionManageBackups="ActionManageBackups",e.ActionViewProtectedNotes="ActionViewProtectedNotes",e.ActionManagePrivileges="ActionManagePrivileges",e.ActionManagePasscode="ActionManagePasscode",e.ActionDeleteNote="ActionDeleteNote",e.SessionExpiresAtKey="SessionExpiresAtKey",e.SessionLengthKey="SessionLengthKey",e.SessionLengthNone=0,e.SessionLengthFiveMinutes=300,e.SessionLengthOneHour=3600,e.SessionLengthOneWeek=604800,this.availableActions=[e.ActionViewProtectedNotes,e.ActionDeleteNote,e.ActionManagePasscode,e.ActionManageBackups,e.ActionManageExtensions,e.ActionManagePrivileges],this.availableCredentials=[e.CredentialAccountPassword,e.CredentialLocalPasscode],this.sessionLengths=[e.SessionLengthNone,e.SessionLengthFiveMinutes,e.SessionLengthOneHour,e.SessionLengthOneWeek,e.SessionLengthIndefinite]}return l(e,[{key:"setDelegate",value:function(e){this.delegate=e}},{key:"getAvailableActions",value:function(){return this.availableActions}},{key:"getAvailableCredentials",value:function(){return this.availableCredentials}},{key:"netCredentialsForAction",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r,a,i,o,s,u,c,l,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPrivileges();case 2:t.t0=n,r=t.sent.getCredentialsForAction(t.t0),a=[],i=!0,o=!1,s=void 0,t.prev=8,u=r[Symbol.iterator]();case 10:if(i=(c=u.next()).done){t.next=27;break}if((l=c.value)!=e.CredentialAccountPassword){t.next=19;break}return t.next=15,this.delegate.isOffline();case 15:f=t.sent,f||a.push(l),t.next=24;break;case 19:if(l!=e.CredentialLocalPasscode){t.next=24;break}return t.next=22,this.delegate.hasLocalPasscode();case 22:p=t.sent,p&&a.push(l);case 24:i=!0,t.next=10;break;case 27:t.next=33;break;case 29:t.prev=29,t.t1=t.catch(8),o=!0,s=t.t1;case 33:t.prev=33,t.prev=34,!i&&u.return&&u.return();case 36:if(t.prev=36,!o){t.next=39;break}throw s;case 39:return t.finish(36);case 40:return t.finish(33);case 41:return t.abrupt("return",a);case 42:case"end":return t.stop()}},t,this,[[8,29,33,41],[34,,36,40]])}));return t}()},{key:"loadPrivileges",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadPromise){e.next=2;break}return e.abrupt("return",this.loadPromise);case 2:return this.loadPromise=new Promise(function(e,n){var r=E.contentType(),i=new C("content_type","=",r);t.singletonManager.registerSingleton([i],function(n){t.privileges=n,e(n)},function(){var n=a(regeneratorRuntime.mark(function n(a){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=new E({content_type:r}),SFJS.crypto.generateUUIDSync){n.next=4;break}return n.next=4,i.initUUID();case 4:t.modelManager.addItem(i),i.setDirty(!0),t.syncManager.sync(),a(i),e(i);case 9:case"end":return n.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}())}),e.abrupt("return",this.loadPromise);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getPrivileges",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privileges){e.next=4;break}return e.abrupt("return",this.privileges);case 4:return e.abrupt("return",this.loadPrivileges());case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"displayInfoForCredential",value:function(t){var n={};return n[e.CredentialAccountPassword]={label:"Account Password",prompt:"Please enter your account password."},n[e.CredentialLocalPasscode]={label:"Local Passcode",prompt:"Please enter your local passcode."},n[t]}},{key:"displayInfoForAction",value:function(t){var n={};return n[e.ActionManageExtensions]={label:"Manage Extensions"},n[e.ActionManageBackups]={label:"Download/Import Backups"},n[e.ActionViewProtectedNotes]={label:"View Protected Notes"},n[e.ActionManagePrivileges]={label:"Manage Privileges"},n[e.ActionManagePasscode]={label:"Manage Passcode"},n[e.ActionDeleteNote]={label:"Delete Notes"},n[t]}},{key:"getSessionLengthOptions",value:function(){return[{value:e.SessionLengthNone,label:"Don't Remember"},{value:e.SessionLengthFiveMinutes,label:"5 Minutes"},{value:e.SessionLengthOneHour,label:"1 Hour"},{value:e.SessionLengthOneWeek,label:"1 Week"}]}},{key:"setSessionLength",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e),t},a=r(n),t.abrupt("return",Promise.all([this.delegate.saveToStorage(e.SessionExpiresAtKey,JSON.stringify(a)),this.delegate.saveToStorage(e.SessionLengthKey,JSON.stringify(n))]));case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearSession",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.setSessionLength(e.SessionLengthNone));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSelectedSessionLength",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.delegate.getFromStorage(e.SessionLengthKey);case 2:if(!(n=t.sent)){t.next=7;break}return t.abrupt("return",JSON.parse(n));case 7:return t.abrupt("return",e.SessionLengthNone);case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSessionExpirey",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.delegate.getFromStorage(e.SessionExpiresAtKey);case 2:if(!(n=t.sent)){t.next=7;break}return t.abrupt("return",new Date(JSON.parse(n)));case 7:return t.abrupt("return",new Date);case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"actionHasPrivilegesConfigured",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netCredentialsForAction(t);case 2:return e.t0=e.sent.length,e.abrupt("return",e.t0>0);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"actionRequiresPrivilege",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionExpirey();case 2:if(!((n=e.sent)>new Date)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,this.netCredentialsForAction(t);case 7:return r=e.sent,e.abrupt("return",r.length>0);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"savePrivileges",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPrivileges();case 2:t=e.sent,t.setDirty(!0),this.syncManager.sync();case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"authenticateAction",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,u,c,l,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netCredentialsForAction(t);case 2:r=e.sent,a=[],i=[],o=!0,s=!1,u=void 0,e.prev=7,c=r[Symbol.iterator]();case 9:if(o=(l=c.next()).done){e.next=18;break}return f=l.value,e.next=13,this._verifyAuthenticationParameters(f,n[f]);case 13:p=e.sent,p?a.push(f):i.push(f);case 15:o=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),s=!0,u=e.t0;case 24:e.prev=24,e.prev=25,!o&&c.return&&c.return();case 27:if(e.prev=27,!s){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",{success:0==i.length,successfulCredentials:a,failedCredentials:i});case 33:case"end":return e.stop()}},e,this,[[7,20,24,32],[25,,27,31]])}));return e}()},{key:"_verifyAuthenticationParameters",value:function(){function t(e,t){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n,r){var i,o,s=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=function(){var e=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.delegate.verifyAccountPassword(t));case 1:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.delegate.verifyLocalPasscode(t));case 1:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}(),n!=e.CredentialAccountPassword){t.next=6;break}return t.abrupt("return",i(r));case 6:if(n!=e.CredentialLocalPasscode){t.next=8;break}return t.abrupt("return",o(r));case 8:case"end":return t.stop()}},t,this)}));return t}()}]),e}(),g=r.SFSessionHistoryManager=function(){function e(t,n,r,a,o){var s=this;i(this,e),this.modelManager=t,this.storageManager=n,this.$timeout=o||setTimeout.bind(window),this.keyRequestHandler=r,this.loadFromDisk().then(function(){s.modelManager.addItemSyncObserver("session-history",a,function(e,t,n,r,a){var i=!0,o=!1,u=void 0;try{for(var c,l=e[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value;try{s.addHistoryEntryForItem(f)}catch(e){console.log("Caught exception while trying to add item history entry",e)}}}catch(e){o=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw u}}})})}return l(e,[{key:"encryptionParams",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.keyRequestHandler());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"addHistoryEntryForItem",value:function(e){var t=this,n={uuid:e.uuid,content_type:e.content_type,updated_at:e.updated_at,content:e.content},r=this.historySession.addEntryForItem(n);this.autoOptimize&&this.historySession.optimizeHistoryForItem(e),r&&this.diskEnabled&&(this.diskTimeout&&(this.$timeout.hasOwnProperty("cancel")?this.$timeout.cancel(this.diskTimeout):clearTimeout(this.diskTimeout)),this.diskTimeout=this.$timeout(function(){t.saveToDisk()},2e3))}},{key:"historyForItem",value:function(e){return this.historySession.historyForItem(e)}},{key:"clearHistoryForItem",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.historySession.clearItemHistory(t),e.abrupt("return",this.saveToDisk());case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearAllHistory",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.historySession.clearAllHistory(),e.abrupt("return",this.storageManager.removeItem("sessionHistory_revisions"));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"toggleDiskSaving",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.diskEnabled=!this.diskEnabled,!this.diskEnabled){e.next=6;break}this.storageManager.setItem("sessionHistory_persist",JSON.stringify(!0)),this.saveToDisk(),e.next=8;break;case 6:return this.storageManager.setItem("sessionHistory_persist",JSON.stringify(!1)),e.abrupt("return",this.storageManager.removeItem("sessionHistory_revisions"));case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"saveToDisk",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.diskEnabled){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.encryptionParams();case 4:t=e.sent,n=new S(this.historySession,t.keys,t.auth_params),n.paramsForSync().then(function(e){r.storageManager.setItem("sessionHistory_revisions",JSON.stringify(e))});case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadFromDisk",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageManager.getItem("sessionHistory_persist");case 2:return t=e.sent,t&&(this.diskEnabled=JSON.parse(t)),e.next=6,this.storageManager.getItem("sessionHistory_revisions");case 6:if(!(n=e.sent)){e.next=18;break}return n=JSON.parse(n),e.next=11,this.encryptionParams();case 11:return r=e.sent,e.next=14,SFJS.itemTransformer.decryptItem(n,r.keys);case 14:a=new I(n),this.historySession=a,e.next=19;break;case 18:this.historySession=new I;case 19:return e.next=21,this.storageManager.getItem("sessionHistory_autoOptimize");case 21:i=e.sent,this.autoOptimize=!i||JSON.parse(i);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"toggleAutoOptimize",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.autoOptimize=!this.autoOptimize,this.autoOptimize?this.storageManager.setItem("sessionHistory_autoOptimize",JSON.stringify(!0)):this.storageManager.setItem("sessionHistory_autoOptimize",JSON.stringify(!1));case 2:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),b=r.SFSingletonManager=function(){function e(t,n){var r=this;i(this,e),this.syncManager=n,this.modelManager=t,this.singletonHandlers=[],t.addItemSyncObserverWithPriority({id:"sf-singleton-manager",types:"*",priority:-1,callback:function(){r.resolveSingletons(t.allNondummyItems,null,!0)}}),n.addEventHandler(function(e,n){if("local-data-loaded"==e)r.resolveSingletons(t.allNondummyItems,null,!0),r.initialDataLoaded=!0;else if("sync:completed"==e){if(!r.initialDataLoaded)return;r.resolveSingletons(n.retrievedItems,n.savedItems)}}),t.addModelUuidChangeObserver("singleton-manager",function(e,t){var n=!0,a=!1,i=void 0;try{for(var o,s=r.singletonHandlers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;u.singleton&&C.ItemSatisfiesPredicates(t,u.predicates)&&(u.singleton=null,r.resolveSingletons([t]))}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}})}return l(e,[{key:"registerSingleton",value:function(e,t,n){this.singletonHandlers.push({predicates:e,resolutionCallback:t,createBlock:n})}},{key:"resolveSingletons",value:function(e,t,n){var r=this;e=e||[],t=t||[];var a=!0,i=!1,o=void 0;try{for(var s,u=this.singletonHandlers[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;!function(a){var i=a.predicates.slice(),o=r.modelManager.filterItemsWithPredicates(e,i),s=function(){a.createBlock&&(a.pendingCreateBlockCallback=!0,a.createBlock(function(e){a.singleton=e,a.pendingCreateBlockCallback=!1,a.resolutionCallback&&a.resolutionCallback(e)}))},u=r.modelManager.filterItemsWithPredicates(t,i).length;if(o.length>0||u>0){var c=r.modelManager.itemsMatchingPredicates(i);if(c.length>=2){var l=c.sort(function(e,t){return e.errorDecrypting?1:t.errorDecrypting?-1:e.created_at<t.created_at?-1:1}),f=l[0],p=l.slice(1,l.length),d=!0,h=!1,v=void 0;try{for(var m,y=p[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value;r.modelManager.setItemToBeDeleted(g)}}catch(e){h=!0,v=e}finally{try{!d&&y.return&&y.return()}finally{if(h)throw v}}r.syncManager.sync(),a.singleton=f,a.resolutionCallback&&a.resolutionCallback(f)}else if(1==c.length){var b=c[0];b.errorDecrypting?(r.modelManager.setItemToBeDeleted(b),s()):a.singleton&&a.singleton===b||(a.singleton=b,a.resolutionCallback&&a.resolutionCallback(b))}}else a.singleton||n||a.pendingCreateBlockCallback||s()}(c)}}catch(e){i=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw o}}}}]),e}(),k=r.SFStorageManager=function(){function e(){i(this,e)}return l(e,[{key:"setItem",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"getItem",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeItem",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"clear",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"getAllModels",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"saveModel",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveModels([t]));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"saveModels",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"deleteModel",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearAllModels",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearAllData",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this.clear(),this.clearAllModels()]));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),w=r.SFSyncManager=function(){function e(t,n,r,a,o){i(this,e),e.KeyRequestLoadLocal="KeyRequestLoadLocal",e.KeyRequestSaveLocal="KeyRequestSaveLocal",e.KeyRequestLoadSaveAccount="KeyRequestLoadSaveAccount",this.httpManager=r,this.modelManager=t,this.storageManager=n,this.$interval=o||setInterval.bind(window),this.$timeout=a||setTimeout.bind(window),this.syncStatus={},this.syncStatusObservers=[],this.eventHandlers=[],this.PerSyncItemUploadLimit=100,this.MajorDataChangeThreshold=15,this.MaxDiscordanceBeforeOutOfSync=5,this.syncDiscordance=0,this.outOfSync=!1}return l(e,[{key:"handleServerIntegrityHash",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!=t.length){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.modelManager.computeDataIntegrityHash();case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:if(n===t){e.next=13;break}return this.syncDiscordance++,this.syncDiscordance>=this.MaxDiscordanceBeforeOutOfSync&&(this.outOfSync||(this.outOfSync=!0,this.notifyEvent("enter-out-of-sync"))),e.abrupt("return",!1);case 13:return this.outOfSync&&(this.outOfSync=!1,this.notifyEvent("exit-out-of-sync")),this.syncDiscordance=0,e.abrupt("return",!0);case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"isOutOfSync",value:function(){return this.outOfSync}},{key:"getServerURL",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageManager.getItem("server");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=window._default_sf_server;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSyncURL",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getServerURL();case 2:return e.t0=e.sent,e.abrupt("return",e.t0+"/items/sync");case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"registerSyncStatusObserver",value:function(e){var t={key:new Date,callback:e};return this.syncStatusObservers.push(t),t}},{key:"removeSyncStatusObserver",value:function(e){_.pull(this.syncStatusObservers,e)}},{key:"syncStatusDidChange",value:function(){var e=this;this.syncStatusObservers.forEach(function(t){t.callback(e.syncStatus)})}},{key:"addEventHandler",value:function(e){return this.eventHandlers.push(e),e}},{key:"removeEventHandler",value:function(e){_.pull(this.eventHandlers,e)}},{key:"notifyEvent",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=this.eventHandlers[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){(0,i.value)(e,t||{})}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}}},{key:"setKeyRequestHandler",value:function(e){this.keyRequestHandler=e}},{key:"getActiveKeyInfo",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.keyRequestHandler(t));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"initialDataLoaded",value:function(){return this._initialDataLoaded}},{key:"loadLocalItems",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.storageManager.getAllModels().then(function(t){t=t.sort(function(e,t){var n=new Date(t.updated_at)-new Date(e.updated_at),a=r.contentTypeLoadPriority,i=0,o=0;return a&&(i=a.indexOf(e.content_type),o=a.indexOf(t.content_type),-1==i&&(i=a.length),-1==o&&(o=a.length)),i==o?n:i<o?-1:1});var o=t.length,s=0,u=[],c=function(){var l=a(regeneratorRuntime.mark(function a(){var l,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=t.slice(s,s+i),a.next=3,r.handleItemsResponse(l,null,m.MappingSourceLocalRetrieved,e.KeyRequestLoadLocal);case 3:if(f=a.sent,u.push(f),!((s+=l.length)<o)){a.next=10;break}return a.abrupt("return",new Promise(function(e,t){r.$timeout(function(){r.notifyEvent("local-data-incremental-load"),n&&n(s,o),c().then(e)})}));case 10:r.notifyEvent("local-data-loaded"),r._initialDataLoaded=!0;case 12:case"end":return a.stop()}},a,r)}));return function(){return l.apply(this,arguments)}}();return c()}));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"writeItemsToLocalStorage",value:function(){function t(e,t){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n,r){var i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(o,s){var u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=n.length){t.next=3;break}return o(),t.abrupt("return");case 3:return t.next=5,i.getActiveKeyInfo(e.KeyRequestSaveLocal);case 5:u=t.sent,Promise.all(n.map(function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new S(t,u.keys,u.auth_params),e.next=3,n.paramsForLocalStorage();case 3:return n=e.sent,r&&delete n.dirty,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}())).then(function(e){i.storageManager.saveModels(e).then(function(){i.syncStatus.localError&&(i.syncStatus.localError=null,i.syncStatusDidChange()),o()}).catch(function(e){console.error("Error writing items",e),i.syncStatus.localError=e,i.syncStatusDidChange(),s()})}).catch(function(e){s(e)});case 7:case"end":return t.stop()}},t,i)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"syncOffline",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=!0,r=!1,a=void 0,e.prev=3,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)s=o.value,s.updated_at=new Date;e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),r=!0,a=e.t0;case 11:e.prev=11,e.prev=12,!n&&i.return&&i.return();case 14:if(e.prev=14,!r){e.next=17;break}throw a;case 17:return e.finish(14);case 18:return e.finish(11);case 19:return e.abrupt("return",this.writeItemsToLocalStorage(t,!0).then(function(e){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;s.deleted&&u.modelManager.removeItemLocally(s)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return u.notifyEvent("sync:completed",{savedItems:t}),u.modelManager.didSyncModelsOffline(t),{saved_items:t}}));case 20:case"end":return e.stop()}},e,this,[[3,7,11,19],[12,,14,18]])}));return e}()},{key:"markAllItemsDirtyAndSaveOffline",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,u,c,l,f,p,d,h,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.modelManager.allNondummyItems.filter(function(e){return!e.errorDecrypting}).slice(),!t){e.next=28;break}r=!0,a=!1,i=void 0,e.prev=5,o=n[Symbol.iterator]();case 7:if(r=(s=o.next()).done){e.next=14;break}return u=s.value,e.next=11,this.modelManager.alternateUUIDForItem(u);case 11:r=!0,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),a=!0,i=e.t0;case 20:e.prev=20,e.prev=21,!r&&o.return&&o.return();case 23:if(e.prev=23,!a){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:for(c=this.modelManager.allNondummyItems,l=!0,f=!1,p=void 0,e.prev=32,d=c[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)v=h.value,v.setDirty(!0);e.next=40;break;case 36:e.prev=36,e.t1=e.catch(32),f=!0,p=e.t1;case 40:e.prev=40,e.prev=41,!l&&d.return&&d.return();case 43:if(e.prev=43,!f){e.next=46;break}throw p;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return e.abrupt("return",this.writeItemsToLocalStorage(c,!1));case 49:case"end":return e.stop()}},e,this,[[5,16,20,28],[21,,23,27],[32,36,40,48],[41,,43,47]])}));return e}()},{key:"setSyncToken",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._syncToken=t,e.next=3,this.storageManager.setItem("syncToken",t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSyncToken",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._syncToken){e.next=4;break}return e.next=3,this.storageManager.getItem("syncToken");case 3:this._syncToken=e.sent;case 4:return e.abrupt("return",this._syncToken);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"setCursorToken",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cursorToken=t,!t){e.next=6;break}return e.next=4,this.storageManager.setItem("cursorToken",t);case 4:e.next=8;break;case 6:return e.next=8,this.storageManager.removeItem("cursorToken");case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"getCursorToken",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cursorToken){e.next=4;break}return e.next=3,this.storageManager.getItem("cursorToken");case 3:this._cursorToken=e.sent;case 4:return e.abrupt("return",this._cursorToken);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearQueuedCallbacks",value:function(){this._queuedCallbacks=[]}},{key:"callQueuedCallbacks",value:function(e){var t=this.queuedCallbacks;if(t.length){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){(0,i.value)(e)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}this.clearQueuedCallbacks()}}},{key:"beginCheckingIfSyncIsTakingTooLong",value:function(){this.syncStatus.checker&&this.stopCheckingIfSyncIsTakingTooLong(),this.syncStatus.checker=this.$interval(function(){(new Date-this.syncStatus.syncStart)/1e3>5&&(this.notifyEvent("sync:taking-too-long"),this.stopCheckingIfSyncIsTakingTooLong())}.bind(this),500)}},{key:"stopCheckingIfSyncIsTakingTooLong",value:function(){this.$interval.hasOwnProperty("cancel")?this.$interval.cancel(this.syncStatus.checker):clearInterval(this.syncStatus.checker),this.syncStatus.checker=null}},{key:"lockSyncing",value:function(){this.syncLocked=!0}},{key:"unlockSyncing",value:function(){this.syncLocked=!1}},{key:"sync",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(a,i){var o,s,u,c,l,f,p,d,h,v,m,y,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.syncLocked){t.next=4;break}return console.log("Sync Locked, Returning;"),a(),t.abrupt("return");case 4:if(r||(r={}),o=n.modelManager.getDirtyItems(),s=o.filter(function(e){return e.dirtyCount>0&&(e.dirtyCount=0,!0)}),!n.syncStatus.syncOpInProgress||r.force){t.next=14;break}return n.repeatOnCompletion=!0,n.queuedCallbacks.push(a),t.next=12,n.writeItemsToLocalStorage(s,!1);case 12:return console.log("Sync op in progress; returning."),t.abrupt("return");case 14:return t.next=16,n.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 16:if(u=t.sent,!u.offline){t.next=20;break}return n.syncOffline(o).then(function(e){n.modelManager.clearDirtyItems(o),a(e)}).catch(function(e){n.notifyEvent("sync-exception",e)}),t.abrupt("return");case 20:return c=n.syncStatus.needsMoreSync,n.syncStatus.syncOpInProgress=!0,n.syncStatus.syncStart=new Date,n.beginCheckingIfSyncIsTakingTooLong(),l=n.PerSyncItemUploadLimit,f=o.slice(0,l),f.length<o.length?n.syncStatus.needsMoreSync=!0:n.syncStatus.needsMoreSync=!1,c||(n.syncStatus.total=o.length,n.syncStatus.current=0),n.syncStatus.current>n.syncStatus.total&&(n.syncStatus.total=n.syncStatus.current),n.syncStatusDidChange(),t.next=32,n.writeItemsToLocalStorage(s,!1);case 32:return r.onPreSyncSave&&r.onPreSyncSave(),n.allRetreivedItems||(n.allRetreivedItems=[]),n.allSavedItems||(n.allSavedItems=[]),p={},p.limit=150,r.performIntegrityCheck&&(p.compute_integrity=!0),t.prev=38,t.next=41,Promise.all(f.map(function(e){var t=new S(e,u.keys,u.auth_params);return t.additionalFields=r.additionalFields,t.paramsForSync()})).then(function(e){p.items=e});case 41:t.next=46;break;case 43:t.prev=43,t.t0=t.catch(38),n.notifyEvent("sync-exception",t.t0);case 46:for(d=!0,h=!1,v=void 0,t.prev=49,m=f[Symbol.iterator]();!(d=(y=m.next()).done);d=!0)g=y.value,g.dirtyCount=0;t.next=57;break;case 53:t.prev=53,t.t1=t.catch(49),h=!0,v=t.t1;case 57:t.prev=57,t.prev=58,!d&&m.return&&m.return();case 60:if(t.prev=60,!h){t.next=63;break}throw v;case 63:return t.finish(60);case 64:return t.finish(57);case 65:return t.next=67,n.getSyncToken();case 67:return p.sync_token=t.sent,t.next=70,n.getCursorToken();case 70:return p.cursor_token=t.sent,t.prev=71,t.t2=n.httpManager,t.next=75,n.getSyncURL();case 75:t.t3=t.sent,t.t4=p,t.t5=function(e){n.handleSyncSuccess(f,e,r).then(function(){a(e)}).catch(function(e){console.log("Caught sync success exception:",e),n.handleSyncError(null,null,o).then(function(e){a(e)})})},t.t6=function(e,t){n.handleSyncError(e,t,o).then(function(e){a(e)})},t.t2.postAbsolute.call(t.t2,t.t3,t.t4,t.t5,t.t6),t.next=85;break;case 82:t.prev=82,t.t7=t.catch(71),console.log("Sync exception caught:",t.t7);case 85:case"end":return t.stop()}},t,n,[[38,43],[49,53,57,65],[58,,60,64],[71,82]])}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"handleSyncSuccess",value:function(){function t(e,t,r){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n,r,a){var i,o,s,u,c,l,f,p,d,h,v,y,g,b,k=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i=[],o=!0,s=!1,u=void 0,t.prev=4,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)f=l.value,0==f.dirtyCount&&i.push(f);t.next=12;break;case 8:t.prev=8,t.t0=t.catch(4),s=!0,u=t.t0;case 12:t.prev=12,t.prev=13,!o&&c.return&&c.return();case 15:if(t.prev=15,!s){t.next=18;break}throw u;case 18:return t.finish(15);case 19:return t.finish(12);case 20:return this.modelManager.clearDirtyItems(i),this.syncStatus.error=null,p=this.allSavedItems.map(function(e){return e.uuid}),r.retrieved_items=r.retrieved_items.filter(function(e){return!p.includes(e.uuid)}),t.next=26,this.handleItemsResponse(r.retrieved_items,null,m.MappingSourceRemoteRetrieved,e.KeyRequestLoadSaveAccount);case 26:return d=t.sent,this.allRetreivedItems=this.allRetreivedItems.concat(d),this.syncStatus.retrievedCount=this.allRetreivedItems.length,h=["content","auth_hash"],t.next=32,this.handleItemsResponse(r.saved_items,h,m.MappingSourceRemoteSaved,e.KeyRequestLoadSaveAccount);case 32:return v=t.sent,this.allSavedItems=this.allSavedItems.concat(v),y=r.unsaved,t.next=37,this.handleUnsavedItemsResponse(y);case 37:return t.next=39,this.writeItemsToLocalStorage(v,!1);case 39:return t.next=41,this.writeItemsToLocalStorage(d,!1);case 41:if(this.syncStatus.syncOpInProgress=!1,this.syncStatus.current+=n.length,this.syncStatusDidChange(),this.setSyncToken(r.sync_token),this.setCursorToken(r.cursor_token),this.stopCheckingIfSyncIsTakingTooLong(),!r.integrity_hash||r.cursor_token){t.next=52;break}return t.next=50,this.handleServerIntegrityHash(r.integrity_hash);case 50:g=t.sent,g||this.syncDiscordance<this.MaxDiscordanceBeforeOutOfSync&&(this.repeatOnCompletion=!0);case 52:return t.next=54,this.getCursorToken();case 54:if(!(b=t.sent)&&!this.syncStatus.needsMoreSync){t.next=59;break}return t.abrupt("return",new Promise(function(e,t){setTimeout(function(){this.sync(a).then(e)}.bind(k),10)}));case 59:if(!this.repeatOnCompletion){t.next=64;break}return this.repeatOnCompletion=!1,t.abrupt("return",new Promise(function(e,t){setTimeout(function(){this.sync(a).then(e)}.bind(k),10)}));case 64:return this.syncStatus.retrievedCount=0,this.syncStatusDidChange(),(this.allRetreivedItems.length>=this.majorDataChangeThreshold||v.length>=this.majorDataChangeThreshold||y.length>=this.majorDataChangeThreshold)&&this.notifyEvent("major-data-change"),this.callQueuedCallbacks(r),this.notifyEvent("sync:completed",{retrievedItems:this.allRetreivedItems,savedItems:this.allSavedItems,unsavedItems:y}),this.allRetreivedItems=[],this.allSavedItems=[],t.abrupt("return",r);case 72:case"end":return t.stop()}},t,this,[[4,8,12,20],[13,,15,19]])}));return t}()},{key:"handleSyncError",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sync error: ",t),401==n&&this.notifyEvent("sync-session-invalid"),t?"string"==typeof t&&(t={error:{message:t}}):t={error:{message:"Could not connect to server."}},this.syncStatus.syncOpInProgress=!1,this.syncStatus.error=t.error,this.syncStatusDidChange(),this.writeItemsToLocalStorage(r,!1),this.modelManager.didSyncModelsOffline(r),this.stopCheckingIfSyncIsTakingTooLong(),this.notifyEvent("sync:error",t.error),this.callQueuedCallbacks({error:"Sync error"}),e.abrupt("return",t);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleItemsResponse",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){var i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getActiveKeyInfo(a);case 2:return i=e.sent.keys,e.next=5,SFJS.itemTransformer.decryptMultipleItems(t,i);case 5:return o=this.modelManager.mapResponseItemsToLocalModelsOmittingFields(t,n,r),s=o.filter(function(e){var t=e.errorDecryptingValueChanged;return e.errorDecryptingValueChanged=!1,t}),s.length>0&&this.writeItemsToLocalStorage(s,!1),e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"refreshErroredItems",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.modelManager.allNondummyItems.filter(function(e){return 1==e.errorDecrypting}),!(n.length>0)){t.next=3;break}return t.abrupt("return",this.handleItemsResponse(n,null,m.MappingSourceLocalRetrieved,e.KeyRequestLoadSaveAccount));case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"handleUnsavedItemsResponse",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r,a,i,o,s,u,c,l,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=n.length){t.next=2;break}return t.abrupt("return");case 2:console.log("Handle Conflicted Items:",n),r=!0,a=!1,i=void 0,t.prev=6,o=n[Symbol.iterator]();case 8:if(r=(s=o.next()).done){t.next=35;break}return u=s.value,c=u.item,t.t0=SFJS.itemTransformer,t.t1=[c],t.next=15,this.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 15:return t.t2=t.sent.keys,t.next=18,t.t0.decryptMultipleItems.call(t.t0,t.t1,t.t2);case 18:if(l=this.modelManager.findItem(c.uuid)){t.next=21;break}return t.abrupt("continue",32);case 21:if(f=u.error,"uuid_conflict"!==f.tag){t.next=27;break}return t.next=25,this.modelManager.alternateUUIDForItem(l);case 25:t.next=32;break;case 27:if("sync_conflict"!==f.tag){t.next=32;break}return t.next=30,this.modelManager.createConflictedItem(c);case 30:p=t.sent,c.deleted||l.isItemContentEqualWith(p)||this.modelManager.addConflictedItem(p,l);case 32:r=!0,t.next=8;break;case 35:t.next=41;break;case 37:t.prev=37,t.t3=t.catch(6),a=!0,i=t.t3;case 41:t.prev=41,t.prev=42,!r&&o.return&&o.return();case 44:if(t.prev=44,!a){t.next=47;break}throw i;case 47:return t.finish(44);case 48:return t.finish(41);case 49:this.sync(null,{additionalFields:["created_at","updated_at"]});case 50:case"end":return t.stop()}},t,this,[[6,37,41,49],[42,,44,48]])}));return t}()},{key:"stateless_downloadAllItems",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(){var r=a(regeneratorRuntime.mark(function r(i,o){var s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s={limit:n.limit||500,sync_token:n.syncToken,cursor_token:n.cursorToken,content_type:n.contentType,event:n.event},r.prev=1,r.t0=t.httpManager,r.next=5,t.getSyncURL();case 5:r.t1=r.sent,r.t2=s,r.t3=function(){var r=a(regeneratorRuntime.mark(function r(a){var o,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.retrievedItems||(n.retrievedItems=[]),o=a.retrieved_items,r.next=4,t.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 4:return s=r.sent.keys,r.next=7,SFJS.itemTransformer.decryptMultipleItems(o,s);case 7:n.retrievedItems=n.retrievedItems.concat(o.map(function(e){return t.modelManager.createItem(e,!0)})),n.syncToken=a.sync_token,n.cursorToken=a.cursor_token,n.cursorToken?t.stateless_downloadAllItems(n).then(i):i(n.retrievedItems);case 11:case"end":return r.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}(),r.t4=function(e,t){o(e)},r.t0.postAbsolute.call(r.t0,r.t1,r.t2,r.t3,r.t4),r.next=16;break;case 12:r.prev=12,r.t5=r.catch(1),console.log("Download all items exception caught:",r.t5),o(r.t5);case 16:case"end":return r.stop()}},r,t,[[1,12]])}));return function(e,t){return r.apply(this,arguments)}}())}},{key:"resolveOutOfSync",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stateless_downloadAllItems({event:"resolve-out-of-sync"}).then(function(){var e=a(regeneratorRuntime.mark(function e(n){var r,a,i,o,s,u,c,l,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=!0,i=!1,o=void 0,e.prev=4,s=n[Symbol.iterator]();case 6:if(a=(u=s.next()).done){e.next=20;break}if(c=u.value,!(l=t.modelManager.findItem(c.uuid))){e.next=16;break}if(!(f=!c.isItemContentEqualWith(l))){e.next=16;break}return e.next=14,t.modelManager.createConflictedItem(l,l);case 14:p=e.sent,t.modelManager.addConflictedItem(p,l);case 16:r.push(c);case 17:a=!0,e.next=6;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(4),i=!0,o=e.t0;case 26:e.prev=26,e.prev=27,!a&&s.return&&s.return();case 29:if(e.prev=29,!i){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return t.modelManager.mapResponseItemsToLocalModelsWithOptions({items:r,source:m.MappingSourceRemoteRetrieved}),e.next=37,t.writeItemsToLocalStorage(t.modelManager.allNondummyItems);case 37:return e.abrupt("return",t.sync({performIntegrityCheck:!0}));case 38:case"end":return e.stop()}},e,t,[[4,22,26,34],[27,,29,33]])}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSignout",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._syncToken=null,this._cursorToken=null,this._queuedCallbacks=[],this.syncStatus={};case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearSyncToken",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._syncToken=null,this._cursorToken=null,e.abrupt("return",this.storageManager.removeItem("syncToken"));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"queuedCallbacks",get:function(){return this._queuedCallbacks||(this._queuedCallbacks=[]),this._queuedCallbacks}}]),e}(),x=r.SFItem=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.content={},this.referencingObjects=[],this.updateFromJSON(t),this.uuid||"undefined"!=typeof SFJS&&SFJS.crypto.generateUUIDSync&&(this.uuid=SFJS.crypto.generateUUIDSync()),"object"!==c(this.content)||this.content.references||(this.content.references=[])}return l(e,[{key:"initUUID",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.uuid){e.next=4;break}return e.next=3,SFJS.crypto.generateUUID();case 3:this.uuid=e.sent;case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateFromJSON",value:function(t){if(t){this.created_at=t.created_at,this.updated_at=t.updated_at,this.deleted=t.deleted,this.uuid=t.uuid,this.enc_item_key=t.enc_item_key,this.auth_hash=t.auth_hash,this.auth_params=t.auth_params;var n=["errorDecrypting","dirty","dirtyCount","dummy"],r=!0,a=!1,i=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;void 0!==t[u]&&(this[u]=t[u])}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}if(this.content_type||(this.content_type=t.content_type),t.errorDecrypting)this.content=t.content;else try{var c="string"==typeof t.content?JSON.parse(t.content):t.content;e.deepMerge(this.contentObject,c)}catch(e){console.log("Error while updating item from json",e)}this.created_at?(this.created_at=new Date(this.created_at),this.updated_at=new Date(this.updated_at)):(this.created_at=new Date,this.updated_at=new Date),this._client_updated_at=null,t.content?this.mapContentToLocalProperties(this.contentObject):1==t.deleted&&this.handleDeletedContent()}}},{key:"mapContentToLocalProperties",value:function(e){}},{key:"createContentJSONFromProperties",value:function(){var t=this.structureParams();return e.deepMerge(this.contentObject,t),t}},{key:"structureParams",value:function(){return this.getContentCopy()}},{key:"handleDeletedContent",value:function(){}},{key:"setDirty",value:function(e,t){this.dirty=e,this.dirtyCount||(this.dirtyCount=0),e?this.dirtyCount++:this.dirtyCount=0,e&&!t?this.client_updated_at=new Date:this.hasRawClientUpdatedAtValue()||(this.client_updated_at=new Date(this.updated_at))}},{key:"updateLocalRelationships",value:function(){}},{key:"addItemAsRelationship",value:function(e){if(e.setIsBeingReferencedBy(this),!this.hasRelationshipWithItem(e)){var t=this.content.references||[];t.push({uuid:e.uuid,content_type:e.content_type}),this.content.references=t}}},{key:"removeItemAsRelationship",value:function(e){e.setIsNoLongerBeingReferencedBy(this),this.removeReferenceWithUuid(e.uuid)}},{key:"setIsBeingReferencedBy",value:function(e){_.find(this.referencingObjects,{uuid:e.uuid})||this.referencingObjects.push(e)}},{key:"setIsNoLongerBeingReferencedBy",value:function(e){_.remove(this.referencingObjects,{uuid:e.uuid}),this.hasRelationshipWithItem(e)&&(this.removeReferenceWithUuid(e.uuid),this.setDirty(!0))}},{key:"removeReferenceWithUuid",value:function(e){var t=this.content.references||[];t=t.filter(function(t){return t.uuid!=e}),this.content.references=t}},{key:"hasRelationshipWithItem",value:function(e){return null!=this.content.references.find(function(t){return t.uuid==e.uuid})}},{key:"isBeingRemovedLocally",value:function(){}},{key:"didFinishSyncing",value:function(){}},{key:"informReferencesOfUUIDChange",value:function(e,t){}},{key:"potentialItemOfInterestHasChangedItsUUID",value:function(e,t,n){var r=!0,a=!1,i=void 0;try{for(var o,s=this.content.references[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.uuid==t&&(u.uuid=n,this.setDirty(!0))}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}}},{key:"doNotEncrypt",value:function(){return!1}},{key:"setDomainDataItem",value:function(e,t,n){if(!n)return void console.error("SFItem.AppDomain needs to be set.");if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var r=this.content.appData[n];r||(r={}),r[e]=t,this.content.appData[n]=r}}},{key:"getDomainDataItem",value:function(e,t){if(!t)return void console.error("SFItem.AppDomain needs to be set.");if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var n=this.content.appData[t];return n?n[e]:null}}},{key:"setAppDataItem",value:function(t,n){this.setDomainDataItem(t,n,e.AppDomain)}},{key:"getAppDataItem",value:function(t){return this.getDomainDataItem(t,e.AppDomain)}},{key:"hasRawClientUpdatedAtValue",value:function(){return null!=this.getAppDataItem("client_updated_at")}},{key:"keysToIgnoreWhenCheckingContentEquality",value:function(){return[]}},{key:"appDataKeysToIgnoreWhenCheckingContentEquality",value:function(){return["client_updated_at"]}},{key:"getContentCopy",value:function(){return JSON.parse(JSON.stringify(this.content))}},{key:"isItemContentEqualWith",value:function(t){var n=function(e,t){if(!e)return e;var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){delete e[i.value]}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e},r=this.getContentCopy();r.appData&&n(r.appData[e.AppDomain],this.appDataKeysToIgnoreWhenCheckingContentEquality()),r=n(r,this.keysToIgnoreWhenCheckingContentEquality());var a=t.getContentCopy();return a.appData&&n(a.appData[e.AppDomain],t.appDataKeysToIgnoreWhenCheckingContentEquality()),a=n(a,t.keysToIgnoreWhenCheckingContentEquality()),JSON.stringify(r)===JSON.stringify(a)}},{key:"satisfiesPredicate",value:function(e){return C.ItemSatisfiesPredicate(this,e)}},{key:"createdAtString",value:function(){return this.dateToLocalizedString(this.created_at)}},{key:"updatedAtString",value:function(){return this.dateToLocalizedString(this.client_updated_at)}},{key:"updatedAtTimestamp",value:function(){return this.updated_at.getTime()}},{key:"dateToLocalizedString",value:function(e){if("undefined"!=typeof Intl&&Intl.DateTimeFormat){if(!s){var t=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;s=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"})}return s.format(e)}return e.toDateString()+" "+e.toLocaleTimeString()}},{key:"contentObject",get:function(){if(this.errorDecrypting)return this.content;if(!this.content)return this.content={},this.content;if(null!==this.content&&"object"===c(this.content))return this.content;try{var e=JSON.parse(this.content);return this.content=e,this.content}catch(e){return console.log("Error parsing json",e,this),this.content={},this.content}}},{key:"pinned",get:function(){return this.getAppDataItem("pinned")}},{key:"archived",get:function(){return this.getAppDataItem("archived")}},{key:"locked",get:function(){return this.getAppDataItem("locked")}},{key:"displayName",get:function(){return"Item"}},{key:"client_updated_at",get:function(){if(!this._client_updated_at){var e=this.getAppDataItem("client_updated_at");this._client_updated_at=e?new Date(e):new Date(this.updated_at)}return this._client_updated_at},set:function(e){this._client_updated_at=e,this.setAppDataItem("client_updated_at",e)}}],[{key:"deepMerge",value:function(e,t){function n(e,t){if(_.isArray(e))return t}return _.mergeWith(e,t,n),e}}]),e}(),S=r.SFItemParams=function(){function e(t,n,r){if(i(this,e),this.item=t,this.keys=n,this.auth_params=r,this.keys&&!this.auth_params)throw"SFItemParams.auth_params must be supplied if supplying keys.";if(this.auth_params&&!this.auth_params.version)throw"SFItemParams.auth_params is missing version"}return l(e,[{key:"paramsForExportFile",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.additionalFields=["updated_at"],this.forExportFile=!0,!t){e.next=6;break}return e.abrupt("return",this.__params());case 6:return e.next=8,this.__params();case 8:return n=e.sent,e.abrupt("return",_.omit(n,["deleted"]));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"paramsForExtension",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.paramsForExportFile());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"paramsForLocalStorage",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.additionalFields=["updated_at","dirty","errorDecrypting"],this.forExportFile=!0,e.abrupt("return",this.__params());case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"paramsForSync",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.__params());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"__params",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={uuid:this.item.uuid,content_type:this.item.content_type,deleted:this.item.deleted,created_at:this.item.created_at},this.item.errorDecrypting){e.next=23;break}if(n=this.item.doNotEncrypt()&&!this.forExportFile,!this.keys||n){e.next=11;break}return e.next=6,SFJS.itemTransformer.encryptItem(this.item,this.keys,this.auth_params);case 6:r=e.sent,_.merge(t,r),"001"!==this.auth_params.version&&(t.auth_hash=null),e.next=21;break;case 11:if(!this.forExportFile){e.next=15;break}e.t0=this.item.createContentJSONFromProperties(),e.next=19;break;case 15:return e.next=17,SFJS.crypto.base64(JSON.stringify(this.item.createContentJSONFromProperties()));case 17:e.t1=e.sent,e.t0="000"+e.t1;case 19:t.content=e.t0,this.forExportFile||(t.enc_item_key=null,t.auth_hash=null);case 21:e.next=26;break;case 23:t.content=this.item.content,t.enc_item_key=this.item.enc_item_key,t.auth_hash=this.item.auth_hash;case 26:return this.additionalFields&&_.merge(t,_.pick(this.item,this.additionalFields)),e.abrupt("return",t);case 28:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),C=r.SFPredicate=function(){function e(t,n,r){i(this,e),this.keypath=t,this.operator=n,this.value=r,e.IsRecursiveOperator(this.operator)&&(this.value=this.value.map(e.fromArray))}return l(e,null,[{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2])}},{key:"ObjectSatisfiesPredicate",value:function(t,n){if(Array.isArray(n)&&(n=this.fromArray(n)),e.IsRecursiveOperator(n.operator)){if("and"===n.operator){var r=!0,a=!1,i=void 0;try{for(var o,s=n.value[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(!this.ObjectSatisfiesPredicate(t,u))return!1}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return!0}if("or"===n.operator){var c=!0,l=!1,f=void 0;try{for(var p,d=n.value[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var u=p.value;if(this.ObjectSatisfiesPredicate(t,u))return!0}}catch(e){l=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw f}}return!1}}var h=n.value;"string"==typeof h&&h.includes(".ago")&&(h=this.DateFromString(h));var v=n.keypath.split(".").reduce(function(e,t){return e&&e[t]},t),m=[!1,"",null,void 0,NaN];if(void 0==v)return"!="==n.operator?!m.includes(n.value):m.includes(n.value);if("="==n.operator)return Array.isArray(v)?JSON.stringify(v)==JSON.stringify(h):v==h;if("!="==n.operator)return Array.isArray(v)?JSON.stringify(v)!=JSON.stringify(h):v!==h;if("<"==n.operator)return v<h;if(">"==n.operator)return v>h;if("<="==n.operator)return v<=h;if(">="==n.operator)return v>=h;if("startsWith"==n.operator)return v.startsWith(h);if("in"==n.operator)return-1!=h.indexOf(v);if("includes"==n.operator)return this.resolveIncludesPredicate(v,h);if("matches"==n.operator){return new RegExp(h).test(v)}return!1}},{key:"resolveIncludesPredicate",value:function(t,n){if("string"==typeof n)return t.includes(n);var r;r=Array.isArray(n)?e.fromArray(n):n;var a=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;if(this.ObjectSatisfiesPredicate(c,r))return!0}}catch(e){i=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw o}}return!1}},{key:"ItemSatisfiesPredicate",value:function(t,n){return Array.isArray(n)&&(n=e.fromArray(n)),this.ObjectSatisfiesPredicate(t,n)}},{key:"ItemSatisfiesPredicates",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(!this.ItemSatisfiesPredicate(e,s))return!1}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return!0}},{key:"DateFromString",value:function(e){var t=e.split("."),n=t[1],r=new Date,a=parseInt(t[0]);return"days"==n?r.setDate(r.getDate()-a):"hours"==n&&r.setHours(r.getHours()-a),r}},{key:"IsRecursiveOperator",value:function(e){return["and","or"].includes(e)}}]),e}(),E=r.SFPrivileges=function(e){function r(e){i(this,r);var n=t(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.content.desktopPrivileges||(n.content.desktopPrivileges={}),n}return n(r,e),l(r,null,[{key:"contentType",value:function(){return"SN|Privileges"}}]),l(r,[{key:"setCredentialsForAction",value:function(e,t){this.content.desktopPrivileges[e]=t}},{key:"getCredentialsForAction",value:function(e){return this.content.desktopPrivileges[e]||[]}},{key:"toggleCredentialForAction",value:function(e,t){this.isCredentialRequiredForAction(e,t)?this.removeCredentialForAction(e,t):this.addCredentialForAction(e,t)}},{key:"removeCredentialForAction",value:function(e,t){_.pull(this.content.desktopPrivileges[e],t)}},{key:"addCredentialForAction",value:function(e,t){var n=this.getCredentialsForAction(e);n.push(t),this.setCredentialsForAction(e,n)}},{key:"isCredentialRequiredForAction",value:function(e,t){return this.getCredentialsForAction(e).includes(t)}}]),r}(x),I=r.SFHistorySession=function(e){function r(e){i(this,r);var n=t(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.content.itemUUIDToItemHistoryMapping||(n.content.itemUUIDToItemHistoryMapping={}),Object.keys(n.content.itemUUIDToItemHistoryMapping).forEach(function(e){var t=n.content.itemUUIDToItemHistoryMapping[e];n.content.itemUUIDToItemHistoryMapping[e]=new P(t)}),n}return n(r,e),l(r,[{key:"addEntryForItem",value:function(e){return this.historyForItem(e).addHistoryEntryForItem(e)}},{key:"historyForItem",value:function(e){var t=this.content.itemUUIDToItemHistoryMapping[e.uuid];return t||(t=this.content.itemUUIDToItemHistoryMapping[e.uuid]=new P),t}},{key:"clearItemHistory",value:function(e){this.historyForItem(e).clear()}},{key:"clearAllHistory",value:function(){this.content.itemUUIDToItemHistoryMapping={}}},{key:"optimizeHistoryForItem",value:function(e){var t=this.historyForItem(e);t.entries.length>r.LargeItemEntryAmountThreshold&&t.optimize()}}]),r}(x);I.LargeItemEntryAmountThreshold=60;var P=r.SFItemHistory=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),this.entries||(this.entries=[]),t.entries){var n=!0,r=!1,a=void 0;try{for(var o,s=t.entries[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value,c=this.createEntryForItem(u.item);c.setPreviousEntry(this.getLastEntry()),this.entries.push(c)}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}}}return l(e,[{key:"createEntryForItem",value:function(t){var n=e.HistoryEntryClassMapping&&e.HistoryEntryClassMapping[t.content_type];return n||(n=F),new n(t)}},{key:"getLastEntry",value:function(){return this.entries[this.entries.length-1]}},{key:"addHistoryEntryForItem",value:function(e){var t=this.createEntryForItem(e),n=this.getLastEntry();if(t.setPreviousEntry(n),!t.isSameAsEntry(n))return this.entries.push(t),t}},{key:"clear",value:function(){this.entries.length=0}},{key:"optimize",value:function(){var t=this,n=[],r=function(t){return t.deltaSize()>e.LargeEntryDeltaThreshold},a=function(e,a,i){if(i)n.push(e);else{var a=n.indexOf(e);-1!==a&&n.splice(a,1)}if(i&&r(e)&&-1==e.operationVector()){var o=t.entries[a-1];o&&n.push(o)}};this.entries.forEach(function(e,n){if(0==n||n==t.entries.length-1)a(e,n,!0);else{var i=r(e);a(e,n,i)}}),this.entries=this.entries.filter(function(e,t){return-1!==n.indexOf(e)})}}]),e}();P.LargeEntryDeltaThreshold=15;var F=r.SFItemHistoryEntry=function(){function e(t){i(this,e),this.item=x.deepMerge({},t),this.defaultContentKeyToDiffOn="text",this.textCharDiffLength=0,"string"==typeof this.item.updated_at&&(this.item.updated_at=new Date(this.item.updated_at))}return l(e,[{key:"setPreviousEntry",value:function(e){this.hasPreviousEntry=null!=e,this.item.content[this.defaultContentKeyToDiffOn]&&(this.textCharDiffLength=e?this.item.content[this.defaultContentKeyToDiffOn].length-e.item.content[this.defaultContentKeyToDiffOn].length:this.item.content[this.defaultContentKeyToDiffOn].length)}},{key:"operationVector",value:function(){return void 0!=this.textCharDiffLength?this.hasPreviousEntry&&0!=this.textCharDiffLength?this.textCharDiffLength<0?-1:1:0:1}},{key:"deltaSize",value:function(){return void 0!=this.textCharDiffLength?Math.abs(this.textCharDiffLength):1}},{key:"isSameAsEntry",value:function(e){if(!e)return!1;var t=new x(this.item),n=new x(e.item);return t.isItemContentEqualWith(n)}}]),e}(),d="undefined"!=typeof window?window:void 0!==e?e:null,T=r.SFAbstractCrypto=function(){function e(){i(this,e),this.DefaultPBKDF2Length=768}return l(e,[{key:"generateUUIDSync",value:function(){var e=d.crypto||d.msCrypto;if(e){var t=new Uint32Array(4);e.getRandomValues(t);var n=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){n++;var r=t[n>>3]>>n%8*4&15;return("x"==e?r:3&r|8).toString(16)})}var r=(new Date).getTime();return d.performance&&"function"==typeof d.performance.now&&(r+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)})}},{key:"generateUUID",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.generateUUIDSync());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"decryptText",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.ciphertextToAuth,u=i.contentCiphertext,c=i.encryptionKey,l=i.iv,f=i.authHash,p=i.authKey,d=arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d||f){e.next=3;break}return console.error("Auth hash is required."),e.abrupt("return");case 3:if(!f){e.next=10;break}return e.next=6,this.hmac256(s,p);case 6:if(t=e.sent,f===t){e.next=10;break}return console.error("Auth hash does not match, returning null."),e.abrupt("return",null);case 10:return n=o.enc.Hex.parse(c),r=o.enc.Hex.parse(l||""),a=o.AES.decrypt(u,n,{iv:r,mode:o.mode.CBC,padding:o.pad.Pkcs7}),e.abrupt("return",a.toString(o.enc.Utf8));case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"encryptText",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){var a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.enc.Hex.parse(n),i=o.enc.Hex.parse(r||""),s=o.AES.encrypt(t,a,{iv:i,mode:o.mode.CBC,padding:o.pad.Pkcs7}),e.abrupt("return",s.toString());case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"generateRandomKey",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.lib.WordArray.random(t/8).toString());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"generateItemEncryptionKey",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=512,n=1,e.next=4,this.generateRandomKey(t);case 4:return r=e.sent,e.next=7,this.generateRandomKey(t);case 7:return a=e.sent,e.abrupt("return",this.pbkdf2(a,r,n,t));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"firstHalfOfKey",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.substring(0,t.length/2));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"secondHalfOfKey",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.substring(t.length/2,t.length));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"base64",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)})));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"base64Decode",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.atob(t));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"sha256",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.SHA256(t).toString());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"hmac256",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.enc.Hex.parse(n),a=o.enc.Utf8.parse(t),i=o.HmacSHA256(a,r).toString(),e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"generateSalt",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sha256([t,"SF",n,r,a].join(":"));case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"generateSymmetricKeyPair",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=s.password,c=s.pw_salt,l=s.pw_cost;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pbkdf2(u,c,l,this.DefaultPBKDF2Length);case 2:return t=e.sent,n=t.length,r=n/3,a=t.slice(0,r),i=t.slice(r,2*r),o=t.slice(2*r,3*r),e.abrupt("return",[a,i,o]);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"computeEncryptionKeysForUser",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("003"!=n.version){e.next=9;break}if(n.identifier){e.next=4;break}return console.error("authParams is missing identifier."),e.abrupt("return");case 4:return e.next=6,this.generateSalt(n.identifier,n.version,n.pw_cost,n.pw_nonce);case 6:r=e.sent,e.next=10;break;case 9:r=n.pw_salt;case 10:return e.abrupt("return",this.generateSymmetricKeyPair({password:t,pw_salt:r,pw_cost:n.pw_cost}).then(function(e){return{pw:e[0],mk:e[1],ak:e[2]}}));case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"generateInitialKeysAndAuthParamsForUser",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.SFJS.version,a=this.SFJS.defaultPasswordGenerationCost,e.next=4,this.generateRandomKey(256);case 4:return i=e.sent,e.next=7,this.generateSalt(t,r,a,i);case 7:return o=e.sent,e.abrupt("return",this.generateSymmetricKeyPair({password:n,pw_salt:o,pw_cost:a}).then(function(e){var n={pw_nonce:i,pw_cost:a,identifier:t,version:r};return{keys:{pw:e[0],mk:e[1],ak:e[2]},authParams:n}}));case 9:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),R=r.SFCryptoJS=function(e){function r(){return i(this,r),t(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,e),l(r,[{key:"pbkdf2",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={keySize:a/32,hasher:o.algo.SHA512,iterations:r},e.abrupt("return",o.PBKDF2(t,n,i).toString());case 2:case"end":return e.stop()}},e,this)}));return e}()}]),r}(T),d="undefined"!=typeof window?window:void 0!==e?e:null,D=d.crypto?d.crypto.subtle:null,O=r.SFCryptoWeb=function(e){function r(){return i(this,r),t(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,e),l(r,[{key:"pbkdf2",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webCryptoImportKey(t,"PBKDF2",["deriveBits"]);case 2:if(i=e.sent){e.next=6;break}return console.log("Key is null, unable to continue"),e.abrupt("return",null);case 6:return e.abrupt("return",this.webCryptoDeriveBits(i,n,r,a));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"generateRandomKey",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.abrupt("return",D.generateKey({name:"AES-CBC",length:t},n,["encrypt","decrypt"]).then(function(e){return D.exportKey("raw",e).then(function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.arrayBufferToHexString(new Uint8Array(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.error("Error exporting key",e)})}).catch(function(e){console.error("Error generating key",e)}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"generateItemEncryptionKey",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=256,e.abrupt("return",Promise.all([this.generateRandomKey(t),this.generateRandomKey(t)]).then(function(e){return e.join("")}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"encryptText",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){var i,o,s,u,c,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,this.hexStringToArrayBuffer(r);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=new ArrayBuffer(16);case 7:return i=e.t0,o={name:"AES-CBC",iv:i},e.next=11,this.hexStringToArrayBuffer(n);case 11:return s=e.sent,e.next=14,this.webCryptoImportKey(s,o.name,["encrypt"]);case 14:return u=e.sent,e.next=17,this.stringToArrayBuffer(t);case 17:return c=e.sent,e.abrupt("return",crypto.subtle.encrypt(o,u,c).then(function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.arrayBufferToBase64(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,l)}));return function(t){return e.apply(this,arguments)}}()));case 19:case"end":return e.stop()}},e,this)}));return e}()},{key:"decryptText",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,i,o,s,u=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=c.ciphertextToAuth,f=c.contentCiphertext,p=c.encryptionKey,d=c.iv,h=c.authHash,v=c.authKey,m=arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m||h){e.next=3;break}return console.error("Auth hash is required."),e.abrupt("return");case 3:if(!h){e.next=10;break}return e.next=6,this.hmac256(l,v);case 6:if(t=e.sent,h===t){e.next=10;break}return console.error("Auth hash does not match, returning null. "+h+" != "+t),e.abrupt("return",null);case 10:if(!d){e.next=16;break}return e.next=13,this.hexStringToArrayBuffer(d);case 13:e.t0=e.sent,e.next=17;break;case 16:e.t0=new ArrayBuffer(16);case 17:return n=e.t0,r={name:"AES-CBC",iv:n},e.next=21,this.hexStringToArrayBuffer(p);case 21:return i=e.sent,e.next=24,this.webCryptoImportKey(i,r.name,["decrypt"]);case 24:return o=e.sent,e.next=27,this.base64ToArrayBuffer(f);case 27:return s=e.sent,e.abrupt("return",crypto.subtle.decrypt(r,o,s).then(function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.arrayBufferToString(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,u)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.error("Error decrypting:",e)}));case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"webCryptoImportKey",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=6;break}return e.next=3,this.stringToArrayBuffer(t);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=t;case 7:return i=e.t0,e.abrupt("return",D.importKey("raw",i,{name:n,hash:a},!1,r).then(function(e){return e}).catch(function(e){return console.error(e),null}));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"webCryptoDeriveBits",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,i){var o,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stringToArrayBuffer(n);case 2:return e.t0=e.sent,e.t1=r,e.t2={name:"SHA-512"},o={name:"PBKDF2",salt:e.t0,iterations:e.t1,hash:e.t2},e.abrupt("return",D.deriveBits(o,t,i).then(function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.arrayBufferToHexString(new Uint8Array(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return console.error(e),null}));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"stringToArrayBuffer",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new Blob([t]),a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsArrayBuffer(r)}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"arrayBufferToString",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new Blob([t]),a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsText(r)}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"arrayBufferToHexString",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new Uint8Array(t),r="",i=0;i<n.byteLength;i++)a=n[i].toString(16),a.length<2&&(a="0"+a),r+=a;return e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"hexStringToArrayBuffer",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length;r+=2)n.push(parseInt(t.substr(r,2),16));return e.abrupt("return",new Uint8Array(n));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"base64ToArrayBuffer",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.base64Decode(t);case 2:for(n=e.sent,r=n.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=n.charCodeAt(i);return e.abrupt("return",a.buffer);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"arrayBufferToBase64",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new Blob([t],{type:"application/octet-binary"}),a=new FileReader;a.onload=function(t){var n=t.target.result;e(n.substr(n.indexOf(",")+1))},a.readAsDataURL(r)}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"hmac256",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r,i,o,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.hexStringToArrayBuffer(n);case 2:return r=e.sent,e.next=5,this.webCryptoImportKey(r,"HMAC",["sign"],{name:"SHA-256"});case 5:return i=e.sent,e.next=8,this.stringToArrayBuffer(t);case 8:return o=e.sent,e.abrupt("return",crypto.subtle.sign({name:"HMAC"},i,o).then(function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.arrayBufferToHexString(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.error("Error computing hmac",e)}));case 10:case"end":return e.stop()}},e,this)}));return e}()}]),r}(T),A=r.SFItemTransformer=function(){function e(t){i(this,e),this.crypto=t}return l(e,[{key:"_private_encryptString",value:function(){function e(e,n,r,a,i){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r,a,i){var o,s,u,c,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("001"!==i.version){e.next=7;break}return e.next=3,this.crypto.encryptText(t,n,null);case 3:s=e.sent,o=i.version+s,e.next=21;break;case 7:return e.next=9,this.crypto.generateRandomKey(128);case 9:return u=e.sent,e.next=12,this.crypto.encryptText(t,n,u);case 12:return s=e.sent,c=[i.version,a,u,s].join(":"),e.next=16,this.crypto.hmac256(c,r);case 16:return l=e.sent,e.next=19,this.crypto.base64(JSON.stringify(i));case 19:f=e.sent,o=[i.version,l,a,u,s,f].join(":");case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}},e,this)}));return e}()},{key:"encryptItem",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){var a,i,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,this.crypto.generateItemEncryptionKey();case 3:if(i=e.sent,"001"!==r.version){e.next=10;break}return e.next=7,this.crypto.encryptText(i,n.mk,null);case 7:a.enc_item_key=e.sent,e.next=13;break;case 10:return e.next=12,this._private_encryptString(i,n.mk,n.ak,t.uuid,r);case 12:a.enc_item_key=e.sent;case 13:return e.next=15,this.crypto.firstHalfOfKey(i);case 15:return o=e.sent,e.next=18,this.crypto.secondHalfOfKey(i);case 18:return s=e.sent,e.next=21,this._private_encryptString(JSON.stringify(t.createContentJSONFromProperties()),o,s,t.uuid,r);case 21:if(u=e.sent,"001"!==r.version){e.next=27;break}return e.next=25,this.crypto.hmac256(u,s);case 25:c=e.sent,a.auth_hash=c;case 27:return a.content=u,e.abrupt("return",a);case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"encryptionComponentsFromString",value:function(e,t,n){var r=e.substring(0,3);if("001"===r)return{contentCiphertext:e.substring(3,e.length),encryptionVersion:r,ciphertextToAuth:e,iv:null,authHash:null,encryptionKey:t,authKey:n};var a=e.split(":");return{encryptionVersion:a[0],authHash:a[1],uuid:a[2],iv:a[3],contentCiphertext:a[4],authParams:a[5],ciphertextToAuth:[a[0],a[2],a[3],a[4]].join(":"),encryptionKey:t,authKey:n}}},{key:"decryptItem",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t.content){e.next=2;break}return e.abrupt("return");case 2:if(!t.content.startsWith("000")){e.next=14;break}return e.prev=3,e.t0=JSON,e.next=7,this.crypto.base64Decode(t.content.substring(3,t.content.length));case 7:e.t1=e.sent,t.content=e.t0.parse.call(e.t0,e.t1),e.next=13;break;case 11:e.prev=11,e.t2=e.catch(3);case 13:return e.abrupt("return");case 14:if(t.enc_item_key){e.next=17;break}return console.log("Missing item encryption key, skipping decryption."),e.abrupt("return");case 17:if(r=t.enc_item_key,a=!0,r.startsWith("002")||r.startsWith("003")||(r="001"+r,a=!1),i=this.encryptionComponentsFromString(r,n.mk,n.ak),!i.uuid||i.uuid===t.uuid){e.next=26;break}return console.error("Item key params UUID does not match item UUID"),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 26:return e.next=28,this.crypto.decryptText(i,a);case 28:if(o=e.sent){e.next=34;break}return console.log("Error decrypting item",t),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 34:return e.next=36,this.crypto.firstHalfOfKey(o);case 36:return s=e.sent,e.next=39,this.crypto.secondHalfOfKey(o);case 39:return u=e.sent,c=this.encryptionComponentsFromString(t.content,s,u),e.prev=41,e.t3=JSON,e.next=45,this.crypto.base64Decode(c.authParams);case 45:e.t4=e.sent,t.auth_params=e.t3.parse.call(e.t3,e.t4),e.next=51;break;case 49:e.prev=49,e.t5=e.catch(41);case 51:if(!c.uuid||c.uuid===t.uuid){e.next=55;break}return t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 55:return c.authHash||(c.authHash=t.auth_hash),e.next=58,this.crypto.decryptText(c,!0);case 58:l=e.sent,l?(1==t.errorDecrypting&&(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!1,t.content=l):(t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0);case 60:case"end":return e.stop()}},e,this,[[3,11],[41,49]])}));return e}()},{key:"decryptMultipleItems",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){var i,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){var e=a(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(1!=t.deleted||null!=t.content){e.next=4;break}return e.abrupt("return");case 4:if(!(a="string"==typeof t.content||t.content instanceof String)){e.next=19;break}return e.prev=6,e.next=9,o.decryptItem(t,n);case 9:e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(6),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,!r){e.next=17;break}throw e.t0;case 17:return console.error("Error decrypting item",t,e.t0),e.abrupt("return");case 19:case"end":return e.stop()}},e,o,[[6,11]])}));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",Promise.all(t.map(function(e){return i(e)})));case 2:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),d="undefined"!=typeof window?window:void 0!==e?e:null,M=r.StandardFile=function(){function e(t){if(i(this,e),d){!("undefined"!=typeof document&&document.documentMode||/Edge/.test(navigator.userAgent))&&d.crypto&&d.crypto.subtle?this.crypto=new O:this.crypto=new R}t&&(this.crypto=t),this.itemTransformer=new A(this.crypto),this.crypto.SFJS={version:this.version(),defaultPasswordGenerationCost:this.defaultPasswordGenerationCost()}}return l(e,[{key:"version",value:function(){return"003"}},{key:"supportsPasswordDerivationCost",value:function(e){return!(e>5e3)||this.crypto instanceof O}},{key:"supportedVersions",value:function(){return["001","002","003"]}},{key:"isVersionNewerThanLibraryVersion",value:function(e){var t=this.version();return parseInt(e)>parseInt(t)}},{key:"isProtocolVersionOutdated",value:function(e){var t={"001":Date.parse("2018-01-01"),"002":Date.parse("2020-01-01")},n=t[e];return!!n&&new Date>n}},{key:"costMinimumForVersion",value:function(e){return{"001":3e3,"002":3e3,"003":11e4}[e]}},{key:"defaultPasswordGenerationCost",value:function(){return this.costMinimumForVersion(this.version())}}]),e}();if(d)try{d.StandardFile=M,d.SFJS=new M,d.SFCryptoWeb=O,d.SFCryptoJS=R,d.SFItemTransformer=A,d.SFModelManager=m,d.SFItem=x,d.SFItemParams=S,d.SFHttpManager=h,d.SFStorageManager=k,d.SFSyncManager=w,d.SFAuthManager=p,d.SFMigrationManager=v,d.SFAlertManager=f,d.SFPredicate=C,d.SFHistorySession=I,d.SFSessionHistoryManager=g,d.SFItemHistory=P,d.SFItemHistoryEntry=F,d.SFPrivilegesManager=y,d.SFPrivileges=E,d.SFSingletonManager=b}catch(e){console.log("Exception while exporting window variables",e)}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)})}).call(t,n(3))},function(e,t){!function(t){"use strict";function n(e,t,n,r){var i=t&&t.prototype instanceof a?t:a,o=Object.create(i.prototype),s=new d(r||[]);return o._invoke=c(e,n,s),o}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function i(){}function o(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(n,a,i,o){var s=r(e[n],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&g.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,o)},function(e){t("throw",e,i,o)}):Promise.resolve(c).then(function(e){u.value=e,i(u)},o)}o(s.arg)}function n(e,n){function r(){return new Promise(function(r,a){t(e,n,r,a)})}return a=a?a.then(r,r):r()}var a;this._invoke=n}function c(e,t,n){var a=_;return function(i,o){if(a===I)throw new Error("Generator is already running");if(a===P){if("throw"===i)throw o;return v()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===F)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===_)throw a=P,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=I;var c=r(e,t,n);if("normal"===c.type){if(a=n.done?P:E,c.arg===F)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=P,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=e.iterator[t.method];if(n===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,l(e,t),"throw"===t.method))return F;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return F}var a=r(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,F;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,F):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,F)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function h(e){if(e){var t=e[k];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:m,done:!0}}var m,y=Object.prototype,g=y.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},k=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",x=b.toStringTag||"@@toStringTag",S="object"==typeof e,C=t.regeneratorRuntime;if(C)return void(S&&(e.exports=C));C=t.regeneratorRuntime=S?e.exports:{},C.wrap=n;var _="suspendedStart",E="suspendedYield",I="executing",P="completed",F={},T={};T[k]=function(){return this};var R=Object.getPrototypeOf,D=R&&R(R(h([])));D&&D!==y&&g.call(D,k)&&(T=D);var O=o.prototype=a.prototype=Object.create(T);i.prototype=O.constructor=o,o.constructor=i,o[x]=i.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(O),e},C.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[w]=function(){return this},C.AsyncIterator=u,C.async=function(e,t,r,a){var i=new u(n(e,t,r,a));return C.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},s(O),O[x]="Generator",O[k]=function(){return this},O.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},C.values=h,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=m),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=g.call(a,"catchLoc"),s=g.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,F):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),F},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),F}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;p(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=m),F}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return p});var c=n(1),l=(n.n(c),n(5)),f=(n.n(l),n(0)),p=(n.n(f),function(){function e(t){i(this,e),this.componentManager=t,this.updateObservers=[],this.items=[]}return s(e,[{key:"getPlatform",value:function(){return this.componentManager.platform}},{key:"getEnvironment",value:function(){return this.componentManager.environment}},{key:"isMobile",value:function(){return"mobile"==this.getEnvironment()}},{key:"addEventHandler",value:function(e){var t={id:Math.random,callback:e};return this.updateObservers.push(t),t}},{key:"removeUpdateObserver",value:function(e){this.updateObservers.splice(this.updateObservers.indexOf(e),1)}},{key:"notifyObserversOfEvent",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.updateObservers[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value.callback(e)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"filterItems",value:function(e){return this.items.filter(function(t){return t.content_type==e})}},{key:"getFileDescriptors",value:function(){return this.filterItems(e.FileDescriptorContentTypeKey)}},{key:"beginStreamingFiles",value:function(){var t=this,n=[e.FileDescriptorContentTypeKey,e.FileSafeCredentialsContentType,e.FileSafeIntegrationContentTypeKey];this.componentManager.streamItems(n,function(e){t.handleStreamItemsMessage(e)})}},{key:"handleStreamItemsMessage",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r,a,i,o,s,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,a=!1,i=void 0,t.prev=3,o=n[Symbol.iterator]();case 5:if(r=(s=o.next()).done){t.next=18;break}if(u=s.value,u=new f.SFItem(u),!u.deleted){t.next=11;break}return this.removeItemFromItems(u),t.abrupt("continue",15);case 11:if(!u.isMetadataUpdate){t.next=13;break}return t.abrupt("continue",15);case 13:c=this.indexOfItem(u),c>=0?this.items[c]=u:this.items.push(u);case 15:r=!0,t.next=5;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(3),a=!0,i=t.t0;case 24:t.prev=24,t.prev=25,r||null==o.return||o.return();case 27:if(t.prev=27,!a){t.next=30;break}throw i;case 30:return t.finish(27);case 31:return t.finish(24);case 32:this.notifyObserversOfEvent(e.BridgeEventReceivedItems);case 33:case"end":return t.stop()}},t,this,[[3,20,24,32],[25,,27,31]])}));return t}()},{key:"indexOfItem",value:function(e){for(var t in this.items)if(this.items[t].uuid==e.uuid)return t;return-1}},{key:"removeItemFromItems",value:function(e){this.items=this.items.filter(function(t){return t.uuid!==e.uuid})}},{key:"createItem",value:function(e,t){this.createItems([e],t)}},{key:"createItems",value:function(e,t){this.componentManager.createItems(e,function(e){t&&t(e.map(function(e){return new f.SFItem(e)}))})}},{key:"saveItem",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveItems([t]));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"saveItems",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,a){r.componentManager.saveItems(n,function(n){t(n),r.notifyObserversOfEvent(e.BridgeEventSavedItem)})}));case 1:case"end":return t.stop()}},t)}));return t}()},{key:"indexOfItem",value:function(e){for(var t in this.items)if(this.items[t].uuid==e.uuid)return t;return-1}},{key:"deleteItem",value:function(e,t){this.deleteItems([e],t)}},{key:"deleteItems",value:function(e,t){this.componentManager.deleteItems(e,t)}},{key:"removeItemFromItems",value:function(e){this.items=this.items.filter(function(t){return t.uuid!==e.uuid})}}]),e}());u(p,"FileItemContentTypeKey","SN|FileSafe|File"),u(p,"FileSafeCredentialsContentType","SN|FileSafe|Credentials"),u(p,"FileDescriptorContentTypeKey","SN|FileSafe|FileMetadata"),u(p,"FileSafeIntegrationContentTypeKey","SN|FileSafe|Integration"),u(p,"BridgeEventLoadedCredentials","BridgeEventLoadedCredentials"),u(p,"BridgeEventReceivedItems","BridgeEventReceivedItems"),u(p,"BridgeEventSavedItem","BridgeEventSavedItem")},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return v});var u=n(2),c=n(7),l=n(8),f=n(9),p=n(10),d=n(12),h=n(0),v=(n.n(h),function(){function e(t){var n=this,r=t.componentManager;i(this,e),this.dataChangeObservers=[],this.newFileDescriptorHandlers=[],this.extensionBridge=new u.a(r),this.extensionBridge.addEventHandler(function(e){n.notifyObservers()}),this.relayManager=new c.a,this.integrationManager=new l.a(this.extensionBridge),this.credentialManager=new f.a({extensionBridge:this.extensionBridge,onCredentialLoad:function(){n.relayManager.setCredentials(n.credentialManager.getDefaultCredentials())}}),this.fileManager=new p.a(this.extensionBridge,this.relayManager,this.integrationManager,this.credentialManager),this.extensionBridge.beginStreamingFiles()}return s(e,null,[{key:"getSFItemClass",value:function(){return h.SFItem}}]),s(e,[{key:"addNewFileDescriptorHandler",value:function(e){this.newFileDescriptorHandlers.push(e)}},{key:"notifyObservers",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.dataChangeObservers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"addDataChangeObserver",value:function(e){return this.dataChangeObservers.push(e),e}},{key:"removeDataChangeObserver",value:function(e){this.dataChangeObservers=this.dataChangeObservers.filter(function(t){return t!=e})}},{key:"setCurrentNote",value:function(e){this.currentNote=e,this.notifyObservers()}},{key:"getAllFileDescriptors",value:function(){return this.fileManager.getAllFileDescriptors()}},{key:"findFileDescriptor",value:function(e){return this.fileManager.findFileDescriptor(e)}},{key:"fileDescriptorsForCurrentNote",value:function(){return this.fileManager.fileDescriptorsForNote(this.currentNote)}},{key:"fileDescriptorsForNote",value:function(e){return this.fileManager.fileDescriptorsForNote(e)}},{key:"fileDescriptorsEncryptedWithCredential",value:function(e){return this.fileManager.fileDescriptorsEncryptedWithCredential(e)}},{key:"deleteFileFromDescriptor",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fileManager.deleteFileFromDescriptor(t));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"uploadFile",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,u,c,l,f,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileItem,r=t.inputFileName,a=t.fileType,i=t.credential,o=t.note,o||(o=this.currentNote),e.next=4,this.fileManager.uploadFile({fileItem:n,inputFileName:r,fileType:a,credential:i,note:o});case 4:if(!(s=e.sent)){e.next=25;break}for(u=!0,c=!1,l=void 0,e.prev=9,f=this.newFileDescriptorHandlers[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)(d=p.value)(s);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),c=!0,l=e.t0;case 17:e.prev=17,e.prev=18,u||null==f.return||f.return();case 20:if(e.prev=20,!c){e.next=23;break}throw l;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",s);case 26:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}));return e}()},{key:"encryptAndUploadJavaScriptFileObject",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var i=new FileReader;i.onload=function(){var r=a(regeneratorRuntime.mark(function r(a){var i,o,s,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=a.target.result,o=i,r.next=4,SFJS.crypto.arrayBufferToBase64(o);case 4:return s=r.sent,r.next=7,n.encryptAndUploadData({base64Data:s,inputFileName:t.name,fileType:t.type});case 7:u=r.sent,e(u);case 9:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}(),i.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e)}));return e}()},{key:"encryptAndUploadData",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,i,o,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.base64Data,r=t.inputFileName,i=t.fileType,o=this.getDefaultCredentials(),e.abrupt("return",this.encryptFile({data:n,inputFileName:r,fileType:i,credential:o}).then(function(){var e=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.uploadFile({fileItem:t,inputFileName:r,fileType:i,credential:o}).catch(function(e){console.error("filesafe-js | error uploading file:",e)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"downloadFileFromDescriptor",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fileManager.downloadFileFromDescriptor(t));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"encryptFile",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r=t.inputFileName,a=t.fileType,i=t.credential,e.abrupt("return",this.fileManager.encryptFile({data:n,inputFileName:r,fileType:a,credential:i}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"decryptFile",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileDescriptor,r=t.fileItem,a=t.credential,e.abrupt("return",this.fileManager.decryptFile({fileDescriptor:n,fileItem:r,credential:a}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"downloadBase64Data",value:function(e){var t=e.base64Data,n=e.fileName,r=e.fileType;d.a.downloadData(d.a.base64toBinary(t),n,r)}},{key:"createTemporaryFileUrl",value:function(e){var t=e.base64Data,n=e.dataType;return d.a.tempUrlForData(d.a.base64toBinary(t),n)}},{key:"revokeTempUrl",value:function(e){d.a.revokeTempUrl(e)}},{key:"createNewCredentials",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.credentialManager.createNewCredentials());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"numberOfFilesEncryptedWithCredential",value:function(e){return this.fileManager.fileDescriptorsEncryptedWithCredential(e).length}},{key:"credentialForFileDescriptor",value:function(e){return this.credentialManager.credentialForFileDescriptor(e)}},{key:"getAllCredentials",value:function(){return this.credentialManager.getAllCredentials()}},{key:"getDefaultCredentials",value:function(){return this.credentialManager.getDefaultCredentials()}},{key:"setCredentialAsDefault",value:function(e){return this.credentialManager.setCredentialAsDefault(e)}},{key:"deleteCredential",value:function(e){return this.credentialManager.deleteCredential(e)}},{key:"saveCredential",value:function(e){return this.credentialManager.saveCredential(e)}},{key:"getAllIntegrations",value:function(){return this.integrationManager.integrations}},{key:"integrationForFileDescriptor",value:function(e){return this.integrationManager.integrationForFileDescriptor(e)}},{key:"saveIntegrationFromCode",value:function(e){return this.integrationManager.saveIntegrationFromCode(e)}},{key:"getDefaultIntegration",value:function(){return this.integrationManager.getDefaultIntegration()}},{key:"setIntegrationAsDefault",value:function(e){return this.integrationManager.setIntegrationAsDefault(e)}},{key:"deleteIntegration",value:function(e){return this.integrationManager.deleteIntegration(e)}},{key:"displayStringForIntegration",value:function(e){return this.integrationManager.displayStringForIntegration(e)}},{key:"base64toBinary",value:function(e){return d.a.base64toBinary(e)}},{key:"isMobile",value:function(){return this.extensionBridge.isMobile()}},{key:"getEnvironment",value:function(){return this.extensionBridge.getEnvironment()}},{key:"getPlatform",value:function(){return this.extensionBridge.getPlatform()}},{key:"copyTextToClipboard",value:function(e){return d.a.copyTextToClipboard(e)}}]),e}())},function(e,t,n){(function(e,r){var a;(function(){function i(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function u(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}function c(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}function l(e,t){return!(null==e||!e.length)&&-1<m(e,t,0)}function f(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function p(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function d(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)n=t(n,e[r],r,e);return n}function h(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function v(e,t,n){var r=e.length;for(n+=-1;++n<r;)if(t(e[n],n,e))return n;return-1}function m(e,t,n){if(t===t)e:{--n;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=v(e,y,n);return e}function y(e){return e!==e}function g(e){return function(t){return null==t?pt:t[e]}}function b(e,t){return f(t,function(t){return e[t]})}function k(e,t){return e.has(t)}function w(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function x(e){var t=Object;return function(n){return e(t(n))}}function S(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function C(){}function _(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function P(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new I;++t<n;)this.add(e[t])}function F(e){this.size=(this.__data__=new E(e)).size}function T(e,t){var n=Hn(e),r=!n&&Bn(e),a=!n&&!r&&Un(e),i=!n&&!r&&!a&&zn(e);if(n=n||r||a||i){for(var r=e.length,o=String,s=-1,u=Array(r);++s<r;)u[s]=o(s);r=u}else r=[];var c,o=r.length;for(c in e)!t&&!Kt.call(e,c)||n&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ie(c,o))||r.push(c);return r}function R(e,t,n){(n===pt||Be(e[t],n))&&(n!==pt||t in e)||N(e,t,n)}function D(e,t,n){var r=e[t];Kt.call(e,t)&&Be(r,n)&&(n!==pt||t in e)||N(e,t,n)}function O(e,t){for(var n=e.length;n--;)if(Be(e[n][0],t))return n;return-1}function A(e,t){return e&&ce(t,nt(t),e)}function M(e,t){return e&&ce(t,rt(t),e)}function N(e,t,n){"__proto__"==t&&an?an(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function L(e,t,n,r,a,i){var o,s=1&t,c=2&t,l=4&t;if(n&&(o=a?n(e,r,a,i):n(e)),o!==pt)return o;if(!We(e))return e;if(r=Hn(e)){if(o=Se(e),!s)return ue(e,o)}else{var f=An(e),p="[object Function]"==f||"[object GeneratorFunction]"==f;if(Un(e))return ie(e,s);if("[object Object]"==f||"[object Arguments]"==f||p&&!a){if(o=c||p?{}:Ce(e),!s)return c?fe(e,M(o,e)):le(e,A(o,e))}else{if(!Pt[f])return a?e:{};o=_e(e,f,L,s)}}if(i||(i=new F),a=i.get(e))return a;i.set(e,o);var c=l?c?ge:ye:c?rt:nt,d=r?pt:c(e);return u(d||e,function(r,a){d&&(a=r,r=e[a]),D(o,a,L(r,t,n,a,e,i))}),o}function j(e,t){var n=[];return Pn(e,function(e,r,a){t(e,r,a)&&n.push(e)}),n}function B(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=Ee),a||(a=[]);++i<o;){var s=e[i];0<t&&n(s)?1<t?B(s,t-1,n,r,a):p(a,s):r||(a[a.length]=s)}return a}function H(e,t){t=ae(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[De(t[n++])];return n&&n==r?e:pt}function U(e,t,n){return t=t(e),Hn(e)?t:p(t,n(e))}function z(e){if(null==e)e=e===pt?"[object Undefined]":"[object Null]";else if(rn&&rn in Object(e)){var t=Kt.call(e,rn),n=e[rn];try{e[rn]=pt;var r=!0}catch(e){}var a=Vt.call(e);r&&(t?e[rn]=n:delete e[rn]),e=a}else e=Vt.call(e);return e}function K(e){return Ve(e)&&"[object Arguments]"==z(e)}function W(e,t,n,r,a){if(e===t)t=!0;else if(null==e||null==t||!Ve(e)&&!Ve(t))t=e!==e&&t!==t;else e:{var i=Hn(e),o=Hn(t),s=i?"[object Array]":An(e),u=o?"[object Array]":An(t),s="[object Arguments]"==s?"[object Object]":s,u="[object Arguments]"==u?"[object Object]":u,c="[object Object]"==s,o="[object Object]"==u;if((u=s==u)&&Un(e)){if(!Un(t)){t=!1;break e}i=!0,c=!1}if(u&&!c)a||(a=new F),t=i||zn(e)?he(e,t,n,r,W,a):ve(e,t,s,n,r,W,a);else{if(!(1&n)&&(i=c&&Kt.call(e,"__wrapped__"),s=o&&Kt.call(t,"__wrapped__"),i||s)){e=i?e.value():e,t=s?t.value():t,a||(a=new F),t=W(e,t,n,r,a);break e}if(u)t:if(a||(a=new F),i=1&n,s=ye(e),o=s.length,u=ye(t).length,o==u||i){for(c=o;c--;){var l=s[c];if(!(i?l in t:Kt.call(t,l))){t=!1;break t}}if((u=a.get(e))&&a.get(t))t=u==t;else{u=!0,a.set(e,t),a.set(t,e);for(var f=i;++c<o;){var l=s[c],p=e[l],d=t[l];if(r)var h=i?r(d,p,l,t,e,a):r(p,d,l,e,t,a);if(h===pt?p!==d&&!W(p,d,n,r,a):!h){u=!1;break}f||(f="constructor"==l)}u&&!f&&(n=e.constructor,r=t.constructor,n!=r&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(u=!1)),a.delete(e),a.delete(t),t=u}}else t=!1;else t=!1}}return t}function V(e,t){var n=t.length,r=n;if(null==e)return!r;for(e=Object(e);n--;){var a=t[n];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++n<r;){var a=t[n],i=a[0],o=e[i],s=a[1];if(a[2]){if(o===pt&&!(i in e))return!1}else if(a=new F,void 0===pt?!W(s,o,3,void 0,a):1)return!1}return!0}function q(e){return Ve(e)&&Ke(e.length)&&!!It[z(e)]}function $(e){return"function"==typeof e?e:null==e?ot:"object"==typeof e?Hn(e)?Q(e[0],e[1]):G(e):ct(e)}function J(e,t){var n=-1,r=He(e)?Array(e.length):[];return Pn(e,function(e,a,i){r[++n]=t(e,a,i)}),r}function G(e){var t=we(e);return 1==t.length&&t[0][2]?Te(t[0][0],t[0][1]):function(n){return n===e||V(n,t)}}function Q(e,t){return Pe(e)&&t===t&&!We(t)?Te(De(e),t):function(n){var r=et(n,e);return r===pt&&r===t?tt(n,e):W(t,r,3)}}function Y(e,t,n,r,a){e!==t&&Fn(t,function(i,o){if(We(i)){a||(a=new F);var s=a,u=e[o],c=t[o],l=s.get(c);if(l)R(e,o,l);else{var l=r?r(u,c,o+"",e,t,s):pt,f=l===pt;if(f){var p=Hn(c),d=!p&&Un(c),h=!p&&!d&&zn(c),l=c;p||d||h?Hn(u)?l=u:Ue(u)?l=ue(u):d?(f=!1,l=ie(c,!0)):h?(f=!1,l=se(c,!0)):l=[]:qe(c)||Bn(c)?(l=u,Bn(u)?l=Xe(u):(!We(u)||n&&ze(u))&&(l=Ce(c))):f=!1}f&&(s.set(c,l),Y(l,c,n,r,s),s.delete(c)),R(e,o,l)}}else s=r?r(e[o],i,o+"",e,t,a):pt,s===pt&&(s=i),R(e,o,s)},rt)}function X(e,t){return Z(e,t,function(t,n){return tt(e,n)})}function Z(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],s=H(e,o);if(n(s,o)){var u=i,o=ae(o,e);if(We(u))for(var o=ae(o,u),c=-1,l=o.length,f=l-1;null!=u&&++c<l;){var p=De(o[c]),d=s;if(c!=f){var h=u[p],d=pt;d===pt&&(d=We(h)?h:Ie(o[c+1])?[]:{})}D(u,p,d),u=u[p]}}}return i}function ee(e){return function(t){return H(t,e)}}function te(e){return Mn(Re(e,void 0,ot),e+"")}function ne(e){if("string"==typeof e)return e;if(Hn(e))return f(e,ne)+"";if(Je(e))return En?En.call(e):"";var t=e+"";return"0"==t&&1/e==-dt?"-0":t}function re(e,t){t=ae(t,e);var n;if(2>t.length)n=e;else{n=t;var r=0,a=-1,i=-1,o=n.length;for(0>r&&(r=-r>o?0:o+r),a=a>o?o:a,0>a&&(a+=o),o=r>a?0:a-r>>>0,r>>>=0,a=Array(o);++i<o;)a[i]=n[i+r];n=H(e,a)}null==(e=n)||delete e[De(Ne(t))]}function ae(e,t){return Hn(e)?e:Pe(e,t)?[e]:Nn(Ze(e))}function ie(e,t){if(t)return e.slice();var n=e.length,n=Yt?Yt(n):new e.constructor(n);return e.copy(n),n}function oe(e){var t=new e.constructor(e.byteLength);return new Qt(t).set(new Qt(e)),t}function se(e,t){return new e.constructor(t?oe(e.buffer):e.buffer,e.byteOffset,e.length)}function ue(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function ce(e,t,n){var r=!n;n||(n={});for(var a=-1,i=t.length;++a<i;){var o=t[a],s=pt;s===pt&&(s=e[o]),r?N(n,o,s):D(n,o,s)}return n}function le(e,t){return ce(e,Dn(e),t)}function fe(e,t){return ce(e,On(e),t)}function pe(e){return te(function(t,n){var r,a=-1,i=n.length,o=1<i?n[i-1]:pt,s=2<i?n[2]:pt,o=3<e.length&&"function"==typeof o?(i--,o):pt;if(r=s){r=n[0];var u=n[1];if(We(s)){var c=typeof u;r=!!("number"==c?He(s)&&Ie(u,s.length):"string"==c&&u in s)&&Be(s[u],r)}else r=!1}for(r&&(o=3>i?pt:o,i=1),t=Object(t);++a<i;)(s=n[a])&&e(t,s,a,o);return t})}function de(e){return qe(e)?pt:e}function he(e,t,n,r,a,i){var o=1&n,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;if((u=i.get(e))&&i.get(t))return u==t;var u=-1,c=!0,l=2&n?new P:pt;for(i.set(e,t),i.set(t,e);++u<s;){var f=e[u],p=t[u];if(r)var d=o?r(p,f,u,t,e,i):r(f,p,u,e,t,i);if(d!==pt){if(d)continue;c=!1;break}if(l){if(!h(t,function(e,t){if(!k(l,t)&&(f===e||a(f,e,n,r,i)))return l.push(t)})){c=!1;break}}else if(f!==p&&!a(f,p,n,r,i)){c=!1;break}}return i.delete(e),i.delete(t),c}function ve(e,t,n,r,a,i,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!i(new Qt(e),new Qt(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Be(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=w;case"[object Set]":if(s||(s=S),e.size!=t.size&&!(1&r))break;return(n=o.get(e))?n==t:(r|=2,o.set(e,t),t=he(s(e),s(t),r,a,i,o),o.delete(e),t);case"[object Symbol]":if(_n)return _n.call(e)==_n.call(t)}return!1}function me(e){return Mn(Re(e,pt,Me),e+"")}function ye(e){return U(e,nt,Dn)}function ge(e){return U(e,rt,On)}function be(){var e=C.iteratee||st,e=e===st?$:e;return arguments.length?e(arguments[0],arguments[1]):e}function ke(e,t){var n=e.__data__,r=typeof t;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function we(e){for(var t=nt(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,a===a&&!We(a)]}return t}function xe(e,t){var n=null==e?pt:e[t];return(!We(n)||Wt&&Wt in n?0:(ze(n)?$t:Ct).test(Oe(n)))?n:pt}function Se(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Kt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Ce(e){return"function"!=typeof e.constructor||Fe(e)?{}:In(Xt(e))}function _e(e,t,n,r){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return oe(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return t=r?oe(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return se(e,r);case"[object Map]":return t=r?n(w(e),1):w(e),d(t,i,new e.constructor);case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return t=new e.constructor(e.source,wt.exec(e)),t.lastIndex=e.lastIndex,t;case"[object Set]":return t=r?n(S(e),1):S(e),d(t,o,new e.constructor);case"[object Symbol]":return _n?Object(_n.call(e)):{}}}function Ee(e){return Hn(e)||Bn(e)||!!(nn&&e&&e[nn])}function Ie(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Et.test(e))&&-1<e&&0==e%1&&e<t}function Pe(e,t){if(Hn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Je(e))||mt.test(e)||!vt.test(e)||null!=t&&e in Object(t)}function Fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ht)}function Te(e,t){return function(n){return null!=n&&n[e]===t&&(t!==pt||e in Object(n))}}function Re(e,t,n){return t=ln(t===pt?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=ln(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];for(a=-1,i=Array(t+1);++a<t;)i[a]=r[a];return i[t]=n(o),s(e,this,i)}}function De(e){if("string"==typeof e||Je(e))return e;var t=e+"";return"0"==t&&1/e==-dt?"-0":t}function Oe(e){if(null!=e){try{return zt.call(e)}catch(e){}return e+""}return""}function Ae(e,t,n){var r=null==e?0:e.length;return r?(n=null==n?0:Qe(n),0>n&&(n=ln(r+n,0)),v(e,be(t,3),n)):-1}function Me(e){return(null==e?0:e.length)?B(e,1):[]}function Ne(e){var t=null==e?0:e.length;return t?e[t-1]:pt}function Le(e,t){var n;if(e&&e.length&&t&&t.length){n=t;var r=m,a=-1,i=n.length;for(e===n&&(n=ue(n));++a<i;)for(var o=0,s=n[a];-1<(o=r(e,s,o,void 0));)e!==e&&tn.call(e,o,1),tn.call(e,o,1);n=e}else n=e;return n}function je(e,t){function n(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;return i.has(a)?i.get(a):(r=e.apply(this,r),n.cache=i.set(a,r)||i,r)}if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");return n.cache=new(je.Cache||I),n}function Be(e,t){return e===t||e!==e&&t!==t}function He(e){return null!=e&&Ke(e.length)&&!ze(e)}function Ue(e){return Ve(e)&&He(e)}function ze(e){return!!We(e)&&("[object Function]"==(e=z(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Ke(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function We(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ve(e){return null!=e&&"object"==typeof e}function qe(e){return!(!Ve(e)||"[object Object]"!=z(e))&&(null===(e=Xt(e))||"function"==typeof(e=Kt.call(e,"constructor")&&e.constructor)&&e instanceof e&&zt.call(e)==qt)}function $e(e){return"string"==typeof e||!Hn(e)&&Ve(e)&&"[object String]"==z(e)}function Je(e){return"symbol"==typeof e||Ve(e)&&"[object Symbol]"==z(e)}function Ge(e){return e?(e=Ye(e),e===dt||e===-dt?1.7976931348623157e308*(0>e?-1:1):e===e?e:0):0===e?e:0}function Qe(e){e=Ge(e);var t=e%1;return e===e?t?e-t:e:0}function Ye(e){if("number"==typeof e)return e;if(Je(e))return ht;if(We(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=We(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(bt,"");var t=St.test(e);return t||_t.test(e)?Tt(e.slice(2),t?2:8):xt.test(e)?ht:+e}function Xe(e){return ce(e,rt(e))}function Ze(e){return null==e?"":ne(e)}function et(e,t,n){return e=null==e?pt:H(e,t),e===pt?n:e}function tt(e,t){var n;if(n=null!=e){n=e;var r;r=ae(t,n);for(var a=-1,i=r.length,o=!1;++a<i;){var s=De(r[a]);if(!(o=null!=n&&null!=n&&s in Object(n)))break;n=n[s]}o||++a!=i?n=o:(i=null==n?0:n.length,n=!!i&&Ke(i)&&Ie(s,i)&&(Hn(n)||Bn(n)))}return n}function nt(e){if(He(e))e=T(e);else if(Fe(e)){var t,n=[];for(t in Object(e))Kt.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=cn(e);return e}function rt(e){if(He(e))e=T(e,!0);else if(We(e)){var t,n=Fe(e),r=[];for(t in e)("constructor"!=t||!n&&Kt.call(e,t))&&r.push(t);e=r}else{if(t=[],null!=e)for(n in Object(e))t.push(n);e=t}return e}function at(e){return null==e?[]:b(e,nt(e))}function it(e){return function(){return e}}function ot(e){return e}function st(e){return $("function"==typeof e?e:L(e,1))}function ut(){}function ct(e){return Pe(e)?g(De(e)):ee(e)}function lt(){return[]}function ft(){return!1}var pt,dt=1/0,ht=NaN,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mt=/^\w*$/,yt=/^\./,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bt=/^\s+|\s+$/g,kt=/\\(\\)?/g,wt=/\w*$/,xt=/^[-+]0x[0-9a-f]+$/i,St=/^0b[01]+$/i,Ct=/^\[object .+?Constructor\]$/,_t=/^0o[0-7]+$/i,Et=/^(?:0|[1-9]\d*)$/,It={};It["[object Float32Array]"]=It["[object Float64Array]"]=It["[object Int8Array]"]=It["[object Int16Array]"]=It["[object Int32Array]"]=It["[object Uint8Array]"]=It["[object Uint8ClampedArray]"]=It["[object Uint16Array]"]=It["[object Uint32Array]"]=!0,It["[object Arguments]"]=It["[object Array]"]=It["[object ArrayBuffer]"]=It["[object Boolean]"]=It["[object DataView]"]=It["[object Date]"]=It["[object Error]"]=It["[object Function]"]=It["[object Map]"]=It["[object Number]"]=It["[object Object]"]=It["[object RegExp]"]=It["[object Set]"]=It["[object String]"]=It["[object WeakMap]"]=!1;var Pt={};Pt["[object Arguments]"]=Pt["[object Array]"]=Pt["[object ArrayBuffer]"]=Pt["[object DataView]"]=Pt["[object Boolean]"]=Pt["[object Date]"]=Pt["[object Float32Array]"]=Pt["[object Float64Array]"]=Pt["[object Int8Array]"]=Pt["[object Int16Array]"]=Pt["[object Int32Array]"]=Pt["[object Map]"]=Pt["[object Number]"]=Pt["[object Object]"]=Pt["[object RegExp]"]=Pt["[object Set]"]=Pt["[object String]"]=Pt["[object Symbol]"]=Pt["[object Uint8Array]"]=Pt["[object Uint8ClampedArray]"]=Pt["[object Uint16Array]"]=Pt["[object Uint32Array]"]=!0,Pt["[object Error]"]=Pt["[object Function]"]=Pt["[object WeakMap]"]=!1;var Ft,Tt=parseInt,Rt="object"==typeof e&&e&&e.Object===Object&&e,Dt="object"==typeof self&&self&&self.Object===Object&&self,Ot=Rt||Dt||Function("return this")(),At="object"==typeof t&&t&&!t.nodeType&&t,Mt=At&&"object"==typeof r&&r&&!r.nodeType&&r,Nt=Mt&&Mt.exports===At,Lt=Nt&&Rt.process;e:{try{Ft=Lt&&Lt.binding&&Lt.binding("util");break e}catch(i){}Ft=void 0}var jt=Ft&&Ft.isTypedArray,Bt=Array.prototype,Ht=Object.prototype,Ut=Ot["__core-js_shared__"],zt=Function.prototype.toString,Kt=Ht.hasOwnProperty,Wt=function(){var e=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Vt=Ht.toString,qt=zt.call(Object),$t=RegExp("^"+zt.call(Kt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jt=Nt?Ot.Buffer:pt,Gt=Ot.Symbol,Qt=Ot.Uint8Array,Yt=Jt?Jt.a:pt,Xt=x(Object.getPrototypeOf),Zt=Object.create,en=Ht.propertyIsEnumerable,tn=Bt.splice,nn=Gt?Gt.isConcatSpreadable:pt,rn=Gt?Gt.toStringTag:pt,an=function(){try{var e=xe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),on=Math.floor,sn=Object.getOwnPropertySymbols,un=Jt?Jt.isBuffer:pt,cn=x(Object.keys),ln=Math.max,fn=Math.min,pn=Date.now,dn=xe(Ot,"DataView"),hn=xe(Ot,"Map"),vn=xe(Ot,"Promise"),mn=xe(Ot,"Set"),yn=xe(Ot,"WeakMap"),gn=xe(Object,"create"),bn=Oe(dn),kn=Oe(hn),wn=Oe(vn),xn=Oe(mn),Sn=Oe(yn),Cn=Gt?Gt.prototype:pt,_n=Cn?Cn.valueOf:pt,En=Cn?Cn.toString:pt,In=function(){function e(){}return function(t){return We(t)?Zt?Zt(t):(e.prototype=t,t=new e,e.prototype=pt,t):{}}}();_.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},_.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},_.prototype.get=function(e){var t=this.__data__;return gn?(e=t[e],"__lodash_hash_undefined__"===e?pt:e):Kt.call(t,e)?t[e]:pt},_.prototype.has=function(e){var t=this.__data__;return gn?t[e]!==pt:Kt.call(t,e)},_.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&t===pt?"__lodash_hash_undefined__":t,this},E.prototype.clear=function(){this.__data__=[],this.size=0},E.prototype.delete=function(e){var t=this.__data__;return!(0>(e=O(t,e))||(e==t.length-1?t.pop():tn.call(t,e,1),--this.size,0))},E.prototype.get=function(e){var t=this.__data__;return e=O(t,e),0>e?pt:t[e][1]},E.prototype.has=function(e){return-1<O(this.__data__,e)},E.prototype.set=function(e,t){var n=this.__data__,r=O(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this},I.prototype.clear=function(){this.size=0,this.__data__={hash:new _,map:new(hn||E),string:new _}},I.prototype.delete=function(e){return e=ke(this,e).delete(e),this.size-=e?1:0,e},I.prototype.get=function(e){return ke(this,e).get(e)},I.prototype.has=function(e){return ke(this,e).has(e)},I.prototype.set=function(e,t){var n=ke(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},P.prototype.add=P.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},P.prototype.has=function(e){return this.__data__.has(e)},F.prototype.clear=function(){this.__data__=new E,this.size=0},F.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},F.prototype.get=function(e){return this.__data__.get(e)},F.prototype.has=function(e){return this.__data__.has(e)},F.prototype.set=function(e,t){var n=this.__data__;if(n instanceof E){var r=n.__data__;if(!hn||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new I(r)}return n.set(e,t),this.size=n.size,this};var Pn=function(e,t){return function(t,n){if(null==t)return t;if(!He(t))return e(t,n);for(var r=t.length,a=-1,i=Object(t);++a<r&&!1!==n(i[a],a,i););return t}}(function(e,t){return e&&Fn(e,t,nt)}),Fn=function(e){return function(e,t,n){var r=-1,a=Object(e);n=n(e);for(var i=n.length;i--;){var o=n[++r];if(!1===t(a[o],o,a))break}return e}}(),Tn=an?function(e,t){return an(e,"toString",{configurable:!0,enumerable:!1,value:it(t),writable:!0})}:ot,Rn=mn&&1/S(new mn([,-0]))[1]==dt?function(e){return new mn(e)}:ut,Dn=sn?function(e){return null==e?[]:(e=Object(e),c(sn(e),function(t){return en.call(e,t)}))}:lt,On=sn?function(e){for(var t=[];e;)p(t,Dn(e)),e=Xt(e);return t}:lt,An=z;(dn&&"[object DataView]"!=An(new dn(new ArrayBuffer(1)))||hn&&"[object Map]"!=An(new hn)||vn&&"[object Promise]"!=An(vn.resolve())||mn&&"[object Set]"!=An(new mn)||yn&&"[object WeakMap]"!=An(new yn))&&(An=function(e){var t=z(e);if(e=(e="[object Object]"==t?e.constructor:pt)?Oe(e):"")switch(e){case bn:return"[object DataView]";case kn:return"[object Map]";case wn:return"[object Promise]";case xn:return"[object Set]";case Sn:return"[object WeakMap]"}return t});var Mn=function(e){var t=0,n=0;return function(){var r=pn(),a=16-(r-n);if(n=r,0<a){if(800<=++t)return arguments[0]}else t=0;return e.apply(pt,arguments)}}(Tn),Nn=function(e){e=je(e,function(e){return 500===t.size&&t.clear(),e});var t=e.cache;return e}(function(e){var t=[];return yt.test(e)&&t.push(""),e.replace(gt,function(e,n,r,a){t.push(r?a.replace(kt,"$1"):n||e)}),t}),Ln=te(Le),jn=function(e){return function(t,n,r){var a=Object(t);if(!He(t)){var i=be(n,3);t=nt(t),n=function(e){return i(a[e],e,a)}}return n=e(t,n,r),-1<n?a[i?t[n]:n]:pt}}(Ae);je.Cache=I;var Bn=K(function(){return arguments}())?K:function(e){return Ve(e)&&Kt.call(e,"callee")&&!en.call(e,"callee")},Hn=Array.isArray,Un=un||ft,zn=jt?function(e){return function(t){return e(t)}}(jt):q,Kn=pe(function(e,t,n){Y(e,t,n)}),Wn=pe(function(e,t,n,r){Y(e,t,n,r)}),Vn=me(function(e,t){var n={};if(null==e)return n;var r=!1;t=f(t,function(t){return t=ae(t,e),r||(r=1<t.length),t}),ce(e,ge(e),n),r&&(n=L(n,7,de));for(var a=t.length;a--;)re(n,t[a]);return n}),qn=me(function(e,t){return null==e?{}:X(e,t)});C.constant=it,C.filter=function(e,t){return(Hn(e)?c:j)(e,be(t,3))},C.flatten=Me,C.iteratee=st,C.keys=nt,C.keysIn=rt,C.map=function(e,t){return(Hn(e)?f:J)(e,be(t,3))},C.memoize=je,C.merge=Kn,C.mergeWith=Wn,C.omit=Vn,C.pick=qn,C.property=ct,C.pull=Ln,C.pullAll=Le,C.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],i=e.length;for(t=be(t,3);++r<i;){var o=e[r];t(o,r,e)&&(n.push(o),a.push(r))}for(r=e?a.length:0,i=r-1;r--;)if(o=a[r],r==i||o!==s){var s=o;Ie(o)?tn.call(e,o,1):re(e,o)}return n},C.toPlainObject=Xe,C.uniq=function(e){if(e&&e.length)e:{var t=-1,n=l,r=e.length,a=!0,i=[],o=i;if(200<=r){if(n=Rn(e)){e=S(n);break e}a=!1,n=k,o=new P}else o=i;t:for(;++t<r;){var s=e[t],u=s,s=0!==s?s:0;if(a&&u===u){for(var c=o.length;c--;)if(o[c]===u)continue t;i.push(s)}else n(o,u,void 0)||(o!==i&&o.push(u),i.push(s))}e=i}else e=[];return e},C.values=at,C.cloneDeep=function(e){return L(e,5)},C.eq=Be,C.find=jn,C.findIndex=Ae,C.get=et,C.hasIn=tt,C.identity=ot,C.includes=function(e,t,n,r){return e=He(e)?e:at(e),n=n&&!r?Qe(n):0,r=e.length,0>n&&(n=ln(r+n,0)),$e(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<m(e,t,n)},C.isArguments=Bn,C.isArray=Hn,C.isArrayLike=He,C.isArrayLikeObject=Ue,C.isBuffer=Un,C.isFunction=ze,C.isLength=Ke,C.isObject=We,C.isObjectLike=Ve,C.isPlainObject=qe,C.isString=$e,C.isSymbol=Je,C.isTypedArray=zn,C.last=Ne,C.stubArray=lt,C.stubFalse=ft,C.noop=ut,C.sortedIndexBy=function(e,t,n){n=be(n,2),t=n(t);for(var r=0,a=null==e?0:e.length,i=t!==t,o=null===t,s=Je(t),u=t===pt;r<a;){var c=on((r+a)/2),l=n(e[c]),f=l!==pt,p=null===l,d=l===l,h=Je(l);(i?d:u?d&&f:o?d&&f&&!p:s?d&&f&&!p&&!h:p||h?0:l<t)?r=c+1:a=c}return fn(a,4294967294)},C.toFinite=Ge,C.toInteger=Qe,C.toNumber=Ye,C.toString=Ze,C.VERSION="4.17.4",Ot._=C,void 0!==(a=function(){return C}.call(t,n,t,r))&&(r.exports=a)}).call(this)}).call(t,n(3),n(6)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",function(){return l});var u=n(1),c=(n.n(u),n(0)),l=(n.n(c),function(){function e(){i(this,e),this.httpManger=new c.SFHttpManager,this.httpManger.setJWTRequestHandler(function(){})}return s(e,[{key:"setCredentials",value:function(e){this.credentials=e}},{key:"uploadFile",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){var a,i,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(r.content.relayUrl,"/integrations/save-item"),i={file:{name:t,item:n},source:r.content.source,authorization:r.content.authorization},e.abrupt("return",new Promise(function(e,t){o.httpManger.postAbsolute(a,i,function(t){e(t.metadata)},function(e){var n=e.error;n||(n={message:"File upload failed."}),console.log("Upload error response",n),t(n)})}));case 3:case"end":return e.stop()}},e)}));return e}()},{key:"downloadFile",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r,a,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(n.content.relayUrl,"/integrations/download-item"),a={metadata:t.content.serverMetadata,authorization:n.content.authorization},e.abrupt("return",new Promise(function(e,t){i.httpManger.postAbsolute(r,a,function(t){e(t)},function(e){var n=e.error;console.log("Download error response",e),t(n)})}));case 3:case"end":return e.stop()}},e)}));return e}()},{key:"deleteFile",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){var r,a,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(n.content.relayUrl,"/integrations/delete-item"),a={metadata:t.content.serverMetadata,authorization:n.content.authorization},e.abrupt("return",new Promise(function(e,t){i.httpManger.postAbsolute(r,a,function(t){e(t)},function(e){var n=e.error;console.log("Download error response",e),t(n)})}));case 3:case"end":return e.stop()}},e)}));return e}()}]),e}())},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",function(){return f});var u=n(1),c=(n.n(u),n(0)),l=(n.n(c),n(2)),f=function(){function e(t){i(this,e),this.extensionBridge=t}return s(e,[{key:"integrationForFileDescriptor",value:function(e){return this.integrations.find(function(t){return e.content.serverMetadata&&t.content.source==e.content.serverMetadata.source})}},{key:"parseIntegrationCode",value:function(e){var t=atob(e),n=JSON.parse(t);return n.rawCode=e,n}},{key:"saveIntegrationFromCode",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseIntegrationCode(t),0==this.integrations.length&&(n.isDefaultUploadSource=!0),r=this.createAndSaveIntegrationObject(n),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"createAndSaveIntegrationObject",value:function(e){var t=new c.SFItem({content_type:l.a.FileSafeIntegrationContentTypeKey,content:e});return this.extensionBridge.createItems([t]),t}},{key:"getDefaultIntegration",value:function(){return this.integrations.find(function(e){return e.content.isDefaultUploadSource})}},{key:"setIntegrationAsDefault",value:function(e){var t=[e],n=this.getDefaultIntegration();n&&(n.content.isDefaultUploadSource=!1,t.push(n)),e.content.isDefaultUploadSource=!0,this.extensionBridge.saveItems(t)}},{key:"displayStringForIntegration",value:function(e){var t=e.content.source.split("_"),n="",r=0,a=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;n+=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(c),r<t.length-1&&(n+=" "),r++}}catch(e){i=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}return n}},{key:"deleteIntegration",value:function(e){var t=this,n=e.content.isDefaultUploadSource;this.extensionBridge.deleteItem(e,function(r){if(r.deleted&&n&&t.integrations.length>0){var a=!0,i=!1,o=void 0;try{for(var s,u=t.integrations[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;if(c!=e){t.setIntegrationAsDefault(c);break}}}catch(e){i=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}}})}},{key:"integrations",get:function(){return this.extensionBridge.filterItems(l.a.FileSafeIntegrationContentTypeKey)}}]),e}()},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return p});var c=n(1),l=(n.n(c),n(0)),f=(n.n(l),n(2)),p=function(){function e(t){var n=this,r=t.extensionBridge,a=t.onCredentialLoad;i(this,e),u(this,"getDefaultCredentials",function(){var e=n.credentials.find(function(e){return e.content.isDefault});return!e&&n.credentials.length>0&&(e=n.credentials[0]),e}),u(this,"setCredentialAsDefault",function(e){var t=n.getDefaultCredentials();t&&(t.content.isDefault=!1),e.content.isDefault=!0,n.extensionBridge.saveItems([t,e])}),u(this,"deleteCredential",function(e){n.extensionBridge.deleteItem(e)}),this.extensionBridge=r,this.onCredentialLoad=a,this.credentials=[],this.extensionBridge.addEventHandler(function(e){e==f.a.BridgeEventReceivedItems&&n.reloadCredentials()})}return s(e,[{key:"reloadCredentials",value:function(){this.credentials=[];var e=this.extensionBridge.filterItems(f.a.FileSafeCredentialsContentType);if(0!=e.length){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;this.credentials.find(function(e){return e.uuid==o.uuid})||this.credentials.push(o)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.onCredentialLoad(),this.credentials.length>0&&this.didLoadCredentials()}}},{key:"createNewCredentials",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=256,e.next=3,SFJS.crypto.generateRandomKey(t);case 3:return n=e.sent,e.next=6,SFJS.crypto.generateRandomKey(t);case 6:return r=e.sent,e.next=9,SFJS.crypto.generateInitialKeysAndAuthParamsForUser(n,r);case 9:return a=e.sent,a.isDefault=0==this.credentials.length,i=new l.SFItem({content_type:f.a.FileSafeCredentialsContentType,content:a}),this.extensionBridge.saveItem(i),this.didLoadCredentials(),e.abrupt("return",i);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"didLoadCredentials",value:function(){this.extensionBridge.notifyObserversOfEvent(f.a.BridgeEventLoadedCredentials)}},{key:"credentialForFileDescriptor",value:function(e){return this.credentials.find(function(t){return e.content.references.find(function(e){return e.uuid==t.uuid})})}},{key:"getAllCredentials",value:function(){return this.credentials}},{key:"saveCredential",value:function(e){this.extensionBridge.saveItem(e)}}]),e}()},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return h});var c=n(1),l=(n.n(c),n(0)),f=(n.n(l),n(11)),p=n.n(f),d=n(2),h=function(){function e(t,n,r,a){i(this,e),this.extensionBridge=t,this.relayManager=n,this.integrationManager=r,this.credentialManager=a}return s(e,[{key:"getAllFileDescriptors",value:function(){return this.extensionBridge.getFileDescriptors()}},{key:"fileDescriptorsForNote",value:function(e){return e?this.extensionBridge.getFileDescriptors().filter(function(t){return t.hasRelationshipWithItem(e)}):[]}},{key:"findFileDescriptor",value:function(e){return this.extensionBridge.getFileDescriptors().find(function(t){return t.uuid==e})}},{key:"fileDescriptorsEncryptedWithCredential",value:function(e){return this.extensionBridge.getFileDescriptors().filter(function(t){return t.content.references.find(function(t){return t.uuid==e.uuid})})}},{key:"deleteFileFromDescriptor",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){n.extensionBridge.deleteItems([t],function(r){if(r.deleted){var a=n.integrationManager.integrationForFileDescriptor(t);a&&n.relayManager.deleteFile(t,a).then(function(t){e()})}else e(r)})}));case 1:case"end":return e.stop()}},e)}));return e}()},{key:"uploadFile",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,u,c,f=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileItem,r=t.inputFileName,a=t.fileType,i=t.credential,o=t.note,s=this.integrationManager.getDefaultIntegration(),u=r.split(".")[1],c="".concat(n.uuid,".sf.json"),e.abrupt("return",new Promise(function(e,t){var u=new p.a;u.addEventListener("message",function(n){var s=n.data;if(s.error)return console.log("Error uploading file",s.error),void t(s.error);var u=new l.SFItem({content_type:d.a.FileDescriptorContentTypeKey,content:{serverMetadata:n.data.metadata,fileName:r,fileType:a}});o&&u.addItemAsRelationship(o),u.addItemAsRelationship(i),f.extensionBridge.createItem(u,function(t){e(t[0])})});var h={outputFileName:c,fileItem:n,integration:s,operation:"upload",credentials:f.credentialManager.getDefaultCredentials()};u.postMessage(h)}));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"downloadFileFromDescriptor",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.integrationManager.integrationForFileDescriptor(t)){e.next=6;break}throw r=t.content.serverMetadata,r?alert("Unable to find integration named '".concat(r.source,"'.")):alert("Unable to find integration for this file."),"Unable to find integration";case 6:return e.abrupt("return",this.relayManager.downloadFile(t,n).then(function(e){return e.items[0]}));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"encryptFile",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r=t.inputFileName,a=t.fileType,i=t.credential,e.abrupt("return",new Promise(function(e,t){var o=new p.a;o.addEventListener("message",function(t){e(t.data.fileItem)}),o.postMessage({operation:"encrypt",keys:i.content.keys,authParams:i.content.authParams,contentType:d.a.FileItemContentTypeKey,fileData:n,fileName:r,fileType:a})}));case 2:case"end":return e.stop()}},e)}));return e}()},{key:"decryptFile",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileDescriptor,r=t.fileItem,a=t.credential,a||(a=this.credentialManager.credentialForFileDescriptor(n)),e.abrupt("return",new Promise(function(e,t){var n=new p.a;n.addEventListener("message",function(n){var r=n.data;if(r.error)return void t(r.error);e(r)}),n.postMessage({operation:"decrypt",keys:a.content.keys,item:r})}));case 3:case"end":return e.stop()}},e,this)}));return e}()}]),e}();u(h,"FileItemContentTypeKey","SN|FileSafe|File"),u(h,"FileDescriptorContentTypeKey","SN|FileSafe|FileMetadata")},function(e,t,n){e.exports=function(){return new Worker(n.p+"filesafe-js/EncryptionWorker.js")}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,"a",function(){return o});var o=function(){function e(){r(this,e)}return i(e,null,[{key:"base64toBinary",value:function(e){for(var t=atob(e),n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));return new Uint8Array(n)}},{key:"downloadData",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=document.createElement("a");i.setAttribute("download",t);var o=this.tempUrlForData(e,n);i.href=o,i.setAttribute("target","_blank"),a?window.location.href=i.href:(document.body.appendChild(i),i.click(),i.remove()),setTimeout(function(){r.revokeTempUrl(o)},500)}},{key:"tempUrlForData",value:function(e,t){return window.URL.createObjectURL(new Blob([e],{type:t||"text/json"}))}},{key:"revokeTempUrl",value:function(e){window.URL.revokeObjectURL(e)}},{key:"copyTextToClipboard",value:function(e){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t;try{t=document.createElement("textarea"),t.setAttribute("readonly",!0),t.setAttribute("contenteditable",!0),t.style.position="fixed",t.value=e,document.body.appendChild(t),t.focus(),t.select();var n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.setSelectionRange(0,t.value.length),document.execCommand("copy")}catch(e){console.error(e),null}finally{document.body.removeChild(t)}}}}]),e}()}])},function(e,t,n){n(6),e.exports=n(23)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n.n(r),i=n(2),o=n.n(i),s=n(19);o.a.render(a.a.createElement(s.a,null),document.body)},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,i,o,s],c=0;e=Error(t.replace(/%s/g,function(){return u[c++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function a(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=0;a<t;a++)n+="&args[]="+encodeURIComponent(arguments[a+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(e,t,n){this.props=e,this.context=t,this.refs=N,this.updater=n||M}function o(){}function s(e,t,n){this.props=e,this.context=t,this.refs=N,this.updater=n||M}function u(e,t,n){var r=void 0,a={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)B.call(t,r)&&!H.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:x,type:e,key:i,ref:o,props:a,_owner:j.current}}function c(e,t){return{$$typeof:x,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l(e){return"object"==typeof e&&null!==e&&e.$$typeof===x}function f(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function p(e,t,n,r){if(z.length){var a=z.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function d(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>z.length&&z.push(e)}function h(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case x:case S:o=!0}}if(o)return n(r,e,""===t?"."+m(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){i=e[s];var u=t+m(i,s);o+=h(i,u,n,r)}else if(null===e||"object"!=typeof e?u=null:(u=A&&e[A]||e["@@iterator"],u="function"==typeof u?u:null),"function"==typeof u)for(e=u.call(e),s=0;!(i=e.next()).done;)i=i.value,u=t+m(i,s++),o+=h(i,u,n,r);else"object"===i&&(n=""+e,a("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return o}function v(e,t,n){return null==e?0:h(e,"",t,n)}function m(e,t){return"object"==typeof e&&null!==e&&null!=e.key?f(e.key):t.toString(36)}function y(e,t){e.func.call(e.context,t,e.count++)}function g(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?b(e,r,n,function(e){return e}):null!=e&&(l(e)&&(e=c(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(U,"$&/")+"/")+n)),r.push(e))}function b(e,t,n,r,a){var i="";null!=n&&(i=(""+n).replace(U,"$&/")+"/"),t=p(t,i,r,a),v(e,g,t),d(t)}/** @license React v16.6.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var k=n(1),w="function"==typeof Symbol&&Symbol.for,x=w?Symbol.for("react.element"):60103,S=w?Symbol.for("react.portal"):60106,C=w?Symbol.for("react.fragment"):60107,_=w?Symbol.for("react.strict_mode"):60108,E=w?Symbol.for("react.profiler"):60114,I=w?Symbol.for("react.provider"):60109,P=w?Symbol.for("react.context"):60110,F=w?Symbol.for("react.concurrent_mode"):60111,T=w?Symbol.for("react.forward_ref"):60112,R=w?Symbol.for("react.suspense"):60113,D=w?Symbol.for("react.memo"):60115,O=w?Symbol.for("react.lazy"):60116,A="function"==typeof Symbol&&Symbol.iterator,M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N={};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&a("85"),this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=i.prototype;var L=s.prototype=new o;L.constructor=s,k(L,i.prototype),L.isPureReactComponent=!0;var j={current:null,currentDispatcher:null},B=Object.prototype.hasOwnProperty,H={key:!0,ref:!0,__self:!0,__source:!0},U=/\/+/g,z=[],K={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return b(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=p(null,null,t,n),v(e,y,t),d(t)},count:function(e){return v(e,function(){return null},null)},toArray:function(e){var t=[];return b(e,t,null,function(e){return e}),t},only:function(e){return l(e)||a("143"),e}},createRef:function(){return{current:null}},Component:i,PureComponent:s,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:P,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:I,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:T,render:e}},lazy:function(e){return{$$typeof:O,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:D,type:e,compare:void 0===t?null:t}},Fragment:C,StrictMode:_,Suspense:R,createElement:u,cloneElement:function(e,t,n){(null===e||void 0===e)&&a("267",e);var r=void 0,i=k({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,u=j.current),void 0!==t.key&&(o=""+t.key);var c=void 0;e.type&&e.type.defaultProps&&(c=e.type.defaultProps);for(r in t)B.call(t,r)&&!H.hasOwnProperty(r)&&(i[r]=void 0===t[r]&&void 0!==c?c[r]:t[r])}if(1===(r=arguments.length-2))i.children=n;else if(1<r){c=Array(r);for(var l=0;l<r;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:x,type:e.type,key:o,ref:s,props:i,_owner:u}},createFactory:function(e){var t=u.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.6.3",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:j,assign:k}};K.unstable_ConcurrentMode=F,K.unstable_Profiler=E;var W={default:K},V=W&&K||W;e.exports=V.default||V},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function a(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i(){if(Pt)for(var e in Ft){var t=Ft[e],n=Pt.indexOf(e);if(-1<n||r("96",e),!Tt.plugins[n]){t.extractEvents||r("97",e),Tt.plugins[n]=t,n=t.eventTypes;for(var a in n){var i=void 0,s=n[a],u=t,c=a;Tt.eventNameDispatchConfigs.hasOwnProperty(c)&&r("99",c),Tt.eventNameDispatchConfigs[c]=s;var l=s.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&o(l[i],u,c);i=!0}else s.registrationName?(o(s.registrationName,u,c),i=!0):i=!1;i||r("98",a,e)}}}}function o(e,t,n){Tt.registrationNameModules[e]&&r("100",e),Tt.registrationNameModules[e]=t,Tt.registrationNameDependencies[e]=t.eventTypes[n].dependencies}function s(e,t){return(e&t)===t}function u(e){for(var t;t=e._renderedComponent;)e=t;return e}function c(e,t){e=u(e),e._hostNode=t,t[Vt]=e}function l(e,t){if(!(e._flags&Kt.hasCachedChildNodes)){var n=e._renderedChildren;t=t.firstChild;var a;e:for(a in n)if(n.hasOwnProperty(a)){var i=n[a],o=u(i)._domID;if(0!==o){for(;null!==t;t=t.nextSibling){var s=t,l=o;if(s.nodeType===Ht&&s.getAttribute(zt)===""+l||s.nodeType===Ut&&s.nodeValue===" react-text: "+l+" "||s.nodeType===Ut&&s.nodeValue===" react-empty: "+l+" "){c(i,t);continue e}}r("32",o)}}e._flags|=Kt.hasCachedChildNodes}}function f(e){if(e[Vt])return e[Vt];for(var t=[];!e[Vt];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=e[Vt];if(n.tag===jt||n.tag===Bt)return n;for(;e&&(n=e[Vt]);e=t.pop()){var r=n;t.length&&l(n,e)}return r}function p(e){if("function"==typeof e.getName)return e.getName();if("number"==typeof e.tag){if("string"==typeof(e=e.type))return e;if("function"==typeof e)return e.displayName||e.name}return null}function d(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if((t.effectTag&nn)!==tn)return 1;for(;t.return;)if(t=t.return,(t.effectTag&nn)!==tn)return 1}return t.tag===Xt?2:3}function h(e){2!==d(e)&&r("188")}function v(e){var t=e.alternate;if(!t)return t=d(e),3===t&&r("188"),1===t?null:e;for(var n=e,a=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return h(i),e;if(s===a)return h(i),t;s=s.sibling}r("188")}if(n.return!==a.return)n=i,a=o;else{s=!1;for(var u=i.child;u;){if(u===n){s=!0,n=i,a=o;break}if(u===a){s=!0,a=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,a=i;break}if(u===a){s=!0,a=o,n=i;break}u=u.sibling}s||r("189")}}n.alternate!==a&&r("190")}return n.tag!==Xt&&r("188"),n.stateNode.current===n?e:t}function m(e,t,n,r,a,i,o,s,u){an._hasCaughtError=!1,an._caughtError=null;var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){an._caughtError=e,an._hasCaughtError=!0}}function y(){if(an._hasRethrowError){var e=an._rethrowError;throw an._rethrowError=null,an._hasRethrowError=!1,e}}function g(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=sn.getNodeFromInstance(r),on.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function b(e){if(e=un.getInstanceFromNode(e))if("number"==typeof e.tag){cn&&"function"==typeof cn.restoreControlledState||r("194");var t=un.getFiberCurrentPropsFromNode(e.stateNode);cn.restoreControlledState(e.stateNode,e.type,t)}else"function"!=typeof e.restoreControlledState&&r("195"),e.restoreControlledState()}function k(e,t,n,r,a,i){return e(t,n,r,a,i)}function w(e,t){return e(t)}function x(e,t){return w(e,t)}function S(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===vn?e.parentNode:e}function C(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n=t;if("number"==typeof n.tag){for(;n.return;)n=n.return;n=n.tag!==mn?null:n.stateNode.containerInfo}else{for(;n._hostParent;)n=n._hostParent;n=$t.getNodeFromInstance(n).parentNode}if(!n)break;e.ancestors.push(t),t=$t.getClosestInstanceFromNode(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],gn._handleTopLevel(e.topLevelType,t,e.nativeEvent,S(e.nativeEvent))}function _(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function E(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function I(e,t){e&&(un.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))}function P(e){return I(e,!0)}function F(e){return I(e,!1)}function T(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||"button"!==t&&"input"!==t&&"select"!==t&&"textarea"!==t);default:return!1}}function R(e,t){if(!mt.canUseDOM||t&&!("addEventListener"in document))return!1;t="on"+e;var n=t in document;return n||(n=document.createElement("div"),n.setAttribute(t,"return;"),n="function"==typeof n[t]),!n&&Et&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function D(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function O(e){if(Sn[e])return Sn[e];if(!xn[e])return e;var t,n=xn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cn)return Sn[e]=n[t];return""}function A(e){return Object.prototype.hasOwnProperty.call(e,Pn)||(e[Pn]=In++,En[e[Pn]]={}),En[e[Pn]]}function M(e){return!!Hn.hasOwnProperty(e)||!Bn.hasOwnProperty(e)&&(jn.test(e)?Hn[e]=!0:(Bn[e]=!0,!1))}function N(){return null}function L(e){var t="";return vt.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}function j(e,t,n){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r)}else{for(n=""+n,t=null,r=0;r<e.length;r++){if(e[r].value===n)return void(e[r].selected=!0);null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function B(e,t){t&&(Xn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!=typeof t.style&&r("62",""))}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function U(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function z(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function K(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===rr)return void(n.nodeValue=t)}e.textContent=t}function W(e,t){sr(t,e.nodeType===ir||e.nodeType===or?e:e.ownerDocument)}function V(e,t){return e!==Dr&&e!==Rr||t!==Dr&&t!==Rr?e===Tr&&t!==Tr?-255:e!==Tr&&t===Tr?255:e-t:0}function q(){return{first:null,last:null,hasForceUpdate:!1,callbackList:null}}function $(e,t,n,r){null!==n?n.next=t:(t.next=e.first,e.first=t),null!==r?t.next=r:e.last=t}function J(e,t){t=t.priorityLevel;var n=null;if(null!==e.last&&0>=V(e.last.priorityLevel,t))n=e.last;else for(e=e.first;null!==e&&0>=V(e.priorityLevel,t);)n=e,e=e.next;return n}function G(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue=q()),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue=q()):e=null,Mr=r,Nr=e!==r?e:null;var a=Mr;n=Nr;var i=J(a,t),o=null!==i?i.next:a.first;return null===n?($(a,t,i,o),null):(r=J(n,t),e=null!==r?r.next:n.first,$(a,t,i,o),o===e&&null!==o||i===r&&null!==i?(null===r&&(n.first=t),null===e&&(n.last=null),null):(t={priorityLevel:t.priorityLevel,partialState:t.partialState,callback:t.callback,isReplace:t.isReplace,isForced:t.isForced,isTopLevelUnmount:t.isTopLevelUnmount,next:null},$(n,t,r,e),t))}function Q(e,t,n,r){return e=e.partialState,"function"==typeof e?e.call(t,n,r):e}function Y(e,t,n){e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function X(e){return e.tag===zr&&null!=e.type.childContextTypes}function Z(e,t){var n=e.stateNode,a=e.type.childContextTypes;if("function"!=typeof n.getChildContext)return t;n=n.getChildContext();for(var i in n)i in a||r("108",p(e)||"Unknown",i);return yt({},t,n)}function ee(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=ca,this.lastEffect=this.firstEffect=this.nextEffect=null,this.pendingWorkPriority=sa,this.alternate=null}function te(e,t,n){var a=void 0;return"function"==typeof e?(a=e.prototype&&e.prototype.isReactComponent?new ee(Zr,t,n):new ee(Xr,t,n),a.type=e):"string"==typeof e?(a=new ee(ta,t,n),a.type=e):"object"==typeof e&&null!==e&&"number"==typeof e.tag?a=e:r("130",null==e?e:typeof e,""),a}function ne(e){return null===e||void 0===e?null:(e=Ha&&e[Ha]||e["@@iterator"],"function"==typeof e?e:null)}function re(e,t){var n=t.ref;if(null!==n&&"function"!=typeof n){if(t._owner){t=t._owner;var a=void 0;t&&("number"==typeof t.tag?(t.tag!==Ra&&r("110"),a=t.stateNode):a=t.getPublicInstance()),a||r("147",n);var i=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===i?e.ref:(e=function(e){var t=a.refs===kt?a.refs={}:a.refs;null===e?delete t[i]:t[i]=e},e._stringRef=i,e)}"string"!=typeof n&&r("148"),t._owner||r("149",n)}return n}function ae(e,t){"textarea"!==e.type&&r("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function ie(e,t){function n(n,r){if(t){if(!e){if(null===r.alternate)return;r=r.alternate}var a=n.lastEffect;null!==a?(a.nextEffect=r,n.lastEffect=r):n.firstEffect=n.lastEffect=r,r.nextEffect=null,r.effectTag=Ba}}function a(e,r){if(!t)return null;for(;null!==r;)n(e,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(t,n){return e?(t=xa(t,n),t.index=0,t.sibling=null,t):(t.pendingWorkPriority=n,t.effectTag=La,t.index=0,t.sibling=null,t)}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index,r<n?(e.effectTag=ja,n):r):(e.effectTag=ja,n):n}function u(e){return t&&null===e.alternate&&(e.effectTag=ja),e}function c(e,t,n,r){return null===t||t.tag!==Da?(n=_a(n,e.internalContextTag,r),n.return=e,n):(t=o(t,r),t.pendingProps=n,t.return=e,t)}function l(e,t,n,r){return null===t||t.type!==n.type?(r=Sa(n,e.internalContextTag,r),r.ref=re(t,n),r.return=e,r):(r=o(t,r),r.ref=re(t,n),r.pendingProps=n.props,r.return=e,r)}function f(e,t,n,r){return null===t||t.tag!==Aa?(n=Ea(n,e.internalContextTag,r),n.return=e,n):(t=o(t,r),t.pendingProps=n,t.return=e,t)}function p(e,t,n,r){return null===t||t.tag!==Ma?(t=Ia(n,e.internalContextTag,r),t.type=n.value,t.return=e,t):(t=o(t,r),t.type=n.value,t.return=e,t)}function d(e,t,n,r){return null===t||t.tag!==Oa||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(n=Pa(n,e.internalContextTag,r),n.return=e,n):(t=o(t,r),t.pendingProps=n.children||[],t.return=e,t)}function h(e,t,n,r){return null===t||t.tag!==Na?(n=Ca(n,e.internalContextTag,r),n.return=e,n):(t=o(t,r),t.pendingProps=n,t.return=e,t)}function v(e,t,n){if("string"==typeof t||"number"==typeof t)return t=_a(""+t,e.internalContextTag,n),t.return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ua:return n=Sa(t,e.internalContextTag,n),n.ref=re(null,t),n.return=e,n;case ba:return t=Ea(t,e.internalContextTag,n),t.return=e,t;case ka:return n=Ia(t,e.internalContextTag,n),n.type=t.value,n.return=e,n;case wa:return t=Pa(t,e.internalContextTag,n),t.return=e,t}if(Fa(t)||ne(t))return t=Ca(t,e.internalContextTag,n),t.return=e,t;ae(e,t)}return null}function m(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ua:return n.key===a?l(e,t,n,r):null;case ba:return n.key===a?f(e,t,n,r):null;case ka:return null===a?p(e,t,n,r):null;case wa:return n.key===a?d(e,t,n,r):null}if(Fa(n)||ne(n))return null!==a?null:h(e,t,n,r);ae(e,n)}return null}function y(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return e=e.get(n)||null,c(t,e,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ua:return e=e.get(null===r.key?n:r.key)||null,l(t,e,r,a);case ba:return e=e.get(null===r.key?n:r.key)||null,f(t,e,r,a);case ka:return e=e.get(n)||null,p(t,e,r,a);case wa:return e=e.get(null===r.key?n:r.key)||null,d(t,e,r,a)}if(Fa(r)||ne(r))return e=e.get(n)||null,h(t,e,r,a);ae(t,r)}return null}function g(e,r,o,u){for(var c=null,l=null,f=r,p=r=0,d=null;null!==f&&p<o.length;p++){f.index>p?(d=f,f=null):d=f.sibling;var h=m(e,f,o[p],u);if(null===h){null===f&&(f=d);break}t&&f&&null===h.alternate&&n(e,f),r=s(h,r,p),null===l?c=h:l.sibling=h,l=h,f=d}if(p===o.length)return a(e,f),c;if(null===f){for(;p<o.length;p++)(f=v(e,o[p],u))&&(r=s(f,r,p),null===l?c=f:l.sibling=f,l=f);return c}for(f=i(e,f);p<o.length;p++)(d=y(f,e,p,o[p],u))&&(t&&null!==d.alternate&&f.delete(null===d.key?p:d.key),r=s(d,r,p),null===l?c=d:l.sibling=d,l=d);return t&&f.forEach(function(t){return n(e,t)}),c}function b(e,o,u,c){var l=ne(u);"function"!=typeof l&&r("150"),null==(u=l.call(u))&&r("151");for(var f=l=null,p=o,d=o=0,h=null,g=u.next();null!==p&&!g.done;d++,g=u.next()){p.index>d?(h=p,p=null):h=p.sibling;var b=m(e,p,g.value,c);if(null===b){p||(p=h);break}t&&p&&null===b.alternate&&n(e,p),o=s(b,o,d),null===f?l=b:f.sibling=b,f=b,p=h}if(g.done)return a(e,p),l;if(null===p){for(;!g.done;d++,g=u.next())null!==(g=v(e,g.value,c))&&(o=s(g,o,d),null===f?l=g:f.sibling=g,f=g);return l}for(p=i(e,p);!g.done;d++,g=u.next())null!==(g=y(p,e,d,g.value,c))&&(t&&null!==g.alternate&&p.delete(null===g.key?d:g.key),o=s(g,o,d),null===f?l=g:f.sibling=g,f=g);return t&&p.forEach(function(t){return n(e,t)}),l}return function(e,t,i,s){var c="object"==typeof i&&null!==i;if(c)switch(i.$$typeof){case Ua:e:{var l=i.key;for(c=t;null!==c;){if(c.key===l){if(c.type===i.type){a(e,c.sibling),t=o(c,s),t.ref=re(c,i),t.pendingProps=i.props,t.return=e,e=t;break e}a(e,c);break}n(e,c),c=c.sibling}s=Sa(i,e.internalContextTag,s),s.ref=re(t,i),s.return=e,e=s}return u(e);case ba:e:{for(c=i.key;null!==t;){if(t.key===c){if(t.tag===Aa){a(e,t.sibling),t=o(t,s),t.pendingProps=i,t.return=e,e=t;break e}a(e,t);break}n(e,t),t=t.sibling}i=Ea(i,e.internalContextTag,s),i.return=e,e=i}return u(e);case ka:e:{if(null!==t){if(t.tag===Ma){a(e,t.sibling),t=o(t,s),t.type=i.value,t.return=e,e=t;break e}a(e,t)}t=Ia(i,e.internalContextTag,s),t.type=i.value,t.return=e,e=t}return u(e);case wa:e:{for(c=i.key;null!==t;){if(t.key===c){if(t.tag===Oa&&t.stateNode.containerInfo===i.containerInfo&&t.stateNode.implementation===i.implementation){a(e,t.sibling),t=o(t,s),t.pendingProps=i.children||[],t.return=e,e=t;break e}a(e,t);break}n(e,t),t=t.sibling}i=Pa(i,e.internalContextTag,s),i.return=e,e=i}return u(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==t&&t.tag===Da?(a(e,t.sibling),t=o(t,s),t.pendingProps=i,t.return=e,e=t):(a(e,t),i=_a(i,e.internalContextTag,s),i.return=e,e=i),u(e);if(Fa(i))return g(e,t,i,s);if(ne(i))return b(e,t,i,s);if(c&&ae(e,i),void 0===i)switch(e.tag){case Ra:case Ta:i=e.type,r("152",i.displayName||i.name||"Component")}return a(e,t)}}function oe(e,t,n,a){function i(e,t){t.updater=o,e.stateNode=t,Jt.set(t,e)}var o={isMounted:ri,enqueueSetState:function(n,r,a){n=Jt.get(n);var i=t(n,!1);Xa(n,r,void 0===a?null:a,i),e(n,i)},enqueueReplaceState:function(n,r,a){n=Jt.get(n);var i=t(n,!1);Za(n,r,void 0===a?null:a,i),e(n,i)},enqueueForceUpdate:function(n,r){n=Jt.get(n);var a=t(n,!1);ei(n,void 0===r?null:r,a),e(n,a)}};return{adoptClassInstance:i,constructClassInstance:function(e,t){var n=e.type,r=Qa(e),a=Ya(e),o=a?Ga(e,r):kt;return t=new n(t,o),i(e,t),a&&Ja(e,r,o),t},mountClassInstance:function(e,t){var n=e.alternate,a=e.stateNode,i=a.state||null,s=e.pendingProps;s||r("158");var u=Qa(e);a.props=s,a.state=i,a.refs=kt,a.context=Ga(e,u),Ir.enableAsyncSubtreeAPI&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=$a),"function"==typeof a.componentWillMount&&(u=a.state,a.componentWillMount(),u!==a.state&&o.enqueueReplaceState(a,a.state,null),null!==(u=e.updateQueue)&&(a.state=ti(n,e,u,a,i,s,t))),"function"==typeof a.componentDidMount&&(e.effectTag|=qa)},updateClassInstance:function(e,t,i){var s=t.stateNode;s.props=t.memoizedProps,s.state=t.memoizedState;var u=t.memoizedProps,c=t.pendingProps;c||null==(c=u)&&r("159");var l=s.context,f=Qa(t);if(f=Ga(t,f),"function"!=typeof s.componentWillReceiveProps||u===c&&l===f||(l=s.state,s.componentWillReceiveProps(c,f),s.state!==l&&o.enqueueReplaceState(s,s.state,null)),l=t.memoizedState,i=null!==t.updateQueue?ti(e,t,t.updateQueue,s,l,c,i):l,!(u!==c||l!==i||ni()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!=typeof s.componentDidUpdate||u===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=qa),!1;var p=c;if(null===u||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)p=!0;else{var d=t.stateNode,h=t.type;p="function"==typeof d.shouldComponentUpdate?d.shouldComponentUpdate(p,i,f):!h.prototype||!h.prototype.isPureReactComponent||(!wt(u,p)||!wt(l,i))}return p?("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(c,i,f),"function"==typeof s.componentDidUpdate&&(t.effectTag|=qa)):("function"!=typeof s.componentDidUpdate||u===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=qa),n(t,c),a(t,i)),s.props=c,s.state=i,s.context=f,p}}}function se(e,t,n,a,i){function o(e,t,n){s(e,t,n,t.pendingWorkPriority)}function s(e,t,n,r){t.child=null===e?ai(t,t.child,n,r):e.child===t.child?ii(t,t.child,n,r):oi(t,t.child,n,r)}function u(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=Di)}function c(e,t,n,r){if(u(e,t),!n)return r&&hi(t,!1),f(e,t);n=t.stateNode,Oi.current=t;var a=n.render();return t.effectTag|=Pi,o(e,t,a),t.memoizedState=n.state,t.memoizedProps=n.props,r&&hi(t,!0),t.child}function l(e){var t=e.stateNode;t.pendingContext?di(e,t.pendingContext,t.pendingContext!==t.context):t.context&&di(e,t.context,!1),y(e,t.containerInfo)}function f(e,t){return si(e,t),t.child}function p(e,t){switch(t.tag){case gi:l(t);break;case yi:pi(t);break;case wi:y(t,t.stateNode.containerInfo)}return null}var d=e.shouldSetTextContent,h=e.useSyncScheduling,v=e.shouldDeprioritizeSubtree,m=t.pushHostContext,y=t.pushHostContainer,g=n.enterHydrationState,b=n.resetHydrationState,k=n.tryToClaimNextHydratableInstance;e=oe(a,i,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t});var w=e.adoptClassInstance,x=e.constructClassInstance,S=e.mountClassInstance,C=e.updateClassInstance;return{beginWork:function(e,t,n){if(t.pendingWorkPriority===Ei||t.pendingWorkPriority>n)return p(e,t);switch(t.tag){case vi:null!==e&&r("155");var a=t.type,i=t.pendingProps,s=li(t);return s=ci(t,s),a=a(i,s),t.effectTag|=Pi,"object"==typeof a&&null!==a&&"function"==typeof a.render?(t.tag=yi,i=pi(t),w(t,a),S(t,n),t=c(e,t,!0,i)):(t.tag=mi,o(e,t,a),t.memoizedProps=i,t=t.child),t;case mi:e:{if(i=t.type,n=t.pendingProps,a=t.memoizedProps,fi())null===n&&(n=a);else if(null===n||a===n){t=f(e,t);break e}a=li(t),a=ci(t,a),i=i(n,a),t.effectTag|=Pi,o(e,t,i),t.memoizedProps=n,t=t.child}return t;case yi:return i=pi(t),a=void 0,null===e?t.stateNode?r("153"):(x(t,t.pendingProps),S(t,n),a=!0):a=C(e,t,n),c(e,t,a,i);case gi:return l(t),a=t.updateQueue,null!==a?(i=t.memoizedState,a=ui(e,t,a,null,i,null,n),i===a?(b(),t=f(e,t)):(i=a.element,null!==e&&null!==e.child||!g(t)?(b(),o(e,t,i)):(t.effectTag|=Fi,t.child=ai(t,t.child,i,n)),t.memoizedState=a,t=t.child)):(b(),t=f(e,t)),t;case bi:m(t),null===e&&k(t),i=t.type;var _=t.memoizedProps;return a=t.pendingProps,null===a&&null===(a=_)&&r("154"),s=null!==e?e.memoizedProps:null,fi()||null!==a&&_!==a?(_=a.children,d(i,a)?_=null:s&&d(i,s)&&(t.effectTag|=Ti),u(e,t),n!==Ii&&!h&&v(i,a)?(t.pendingWorkPriority=Ii,t=null):(o(e,t,_),t.memoizedProps=a,t=t.child)):t=f(e,t),t;case ki:return null===e&&k(t),e=t.pendingProps,null===e&&(e=t.memoizedProps),t.memoizedProps=e,null;case Si:t.tag=xi;case xi:return n=t.pendingProps,fi()?null===n&&null===(n=e&&e.memoizedProps)&&r("154"):null!==n&&t.memoizedProps!==n||(n=t.memoizedProps),i=n.children,a=t.pendingWorkPriority,t.stateNode=null===e?ai(t,t.stateNode,i,a):e.child===t.child?ii(t,t.stateNode,i,a):oi(t,t.stateNode,i,a),t.memoizedProps=n,t.stateNode;case Ci:return null;case wi:e:{if(y(t,t.stateNode.containerInfo),n=t.pendingWorkPriority,i=t.pendingProps,fi())null===i&&null==(i=e&&e.memoizedProps)&&r("154");else if(null===i||t.memoizedProps===i){t=f(e,t);break e}null===e?t.child=oi(t,t.child,i,n):o(e,t,i),t.memoizedProps=i,t=t.child}return t;case _i:e:{if(n=t.pendingProps,fi())null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=f(e,t);break e}o(e,t,n),t.memoizedProps=n,t=t.child}return t;default:r("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case yi:pi(t);break;case gi:l(t);break;default:r("157")}return t.effectTag|=Ri,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),t.pendingWorkPriority===Ei||t.pendingWorkPriority>n?p(e,t):(t.firstEffect=null,t.lastEffect=null,s(e,t,null,n),t.tag===yi&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}function ue(e,t,n){var a=e.createInstance,i=e.createTextInstance,o=e.appendInitialChild,s=e.finalizeInitialChildren,u=e.prepareUpdate,c=t.getRootHostContainer,l=t.popHostContext,f=t.getHostContext,p=t.popHostContainer,d=n.prepareToHydrateHostInstance,h=n.prepareToHydrateHostTextInstance,v=n.popHydrationState;return{completeWork:function(e,t,n){var m=t.pendingProps;switch(null===m?m=t.memoizedProps:t.pendingWorkPriority===Yi&&n!==Yi||(t.pendingProps=null),t.tag){case ji:return null;case Bi:return Mi(t),null;case Hi:return p(t),Ni(t),m=t.stateNode,m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),null!==e&&null!==e.child||(v(t),t.effectTag&=~Ji),null;case Ui:l(t),n=c();var y=t.type;if(null!==e&&null!=t.stateNode){var g=e.memoizedProps,b=t.stateNode,k=f();m=u(b,y,g,m,n,k),(t.updateQueue=m)&&(t.effectTag|=Qi),e.ref!==t.ref&&(t.effectTag|=Gi)}else{if(!m)return null===t.stateNode&&r("166"),null;if(e=f(),v(t))d(t,n,e)&&(t.effectTag|=Qi);else{e=a(y,m,n,e,t);e:for(g=t.child;null!==g;){if(g.tag===Ui||g.tag===zi)o(e,g.stateNode);else if(g.tag!==Ki&&null!==g.child){g=g.child;continue}if(g===t)break e;for(;null===g.sibling;){if(null===g.return||g.return===t)break e;g=g.return}g=g.sibling}s(e,y,m,n)&&(t.effectTag|=Qi),t.stateNode=e}null!==t.ref&&(t.effectTag|=Gi)}return null;case zi:if(e&&null!=t.stateNode)e.memoizedProps!==m&&(t.effectTag|=Qi);else{if("string"!=typeof m)return null===t.stateNode&&r("166"),null;e=c(),n=f(),v(t)?h(t)&&(t.effectTag|=Qi):t.stateNode=i(m,e,n,t)}return null;case Wi:(m=t.memoizedProps)||r("165"),t.tag=Vi,n=[];e:for((y=t.stateNode)&&(y.return=t);null!==y;){if(y.tag===Ui||y.tag===zi||y.tag===Ki)r("164");else if(y.tag===qi)n.push(y.type);else if(null!==y.child){y.child.return=y,y=y.child;continue}for(;null===y.sibling;){if(null===y.return||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}return y=m.handler,m=y(m.props,n),t.child=Ai(t,null!==e?e.child:null,m,t.pendingWorkPriority),t.child;case Vi:return t.tag=Wi,null;case qi:case $i:return null;case Ki:return t.effectTag|=Qi,p(t),null;case Li:r("167");default:r("156")}}}}function ce(e){return function(t){try{return e(t)}catch(e){}}}function le(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function a(e){return e.tag===ro||e.tag===no||e.tag===io}function i(e){for(var t=e;;)if(s(t),null!==t.child&&t.tag!==io)t.child.return=t,t=t.child;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function o(e){for(var t=e,n=!1,a=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&r("160"),n.tag){case ro:a=n.stateNode,o=!1;break e;case no:case io:a=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(t.tag===ro||t.tag===ao)i(t),o?y(a,t.stateNode):m(a,t.stateNode);else if(t.tag===io?a=t.stateNode.containerInfo:s(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,t.tag===io&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function s(e){switch("function"==typeof uo&&uo(e),e.tag){case to:n(e);var r=e.stateNode;if("function"==typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case ro:n(e);break;case oo:i(e.stateNode);break;case io:o(e)}}var u=e.commitMount,c=e.commitUpdate,l=e.resetTextContent,f=e.commitTextUpdate,p=e.appendChild,d=e.appendChildToContainer,h=e.insertBefore,v=e.insertInContainerBefore,m=e.removeChild,y=e.removeChildFromContainer,g=e.getPublicInstance;return{commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(a(t)){var n=t;break e}t=t.return}r("160"),n=void 0}var i=t=void 0;switch(n.tag){case ro:t=n.stateNode,i=!1;break;case no:case io:t=n.stateNode.containerInfo,i=!0;break;default:r("161")}n.effectTag&po&&(l(t),n.effectTag&=~po);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==ro&&n.tag!==ao;){if(n.effectTag&co)continue t;if(null===n.child||n.tag===io)continue t;n.child.return=n,n=n.child}if(!(n.effectTag&co)){n=n.stateNode;break e}}for(var o=e;;){if(o.tag===ro||o.tag===ao)n?i?v(t,o.stateNode,n):h(t,o.stateNode,n):i?d(t,o.stateNode):p(t,o.stateNode);else if(o.tag!==io&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(e){o(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case to:break;case ro:var n=t.stateNode;if(null!=n){var a=t.memoizedProps;e=null!==e?e.memoizedProps:a;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&c(n,o,i,e,a,t)}break;case ao:null===t.stateNode&&r("162"),n=t.memoizedProps,f(t.stateNode,null!==e?e.memoizedProps:n,n);break;case no:case io:break;default:r("163")}},commitLifeCycles:function(e,t){switch(t.tag){case to:var n=t.stateNode;if(t.effectTag&lo)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var a=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(a,e)}t.effectTag&fo&&null!==t.updateQueue&&so(t,t.updateQueue,n);break;case no:e=t.updateQueue,null!==e&&so(t,e,t.child&&t.child.stateNode);break;case ro:n=t.stateNode,null===e&&t.effectTag&lo&&u(n,t.type,t.memoizedProps,t);break;case ao:case io:break;default:r("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case ro:t(g(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}function fe(e){function t(e){return e===yo&&r("174"),e}var n=e.getChildHostContext,a=e.getRootHostContext,i=ho(yo),o=ho(yo),s=ho(yo);return{getHostContext:function(){return t(i.current)},getRootHostContainer:function(){return t(s.current)},popHostContainer:function(e){vo(i,e),vo(o,e),vo(s,e)},popHostContext:function(e){o.current===e&&(vo(i,e),vo(o,e))},pushHostContainer:function(e,t){mo(s,t,e),t=a(t),mo(o,e,e),mo(i,t,e)},pushHostContext:function(e){var r=t(s.current),a=t(i.current);r=n(a,e.type,r),a!==r&&(mo(o,e,e),mo(i,r,e))},resetHostContainer:function(){i.current=yo,s.current=yo}}}function pe(e){function t(e,t){var n=So();n.stateNode=t,n.return=e,n.effectTag=wo,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case go:return o(t,e.type,e.pendingProps);case bo:return s(t,e.pendingProps);default:return!1}}function a(e){for(e=e.return;null!==e&&e.tag!==go&&e.tag!==ko;)e=e.return;h=e}var i=e.shouldSetTextContent,o=e.canHydrateInstance,s=e.canHydrateTextInstance,u=e.getNextHydratableSibling,c=e.getFirstHydratableChild,l=e.hydrateInstance,f=e.hydrateTextInstance,p=e.didNotHydrateInstance,d=e.didNotFindHydratableInstance;if(e=e.didNotFindHydratableTextInstance,!(o&&s&&u&&c&&l&&f&&p&&d&&e))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var h=null,v=null,m=!1;return{enterHydrationState:function(e){return v=c(e.stateNode.containerInfo),h=e,m=!0},resetHydrationState:function(){v=h=null,m=!1},tryToClaimNextHydratableInstance:function(e){if(m){var r=v;if(r){if(!n(e,r)){if(!(r=u(r))||!n(e,r))return e.effectTag|=xo,m=!1,void(h=e);t(h,v)}e.stateNode=r,h=e,v=c(r)}else e.effectTag|=xo,m=!1,h=e}},prepareToHydrateHostInstance:function(e,t,n){return t=l(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return f(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==h)return!1;if(!m)return a(e),m=!0,!1;var n=e.type;if(e.tag!==go||"head"!==n&&"body"!==n&&!i(n,e.memoizedProps))for(n=v;n;)t(e,n),n=u(n);return a(e),v=h?u(e.stateNode):null,!0}}}function de(e){function t(){for(;null!==q&&q.current.pendingWorkPriority===To;){q.isScheduled=!1;var e=q.nextScheduledRoot;if(q.nextScheduledRoot=null,q===$)return $=q=null,K=To,null;q=e}e=q;for(var t=null,n=To;null!==e;)e.current.pendingWorkPriority!==To&&(n===To||n>e.current.pendingWorkPriority)&&(n=e.current.pendingWorkPriority,t=e),e=e.nextScheduledRoot;null!==t?(K=n,_o(),Yo(),x(),z=Io(t.current,n),t!==ae&&(re=0,ae=t)):(K=To,ae=z=null)}function n(n){ee=!0,V=null;var a=n.stateNode;if(a.current===n&&r("177"),K!==Ro&&K!==Do||re++,Eo.current=null,n.effectTag>Lo)if(null!==n.lastEffect){n.lastEffect.nextEffect=n;var i=n.firstEffect}else i=n;else i=n.firstEffect;for(M(),W=i;null!==W;){var o=!1,s=void 0;try{for(;null!==W;){var u=W.effectTag;if(u&zo&&e.resetTextContent(W.stateNode),u&Vo){var c=W.alternate;null!==c&&D(c)}switch(u&~(Ko|Wo|zo|Vo|Lo)){case jo:I(W),W.effectTag&=~jo;break;case Ho:I(W),W.effectTag&=~jo,F(W.alternate,W);break;case Bo:F(W.alternate,W);break;case Uo:te=!0,P(W),te=!1}W=W.nextEffect}}catch(e){o=!0,s=e}o&&(null===W&&r("178"),f(W,s),null!==W&&(W=W.nextEffect))}for(N(),a.current=n,W=i;null!==W;){a=!1,i=void 0;try{for(;null!==W;){var l=W.effectTag;if(l&(Bo|Ko)&&T(W.alternate,W),l&Vo&&R(W),l&Wo)switch(o=W,s=void 0,null!==G&&(s=G.get(o),G.delete(o),null==s&&null!==o.alternate&&(o=o.alternate,s=G.get(o),G.delete(o))),null==s&&r("184"),o.tag){case Go:o.stateNode.componentDidCatch(s.error,{componentStack:s.componentStack});break;case qo:null===X&&(X=s.error);break;default:r("157")}var p=W.nextEffect;W.nextEffect=null,W=p}}catch(e){a=!0,i=e}a&&(null===W&&r("178"),f(W,i),null!==W&&(W=W.nextEffect))}ee=!1,"function"==typeof Fo&&Fo(n.stateNode),Y&&(Y.forEach(y),Y=null),t()}function a(e){for(;;){var t=E(e.alternate,e,K),n=e.return,r=e.sibling,a=e;if(!(a.pendingWorkPriority!==To&&a.pendingWorkPriority>K)){for(var i=Qo(a),o=a.child;null!==o;)i=Po(i,o.pendingWorkPriority),o=o.sibling;a.pendingWorkPriority=i}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),e.effectTag>Lo&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){V=e;break}e=n}return null}function i(e){var t=C(e.alternate,e,K);return null===t&&(t=a(e)),Eo.current=null,t}function o(e){var t=_(e.alternate,e,K);return null===t&&(t=a(e)),Eo.current=null,t}function s(e){l(Mo,e)}function u(){if(null!==G&&0<G.size&&K===Do)for(;null!==z;){var e=z;if(null===(z=null!==G&&(G.has(e)||null!==e.alternate&&G.has(e.alternate))?o(z):i(z))&&(null===V&&r("179"),L=Do,n(V),L=K,null===G||0===G.size||K!==Do))break}}function c(e,a){if(null!==V?(L=Do,n(V),u()):null===z&&t(),!(K===To||K>e)){L=K;e:for(;;){if(K<=Do)for(;null!==z&&!(null===(z=i(z))&&(null===V&&r("179"),L=Do,n(V),L=K,u(),K===To||K>e||K>Do)););else if(null!==a)for(;null!==z&&!B;)if(1<a.timeRemaining()){if(null===(z=i(z)))if(null===V&&r("179"),1<a.timeRemaining()){if(L=Do,n(V),L=K,u(),K===To||K>e||K<Oo)break}else B=!0}else B=!0;switch(K){case Ro:case Do:if(K<=e)continue e;break e;case Oo:case Ao:case Mo:if(null===a)break e;if(!B&&K<=e)continue e;break e;case To:break e;default:r("181")}}}}function l(e,t){j&&r("182"),j=!0;var n=L,a=!1,i=null;try{c(e,t)}catch(e){a=!0,i=e}for(;a;){if(Z){X=i;break}var u=z;if(null===u)Z=!0;else{var l=f(u,i);if(null===l&&r("183"),!Z){try{a=l,i=e,l=t;for(var p=a;null!==u;){switch(u.tag){case Go:Co(u);break;case $o:w(u);break;case qo:k(u);break;case Jo:k(u)}if(u===p||u.alternate===p)break;u=u.return}z=o(a),c(i,l)}catch(e){a=!0,i=e;continue}break}}}if(L=n,null!==t&&(J=!1),K>Do&&!J&&(O(s),J=!0),e=X,Z=B=j=!1,ae=Q=G=X=null,re=0,null!==e)throw e}function f(e,t){var n=Eo.current=null,r=!1,a=!1,i=null;if(e.tag===qo)n=e,d(e)&&(Z=!0);else for(var o=e.return;null!==o&&null===n;){if(o.tag===Go?"function"==typeof o.stateNode.componentDidCatch&&(r=!0,i=p(o),n=o,a=!0):o.tag===qo&&(n=o),d(o)){if(te||null!==Y&&(Y.has(o)||null!==o.alternate&&Y.has(o.alternate)))return null;n=null,a=!1}o=o.return}if(null!==n){null===Q&&(Q=new Set),Q.add(n);var s="";o=e;do{e:switch(o.tag){case pa:case da:case ha:case va:var u=o._debugOwner,c=o._debugSource,l=p(o),f=null;u&&(f=p(u)),u=c,l="\n    in "+(l||"Unknown")+(u?" (at "+u.fileName.replace(/^.*[\\\/]/,"")+":"+u.lineNumber+")":f?" (created by "+f+")":"");break e;default:l=""}s+=l,o=o.return}while(o);o=s,e=p(e),null===G&&(G=new Map),t={componentName:e,componentStack:o,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:i,willRetry:a},G.set(n,t);try{console.error(t.error)}catch(e){console.error(e)}return ee?(null===Y&&(Y=new Set),Y.add(n)):y(n),n}return null===X&&(X=t),null}function d(e){return null!==Q&&(Q.has(e)||null!==e.alternate&&Q.has(e.alternate))}function h(e,t){return v(e,t,!1)}function v(e,t){re>ne&&(Z=!0,r("185")),!j&&t<=K&&(z=null);for(var n=!0;null!==e&&n;){if(n=!1,(e.pendingWorkPriority===To||e.pendingWorkPriority>t)&&(n=!0,e.pendingWorkPriority=t),null!==e.alternate&&(e.alternate.pendingWorkPriority===To||e.alternate.pendingWorkPriority>t)&&(n=!0,e.alternate.pendingWorkPriority=t),null===e.return){if(e.tag!==qo)break;var a=e.stateNode;if(t===To||a.isScheduled||(a.isScheduled=!0,$?$.nextScheduledRoot=a:q=a,$=a),!j)switch(t){case Ro:U?l(Ro,null):l(Do,null);break;case Do:H||r("186");break;default:J||(O(s),J=!0)}}e=e.return}}function m(e,t){var n=L;return n===To&&(n=!A||e.internalContextTag&No||t?Ao:Ro),n===Ro&&(j||H)?Do:n}function y(e){v(e,Do,!0)}var g=fe(e),b=pe(e),k=g.popHostContainer,w=g.popHostContext,x=g.resetHostContainer,S=se(e,g,b,h,m),C=S.beginWork,_=S.beginFailedWork,E=ue(e,g,b).completeWork;g=le(e,f);var I=g.commitPlacement,P=g.commitDeletion,F=g.commitWork,T=g.commitLifeCycles,R=g.commitAttachRef,D=g.commitDetachRef,O=e.scheduleDeferredCallback,A=e.useSyncScheduling,M=e.prepareForCommit,N=e.resetAfterCommit,L=To,j=!1,B=!1,H=!1,U=!1,z=null,K=To,W=null,V=null,q=null,$=null,J=!1,G=null,Q=null,Y=null,X=null,Z=!1,ee=!1,te=!1,ne=1e3,re=0,ae=null;return{scheduleUpdate:h,getPriorityContext:m,batchedUpdates:function(e,t){var n=H;H=!0;try{return e(t)}finally{H=n,j||H||l(Do,null)}},unbatchedUpdates:function(e){var t=U,n=H;U=H,H=!1;try{return e()}finally{H=n,U=t}},flushSync:function(e){var t=H,n=L;H=!0,L=Ro;try{return e()}finally{H=t,L=n,j&&r("187"),l(Do,null)}},deferredUpdates:function(e){var t=L;L=Ao;try{return e()}finally{L=t}}}}function he(){r("196")}function ve(e){return e?(e=Jt.get(e),"number"==typeof e.tag?he(e):e._processChildContext(e._context)):kt}function me(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ye(e,t){var n=me(e);e=0;for(var r;n;){if(n.nodeType===is){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=me(n)}}function ge(){return!os&&mt.canUseDOM&&(os="textContent"in document.documentElement?"textContent":"innerText"),os}function be(){r("211")}function ke(){r("212")}function we(e){if(null==e)return null;if(e.nodeType===fs)return e;var t=Jt.get(e);if(t)return"number"==typeof t.tag?be(t):ke(t);"function"==typeof e.render?r("188"):r("213",Object.keys(e))}function xe(e){if(void 0!==e._hostParent)return e._hostParent;if("number"==typeof e.tag){do{e=e.return}while(e&&e.tag!==ps);if(e)return e}return null}function Se(e,t){for(var n=0,r=e;r;r=xe(r))n++;r=0;for(var a=t;a;a=xe(a))r++;for(;0<n-r;)e=xe(e),n--;for(;0<r-n;)t=xe(t),r--;for(;n--;){if(e===t||e===t.alternate)return e;e=xe(e),t=xe(t)}return null}function Ce(e,t,n){(t=hs(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=_(n._dispatchListeners,t),n._dispatchInstances=_(n._dispatchInstances,e))}function _e(e){e&&e.dispatchConfig.phasedRegistrationNames&&ds.traverseTwoPhase(e._targetInst,Ce,e)}function Ee(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?ds.getParentInstance(t):null,ds.traverseTwoPhase(t,Ce,e)}}function Ie(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=hs(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=_(n._dispatchListeners,t),n._dispatchInstances=_(n._dispatchInstances,e))}function Pe(e){e&&e.dispatchConfig.registrationName&&Ie(e._targetInst,null,e)}function Fe(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var a in e)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?bt.thatReturnsTrue:bt.thatReturnsFalse,this.isPropagationStopped=bt.thatReturnsFalse,this}function Te(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function Re(e){e instanceof this||r("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function De(e){e.eventPool=[],e.getPooled=Te,e.release=Re}function Oe(e,t,n,r){return Fe.call(this,e,t,n,r)}function Ae(e,t,n,r){return Fe.call(this,e,t,n,r)}function Me(e,t){switch(e){case"topKeyUp":return-1!==ws.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Ne(e){return e=e.detail,"object"==typeof e&&"data"in e?e.data:null}function Le(e,t){switch(e){case"topCompositionEnd":return Ne(t);case"topKeyPress":return 32!==t.which?null:(Ts=!0,Ps);case"topTextInput":return e=t.data,e===Ps&&Ts?null:e;default:return null}}function je(e,t){if(Rs)return"topCompositionEnd"===e||!xs&&Me(e,t)?(e=gs.getData(),gs.reset(),Rs=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return Is?null:t.data;default:return null}}function Be(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Os[e.type]:"textarea"===t}function He(e,t,n){return e=Fe.getPooled(As.change,e,t,n),e.type="change",pn.enqueueStateRestore(n),vs.accumulateTwoPhaseDispatches(e),e}function Ue(e){wn.enqueueEvents(e),wn.processEventQueue(!1)}function ze(e){var t=$t.getNodeFromInstance(e);if(Zn.updateValueIfChanged(t))return e}function Ke(e,t){if("topChange"===e)return t}function We(){Ms&&(Ms.detachEvent("onpropertychange",Ve),Ns=Ms=null)}function Ve(e){"value"===e.propertyName&&ze(Ns)&&(e=He(Ns,e,S(e)),hn.batchedUpdates(Ue,e))}function qe(e,t,n){"topFocus"===e?(We(),Ms=t,Ns=n,Ms.attachEvent("onpropertychange",Ve)):"topBlur"===e&&We()}function $e(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return ze(Ns)}function Je(e,t){if("topClick"===e)return ze(t)}function Ge(e,t){if("topInput"===e||"topChange"===e)return ze(t)}function Qe(e,t,n,r){return Fe.call(this,e,t,n,r)}function Ye(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Bs[e])&&!!t[e]}function Xe(){return Ye}function Ze(e,t,n,r){return Fe.call(this,e,t,n,r)}function et(e,t){if(Js||null==Vs||Vs!==Ct())return null;var n=Vs;return"selectionStart"in n&&ls.hasSelectionCapabilities(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,$s&&wt($s,n)?null:($s=n,e=Fe.getPooled(Ws.select,qs,e,t),e.type="select",e.target=Vs,vs.accumulateTwoPhaseDispatches(e),e)}function tt(e,t,n,r){return Fe.call(this,e,t,n,r)}function nt(e,t,n,r){return Fe.call(this,e,t,n,r)}function rt(e,t,n,r){return Fe.call(this,e,t,n,r)}function at(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}function it(e,t,n,r){return Fe.call(this,e,t,n,r)}function ot(e,t,n,r){return Fe.call(this,e,t,n,r)}function st(e,t,n,r){return Fe.call(this,e,t,n,r)}function ut(e,t,n,r){return Fe.call(this,e,t,n,r)}function ct(e,t,n,r){return Fe.call(this,e,t,n,r)}function lt(e){return e[1].toUpperCase()}function ft(e){return!(!e||e.nodeType!==du&&e.nodeType!==mu&&e.nodeType!==yu&&(e.nodeType!==vu||" react-mount-point-unstable "!==e.nodeValue))}function pt(e){return!(!(e=e?e.nodeType===mu?e.documentElement:e.firstChild:null)||e.nodeType!==du||!e.hasAttribute(gu))}function dt(e,t,n,a,i){ft(n)||r("200");var o=n._reactRootContainer;if(o)Mu.updateContainer(t,o,e,i);else{if(!a&&!pt(n))for(a=void 0;a=n.lastChild;)n.removeChild(a);var s=Mu.createContainer(n);o=n._reactRootContainer=s,Mu.unbatchedUpdates(function(){Mu.updateContainer(t,s,e,i)})}return Mu.getPublicRootInstance(o)}function ht(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return ft(t)||r("200"),ga.createPortal(e,t,null,n)}var vt=n(0);n(9);var mt=n(10),yt=n(1),gt=n(11),bt=n(3),kt=n(12),wt=n(13),xt=n(14),St=n(17),Ct=n(18);vt||r("227");var _t,Et,It={Namespaces:{html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},getIntrinsicNamespace:a,getChildNamespace:function(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?a(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}},Pt=null,Ft={},Tt={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){Pt&&r("101"),Pt=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var a=e[t];Ft.hasOwnProperty(t)&&Ft[t]===a||(Ft[t]&&r("102",t),Ft[t]=a,n=!0)}n&&i()}},Rt=Tt,Dt={children:!0,dangerouslySetInnerHTML:!0,autoFocus:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,style:!0},Ot={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=Ot,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},i=e.DOMAttributeNames||{};e=e.DOMMutationMethods||{};for(var o in n){At.properties.hasOwnProperty(o)&&r("48",o);var u=o.toLowerCase(),c=n[o];u={attributeName:u,attributeNamespace:null,propertyName:o,mutationMethod:null,mustUseProperty:s(c,t.MUST_USE_PROPERTY),hasBooleanValue:s(c,t.HAS_BOOLEAN_VALUE),hasNumericValue:s(c,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:s(c,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:s(c,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:s(c,t.HAS_STRING_BOOLEAN_VALUE)},1>=u.hasBooleanValue+u.hasNumericValue+u.hasOverloadedBooleanValue||r("50",o),i.hasOwnProperty(o)&&(u.attributeName=i[o]),a.hasOwnProperty(o)&&(u.attributeNamespace=a[o]),e.hasOwnProperty(o)&&(u.mutationMethod=e[o]),At.properties[o]=u}}},At={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ATTRIBUTE_NAME_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},shouldSetAttribute:function(e,t){if(At.isReservedProp(e)||!("o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return At.shouldAttributeAcceptBooleanValue(e);case"undefined":case"number":case"string":case"object":return!0;default:return!1}},getPropertyInfo:function(e){return At.properties.hasOwnProperty(e)?At.properties[e]:null},shouldAttributeAcceptBooleanValue:function(e){if(At.isReservedProp(e))return!0;var t=At.getPropertyInfo(e);return t?t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:"data-"===(e=e.toLowerCase().slice(0,5))||"aria-"===e},isReservedProp:function(e){return Dt.hasOwnProperty(e)},injection:Ot},Mt=At,Nt={IndeterminateComponent:0,FunctionalComponent:1,ClassComponent:2,HostRoot:3,HostPortal:4,HostComponent:5,HostText:6,CoroutineComponent:7,CoroutineHandlerPhase:8,YieldComponent:9,Fragment:10},Lt={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11},jt=Nt.HostComponent,Bt=Nt.HostText,Ht=Lt.ELEMENT_NODE,Ut=Lt.COMMENT_NODE,zt=Mt.ID_ATTRIBUTE_NAME,Kt={hasCachedChildNodes:1},Wt=Math.random().toString(36).slice(2),Vt="__reactInternalInstance$"+Wt,qt="__reactEventHandlers$"+Wt,$t={getClosestInstanceFromNode:f,getInstanceFromNode:function(e){var t=e[Vt];return t?t.tag===jt||t.tag===Bt?t:t._hostNode===e?t:null:(t=f(e),null!=t&&t._hostNode===e?t:null)},getNodeFromInstance:function(e){if(e.tag===jt||e.tag===Bt)return e.stateNode;if(void 0===e._hostNode&&r("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||r("34"),e=e._hostParent;for(;t.length;e=t.pop())l(e,e._hostNode);return e._hostNode},precacheChildNodes:l,precacheNode:c,uncacheNode:function(e){var t=e._hostNode;t&&(delete t[Vt],e._hostNode=null)},precacheFiberNode:function(e,t){t[Vt]=e},getFiberCurrentPropsFromNode:function(e){return e[qt]||null},updateFiberProps:function(e,t){e[qt]=t}},Jt={remove:function(e){e._reactInternalFiber=void 0},get:function(e){return e._reactInternalFiber},has:function(e){return void 0!==e._reactInternalFiber},set:function(e,t){e._reactInternalFiber=t}},Gt={ReactCurrentOwner:vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner},Qt={NoEffect:0,PerformedWork:1,Placement:2,Update:4,PlacementAndUpdate:6,Deletion:8,ContentReset:16,Callback:32,Err:64,Ref:128},Yt=Nt.HostComponent,Xt=Nt.HostRoot,Zt=Nt.HostPortal,en=Nt.HostText,tn=Qt.NoEffect,nn=Qt.Placement,rn={isFiberMounted:function(e){return 2===d(e)},isMounted:function(e){return!!(e=Jt.get(e))&&2===d(e)},findCurrentFiberUsingSlowPath:v,findCurrentHostFiber:function(e){if(!(e=v(e)))return null;for(var t=e;;){if(t.tag===Yt||t.tag===en)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null},findCurrentHostFiberWithNoPortals:function(e){if(!(e=v(e)))return null;for(var t=e;;){if(t.tag===Yt||t.tag===en)return t;if(t.child&&t.tag!==Zt)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}},an={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!=typeof e.invokeGuardedCallback&&r("197"),m=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,a,i,o,s,u){m.apply(an,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,a,i,o,s,u){if(an.invokeGuardedCallback.apply(this,arguments),an.hasCaughtError()){var c=an.clearCaughtError();an._hasRethrowError||(an._hasRethrowError=!0,an._rethrowError=c)}},rethrowCaughtError:function(){return y.apply(an,arguments)},hasCaughtError:function(){return an._hasCaughtError},clearCaughtError:function(){if(an._hasCaughtError){var e=an._caughtError;return an._caughtError=null,an._hasCaughtError=!1,e}r("198")}},on=an,sn={isEndish:function(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e},isMoveish:function(e){return"topMouseMove"===e||"topTouchMove"===e},isStartish:function(e){return"topMouseDown"===e||"topTouchStart"===e},executeDirectDispatch:function(e){var t=e._dispatchListeners,n=e._dispatchInstances;return Array.isArray(t)&&r("103"),e.currentTarget=t?sn.getNodeFromInstance(n):null,t=t?t(e):null,e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,t},executeDispatchesInOrder:function(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var a=0;a<n.length&&!e.isPropagationStopped();a++)g(e,t,n[a],r[a]);else n&&g(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(e){e:{var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r])){t=n[r];break e}}else if(t&&t(e,n)){t=n;break e}t=null}return e._dispatchInstances=null,e._dispatchListeners=null,t},hasDispatches:function(e){return!!e._dispatchListeners},getFiberCurrentPropsFromNode:function(e){return _t.getFiberCurrentPropsFromNode(e)},getInstanceFromNode:function(e){return _t.getInstanceFromNode(e)},getNodeFromInstance:function(e){return _t.getNodeFromInstance(e)},injection:{injectComponentTree:function(e){_t=e}}},un=sn,cn=null,ln=null,fn=null,pn={injection:{injectFiberControlledHostComponent:function(e){cn=e}},enqueueStateRestore:function(e){ln?fn?fn.push(e):fn=[e]:ln=e},restoreStateIfNeeded:function(){if(ln){var e=ln,t=fn;if(fn=ln=null,b(e),t)for(e=0;e<t.length;e++)b(t[e])}}},dn=!1,hn={batchedUpdates:function(e,t){if(dn)return k(x,e,t);dn=!0;try{return k(x,e,t)}finally{dn=!1,pn.restoreStateIfNeeded()}},injection:{injectStackBatchedUpdates:function(e){k=e},injectFiberBatchedUpdates:function(e){w=e}}},vn=Lt.TEXT_NODE,mn=Nt.HostRoot,yn=[],gn={_enabled:!0,_handleTopLevel:null,setHandleTopLevel:function(e){gn._handleTopLevel=e},setEnabled:function(e){gn._enabled=!!e},isEnabled:function(){return gn._enabled},trapBubbledEvent:function(e,t,n){return n?gt.listen(n,t,gn.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?gt.capture(n,t,gn.dispatchEvent.bind(null,e)):null},dispatchEvent:function(e,t){if(gn._enabled){var n=S(t);if(n=$t.getClosestInstanceFromNode(n),null===n||"number"!=typeof n.tag||rn.isFiberMounted(n)||(n=null),yn.length){var r=yn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{hn.batchedUpdates(C,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>yn.length&&yn.push(e)}}}},bn=gn,kn=null,wn={injection:{injectEventPluginOrder:Rt.injectEventPluginOrder,injectEventPluginsByName:Rt.injectEventPluginsByName},getListener:function(e,t){if("number"==typeof e.tag){var n=e.stateNode;if(!n)return null;var a=un.getFiberCurrentPropsFromNode(n);if(!a)return null;if(n=a[t],T(t,e.type,a))return null}else{if("string"==typeof(a=e._currentElement)||"number"==typeof a||!e._rootNodeID)return null;if(e=a.props,n=e[t],T(t,a.type,e))return null}return n&&"function"!=typeof n&&r("231",t,typeof n),n},extractEvents:function(e,t,n,r){for(var a,i=Rt.plugins,o=0;o<i.length;o++){var s=i[o];s&&(s=s.extractEvents(e,t,n,r))&&(a=_(a,s))}return a},enqueueEvents:function(e){e&&(kn=_(kn,e))},processEventQueue:function(e){var t=kn;kn=null,e?E(t,P):E(t,F),kn&&r("95"),on.rethrowCaughtError()}};mt.canUseDOM&&(Et=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var xn={animationend:D("Animation","AnimationEnd"),animationiteration:D("Animation","AnimationIteration"),animationstart:D("Animation","AnimationStart"),transitionend:D("Transition","TransitionEnd")},Sn={},Cn={};mt.canUseDOM&&(Cn=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var _n={topAbort:"abort",topAnimationEnd:O("animationend")||"animationend",topAnimationIteration:O("animationiteration")||"animationiteration",topAnimationStart:O("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:O("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},En={},In=0,Pn="_reactListenersID"+(""+Math.random()).slice(2),Fn=yt({},{handleTopLevel:function(e,t,n,r){e=wn.extractEvents(e,t,n,r),wn.enqueueEvents(e),wn.processEventQueue(!1)}},{setEnabled:function(e){bn&&bn.setEnabled(e)},isEnabled:function(){return!(!bn||!bn.isEnabled())},listenTo:function(e,t){var n=A(t);e=Rt.registrationNameDependencies[e];for(var r=0;r<e.length;r++){var a=e[r];n.hasOwnProperty(a)&&n[a]||("topWheel"===a?R("wheel")?bn.trapBubbledEvent("topWheel","wheel",t):R("mousewheel")?bn.trapBubbledEvent("topWheel","mousewheel",t):bn.trapBubbledEvent("topWheel","DOMMouseScroll",t):"topScroll"===a?bn.trapCapturedEvent("topScroll","scroll",t):"topFocus"===a||"topBlur"===a?(bn.trapCapturedEvent("topFocus","focus",t),bn.trapCapturedEvent("topBlur","blur",t),n.topBlur=!0,n.topFocus=!0):"topCancel"===a?(R("cancel",!0)&&bn.trapCapturedEvent("topCancel","cancel",t),n.topCancel=!0):"topClose"===a?(R("close",!0)&&bn.trapCapturedEvent("topClose","close",t),n.topClose=!0):_n.hasOwnProperty(a)&&bn.trapBubbledEvent(a,_n[a],t),n[a]=!0)}},isListeningToAllDependencies:function(e,t){t=A(t),e=Rt.registrationNameDependencies[e];for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r)||!t[r])return!1}return!0},trapBubbledEvent:function(e,t,n){return bn.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return bn.trapCapturedEvent(e,t,n)}}),Tn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rn=["Webkit","ms","Moz","O"];Object.keys(Tn).forEach(function(e){Rn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tn[t]=Tn[e]})});var Dn={isUnitlessNumber:Tn,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}},On=Dn.isUnitlessNumber,An=!1;if(mt.canUseDOM){var Mn=document.createElement("div").style;try{Mn.font=""}catch(e){An=!0}}var Nn,Ln={createDangerousStringForStyles:function(){},setValueForStyles:function(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=n,i=t[n];if(a=null==i||"boolean"==typeof i||""===i?"":r||"number"!=typeof i||0===i||On.hasOwnProperty(a)&&On[a]?(""+i).trim():i+"px","float"===n&&(n="cssFloat"),r)e.setProperty(n,a);else if(a)e[n]=a;else if(r=An&&Dn.shorthandPropertyExpansions[n])for(var o in r)e[o]="";else e[n]=""}}},jn=new RegExp("^["+Mt.ATTRIBUTE_NAME_START_CHAR+"]["+Mt.ATTRIBUTE_NAME_CHAR+"]*$"),Bn={},Hn={},Un={setAttributeForID:function(e,t){e.setAttribute(Mt.ID_ATTRIBUTE_NAME,t)},setAttributeForRoot:function(e){e.setAttribute(Mt.ROOT_ATTRIBUTE_NAME,"")},getValueForProperty:function(){},getValueForAttribute:function(){},setValueForProperty:function(e,t,n){var r=Mt.getPropertyInfo(t);if(r&&Mt.shouldSetAttribute(t,n)){var a=r.mutationMethod;a?a(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?Un.deleteValueForProperty(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(a=r.attributeNamespace)?e.setAttributeNS(a,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else Un.setValueForAttribute(e,t,Mt.shouldSetAttribute(t,n)?n:null)},setValueForAttribute:function(e,t,n){M(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=Mt.getPropertyInfo(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}},zn=Un,Kn=Gt.ReactDebugCurrentFrame,Wn={current:null,phase:null,resetCurrentFiber:function(){Kn.getCurrentStack=null,Wn.current=null,Wn.phase=null},setCurrentFiber:function(e,t){Kn.getCurrentStack=N,Wn.current=e,Wn.phase=t},getCurrentFiberOwnerName:function(){return null},getCurrentFiberStackAddendum:N},Vn=Wn,qn={getHostProps:function(e,t){var n=t.value,r=t.checked;return yt({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked})},initWrapperState:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}},updateWrapper:function(e,t){var n=t.checked;null!=n&&zn.setValueForProperty(e,"checked",n||!1),n=t.value,null!=n?0===n&&""===e.value?e.value="0":"number"===t.type?(t=parseFloat(e.value)||0,(n!=t||n==t&&e.value!=n)&&(e.value=""+n)):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))},postMountWrapper:function(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}t=e.name,""!==t&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)},restoreControlledState:function(e,t){qn.updateWrapper(e,t);var n=t.name;if("radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(n=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=$t.getFiberCurrentPropsFromNode(a);i||r("90"),qn.updateWrapper(a,i)}}}}},$n=qn,Jn={validateProps:function(){},postMountWrapper:function(e,t){null!=t.value&&e.setAttribute("value",t.value)},getHostProps:function(e,t){return e=yt({children:void 0},t),(t=L(t.children))&&(e.children=t),e}},Gn={getHostProps:function(e,t){return yt({},t,{value:void 0})},initWrapperState:function(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}},postMountWrapper:function(e,t){e.multiple=!!t.multiple;var n=t.value;null!=n?j(e,!!t.multiple,n):null!=t.defaultValue&&j(e,!!t.multiple,t.defaultValue)},postUpdateWrapper:function(e,t){e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!t.multiple;var r=t.value;null!=r?j(e,!!t.multiple,r):n!==!!t.multiple&&(null!=t.defaultValue?j(e,!!t.multiple,t.defaultValue):j(e,!!t.multiple,t.multiple?[]:""))},restoreControlledState:function(e,t){var n=t.value;null!=n&&j(e,!!t.multiple,n)}},Qn={getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),yt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})},initWrapperState:function(e,t){var n=t.value,a=n;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&r("92"),Array.isArray(t)&&(1>=t.length||r("93"),t=t[0]),n=""+t),null==n&&(n=""),a=n),e._wrapperState={initialValue:""+a}},updateWrapper:function(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)},restoreControlledState:function(e,t){Qn.updateWrapper(e,t)}},Yn=Qn,Xn=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Zn={_getTrackerFromNode:function(e){return e._valueTracker},track:function(e){e._valueTracker||(e._valueTracker=U(e))},updateValueIfChanged:function(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)},stopTracking:function(e){(e=e._valueTracker)&&e.stopTracking()}},er=It.Namespaces,tr=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==er.svg||"innerHTML"in e)e.innerHTML=t;else for(Nn=Nn||document.createElement("div"),Nn.innerHTML="<svg>"+t+"</svg>",t=Nn.firstChild;t.firstChild;)e.appendChild(t.firstChild)}),nr=/["'&<>]/,rr=Lt.TEXT_NODE;mt.canUseDOM&&("textContent"in document.documentElement||(K=function(e,t){if(e.nodeType===rr)e.nodeValue=t;else{if("boolean"==typeof t||"number"==typeof t)t=""+t;else{t=""+t;var n=nr.exec(t);if(n){var r,a="",i=0;for(r=n.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i!==r&&(a+=t.substring(i,r)),i=r+1,a+=n}t=i!==r?a+t.substring(i,r):a}}tr(e,t)}}));var ar=K,ir=(Vn.getCurrentFiberOwnerName,Lt.DOCUMENT_NODE),or=Lt.DOCUMENT_FRAGMENT_NODE,sr=Fn.listenTo,ur=Rt.registrationNameModules,cr=It.Namespaces.html,lr=It.getIntrinsicNamespace,fr={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},pr={createElement:function(e,t,n,r){return n=n.nodeType===ir?n:n.ownerDocument,r===cr&&(r=lr(e)),r===cr?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e},createTextNode:function(e,t){return(t.nodeType===ir?t:t.ownerDocument).createTextNode(e)},setInitialProperties:function(e,t,n,r){var a=z(t,n);switch(t){case"iframe":case"object":Fn.trapBubbledEvent("topLoad","load",e);var i=n;break;case"video":case"audio":for(i in fr)fr.hasOwnProperty(i)&&Fn.trapBubbledEvent(i,fr[i],e);i=n;break;case"source":Fn.trapBubbledEvent("topError","error",e),i=n;break;case"img":case"image":Fn.trapBubbledEvent("topError","error",e),Fn.trapBubbledEvent("topLoad","load",e),i=n;break;case"form":Fn.trapBubbledEvent("topReset","reset",e),Fn.trapBubbledEvent("topSubmit","submit",e),i=n;break;case"details":Fn.trapBubbledEvent("topToggle","toggle",e),i=n;break;case"input":$n.initWrapperState(e,n),i=$n.getHostProps(e,n),Fn.trapBubbledEvent("topInvalid","invalid",e),W(r,"onChange");break;case"option":Jn.validateProps(e,n),i=Jn.getHostProps(e,n);break;case"select":Gn.initWrapperState(e,n),i=Gn.getHostProps(e,n),Fn.trapBubbledEvent("topInvalid","invalid",e),W(r,"onChange");break;case"textarea":Yn.initWrapperState(e,n),i=Yn.getHostProps(e,n),Fn.trapBubbledEvent("topInvalid","invalid",e),W(r,"onChange");break;default:i=n}B(t,i);var o,s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?Ln.setValueForStyles(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&tr(e,u):"children"===o?"string"==typeof u?ar(e,u):"number"==typeof u&&ar(e,""+u):"suppressContentEditableWarning"!==o&&(ur.hasOwnProperty(o)?null!=u&&W(r,o):a?zn.setValueForAttribute(e,o,u):null!=u&&zn.setValueForProperty(e,o,u))}switch(t){case"input":Zn.track(e),$n.postMountWrapper(e,n);break;case"textarea":Zn.track(e),Yn.postMountWrapper(e,n);break;case"option":Jn.postMountWrapper(e,n);break;case"select":Gn.postMountWrapper(e,n);break;default:"function"==typeof i.onClick&&(e.onclick=bt)}},diffProperties:function(e,t,n,r,a){var i=null;switch(t){case"input":n=$n.getHostProps(e,n),r=$n.getHostProps(e,r),i=[];break;case"option":n=Jn.getHostProps(e,n),r=Jn.getHostProps(e,r),i=[];break;case"select":n=Gn.getHostProps(e,n),r=Gn.getHostProps(e,r),i=[];break;case"textarea":n=Yn.getHostProps(e,n),r=Yn.getHostProps(e,r),i=[];break;default:"function"!=typeof n.onClick&&"function"==typeof r.onClick&&(e.onclick=bt)}B(t,r);var o,s;e=null;for(o in n)if(!r.hasOwnProperty(o)&&n.hasOwnProperty(o)&&null!=n[o])if("style"===o)for(s in t=n[o])t.hasOwnProperty(s)&&(e||(e={}),e[s]="");else"dangerouslySetInnerHTML"!==o&&"children"!==o&&"suppressContentEditableWarning"!==o&&(ur.hasOwnProperty(o)?i||(i=[]):(i=i||[]).push(o,null));for(o in r){var u=r[o];if(t=null!=n?n[o]:void 0,r.hasOwnProperty(o)&&u!==t&&(null!=u||null!=t))if("style"===o)if(t){for(s in t)!t.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in u)u.hasOwnProperty(s)&&t[s]!==u[s]&&(e||(e={}),e[s]=u[s])}else e||(i||(i=[]),i.push(o,e)),e=u;else"dangerouslySetInnerHTML"===o?(u=u?u.__html:void 0,t=t?t.__html:void 0,null!=u&&t!==u&&(i=i||[]).push(o,""+u)):"children"===o?t===u||"string"!=typeof u&&"number"!=typeof u||(i=i||[]).push(o,""+u):"suppressContentEditableWarning"!==o&&(ur.hasOwnProperty(o)?(null!=u&&W(a,o),i||t===u||(i=[])):(i=i||[]).push(o,u))}return e&&(i=i||[]).push("style",e),i},updateProperties:function(e,t,n,r,a){z(n,r),r=z(n,a);for(var i=0;i<t.length;i+=2){var o=t[i],s=t[i+1];"style"===o?Ln.setValueForStyles(e,s):"dangerouslySetInnerHTML"===o?tr(e,s):"children"===o?ar(e,s):r?null!=s?zn.setValueForAttribute(e,o,s):zn.deleteValueForAttribute(e,o):null!=s?zn.setValueForProperty(e,o,s):zn.deleteValueForProperty(e,o)}switch(n){case"input":$n.updateWrapper(e,a),Zn.updateValueIfChanged(e);break;case"textarea":Yn.updateWrapper(e,a);break;case"select":Gn.postUpdateWrapper(e,a)}},diffHydratedProperties:function(e,t,n,r,a){switch(t){case"iframe":case"object":Fn.trapBubbledEvent("topLoad","load",e);break;case"video":case"audio":for(var i in fr)fr.hasOwnProperty(i)&&Fn.trapBubbledEvent(i,fr[i],e);break;case"source":Fn.trapBubbledEvent("topError","error",e);break;case"img":case"image":Fn.trapBubbledEvent("topError","error",e),Fn.trapBubbledEvent("topLoad","load",e);break;case"form":Fn.trapBubbledEvent("topReset","reset",e),Fn.trapBubbledEvent("topSubmit","submit",e);break;case"details":Fn.trapBubbledEvent("topToggle","toggle",e);break;case"input":$n.initWrapperState(e,n),Fn.trapBubbledEvent("topInvalid","invalid",e),W(a,"onChange");break;case"option":Jn.validateProps(e,n);break;case"select":Gn.initWrapperState(e,n),Fn.trapBubbledEvent("topInvalid","invalid",e),W(a,"onChange");break;case"textarea":Yn.initWrapperState(e,n),Fn.trapBubbledEvent("topInvalid","invalid",e),W(a,"onChange")}B(t,n),r=null;for(var o in n)n.hasOwnProperty(o)&&(i=n[o],"children"===o?"string"==typeof i?e.textContent!==i&&(r=["children",i]):"number"==typeof i&&e.textContent!==""+i&&(r=["children",""+i]):ur.hasOwnProperty(o)&&null!=i&&W(a,o));switch(t){case"input":Zn.track(e),$n.postMountWrapper(e,n);break;case"textarea":Zn.track(e),Yn.postMountWrapper(e,n);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=bt)}return r},diffHydratedText:function(e,t){return e.nodeValue!==t},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":$n.restoreControlledState(e,n);break;case"textarea":Yn.restoreControlledState(e,n);break;case"select":Gn.restoreControlledState(e,n)}}},dr=void 0;if(mt.canUseDOM)if("function"!=typeof requestIdleCallback){var hr=null,vr=null,mr=!1,yr=!1,gr=0,br=33,kr=33,wr={timeRemaining:"object"==typeof performance&&"function"==typeof performance.now?function(){return gr-performance.now()}:function(){return gr-Date.now()}},xr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){e.source===window&&e.data===xr&&(mr=!1,e=vr,vr=null,null!==e&&e(wr))},!1);var Sr=function(e){yr=!1;var t=e-gr+kr;t<kr&&br<kr?(8>t&&(t=8),kr=t<br?br:t):br=t,gr=e+kr,mr||(mr=!0,window.postMessage(xr,"*")),t=hr,hr=null,null!==t&&t(e)};dr=function(e){return vr=e,yr||(yr=!0,requestAnimationFrame(Sr)),0}}else dr=requestIdleCallback;else dr=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})}),0};var Cr,_r,Er={rIC:dr},Ir={enableAsyncSubtreeAPI:!0},Pr={NoWork:0,SynchronousPriority:1,TaskPriority:2,HighPriority:3,LowPriority:4,OffscreenPriority:5},Fr=Qt.Callback,Tr=Pr.NoWork,Rr=Pr.SynchronousPriority,Dr=Pr.TaskPriority,Or=Nt.ClassComponent,Ar=Nt.HostRoot,Mr=void 0,Nr=void 0,Lr={addUpdate:function(e,t,n,r){G(e,{priorityLevel:r,partialState:t,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:!1,next:null})},addReplaceUpdate:function(e,t,n,r){G(e,{priorityLevel:r,partialState:t,callback:n,isReplace:!0,isForced:!1,isTopLevelUnmount:!1,next:null})},addForceUpdate:function(e,t,n){G(e,{priorityLevel:n,partialState:null,callback:t,isReplace:!1,isForced:!0,isTopLevelUnmount:!1,next:null})},getUpdatePriority:function(e){var t=e.updateQueue;return null===t||e.tag!==Or&&e.tag!==Ar?Tr:null!==t.first?t.first.priorityLevel:Tr},addTopLevelUpdate:function(e,t,n,r){var a=null===t.element;t={priorityLevel:r,partialState:t,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:a,next:null},e=G(e,t),a&&(a=Mr,n=Nr,null!==a&&null!==t.next&&(t.next=null,a.last=t),null!==n&&null!==e&&null!==e.next&&(e.next=null,n.last=t))},beginUpdateQueue:function(e,t,n,r,a,i,o){null!==e&&e.updateQueue===n&&(n=t.updateQueue={first:n.first,last:n.last,callbackList:null,hasForceUpdate:!1}),e=n.callbackList;for(var s=n.hasForceUpdate,u=!0,c=n.first;null!==c&&0>=V(c.priorityLevel,o);){n.first=c.next,null===n.first&&(n.last=null);var l;c.isReplace?(a=Q(c,r,a,i),u=!0):(l=Q(c,r,a,i))&&(a=u?yt({},a,l):yt(a,l),u=!1),c.isForced&&(s=!0),null===c.callback||c.isTopLevelUnmount&&null!==c.next||(e=null!==e?e:[],e.push(c.callback),t.effectTag|=Fr),c=c.next}return n.callbackList=e,n.hasForceUpdate=s,null!==n.first||null!==e||s||(t.updateQueue=null),a},commitCallbacks:function(e,t,n){if(null!==(e=t.callbackList))for(t.callbackList=null,t=0;t<e.length;t++){var a=e[t];"function"!=typeof a&&r("191",a),a.call(n)}}},jr=[],Br=-1,Hr={createCursor:function(e){return{current:e}},isEmpty:function(){return-1===Br},pop:function(e){0>Br||(e.current=jr[Br],jr[Br]=null,Br--)},push:function(e,t){Br++,jr[Br]=e.current,e.current=t},reset:function(){for(;-1<Br;)jr[Br]=null,Br--}},Ur=rn.isFiberMounted,zr=Nt.ClassComponent,Kr=Nt.HostRoot,Wr=Hr.createCursor,Vr=Hr.pop,qr=Hr.push,$r=Wr(kt),Jr=Wr(!1),Gr=kt,Qr={getUnmaskedContext:function(e){return X(e)?Gr:$r.current},cacheContext:Y,getMaskedContext:function(e,t){var n=e.type.contextTypes;if(!n)return kt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&Y(e,t,i),i},hasContextChanged:function(){return Jr.current},isContextConsumer:function(e){return e.tag===zr&&null!=e.type.contextTypes},isContextProvider:X,popContextProvider:function(e){X(e)&&(Vr(Jr,e),Vr($r,e))},popTopLevelContextObject:function(e){Vr(Jr,e),Vr($r,e)},pushTopLevelContextObject:function(e,t,n){null!=$r.cursor&&r("168"),qr($r,t,e),qr(Jr,n,e)},processChildContext:Z,pushContextProvider:function(e){if(!X(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||kt,Gr=$r.current,qr($r,t,e),qr(Jr,Jr.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||r("169"),t){var a=Z(e,Gr);n.__reactInternalMemoizedMergedChildContext=a,Vr(Jr,e),Vr($r,e),qr($r,a,e)}else Vr(Jr,e);qr(Jr,t,e)},resetContext:function(){Gr=kt,$r.current=kt,Jr.current=!1},findCurrentUnmaskedContext:function(e){for(Ur(e)&&e.tag===zr?void 0:r("170");e.tag!==Kr;){if(X(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||r("171")}return e.stateNode.context}},Yr={NoContext:0,AsyncUpdates:1},Xr=Nt.IndeterminateComponent,Zr=Nt.ClassComponent,ea=Nt.HostRoot,ta=Nt.HostComponent,na=Nt.HostText,ra=Nt.HostPortal,aa=Nt.CoroutineComponent,ia=Nt.YieldComponent,oa=Nt.Fragment,sa=Pr.NoWork,ua=Yr.NoContext,ca=Qt.NoEffect,la={createWorkInProgress:function(e,t){var n=e.alternate;return null===n?(n=new ee(e.tag,e.key,e.internalContextTag),n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.effectTag=ca,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.pendingWorkPriority=t,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n},createHostRootFiber:function(){return new ee(ea,null,ua)},createFiberFromElement:function(e,t,n){return t=te(e.type,e.key,t),t.pendingProps=e.props,t.pendingWorkPriority=n,t},createFiberFromFragment:function(e,t,n){return t=new ee(oa,null,t),t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromText:function(e,t,n){return t=new ee(na,null,t),t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromElementType:te,createFiberFromHostInstanceForDeletion:function(){var e=new ee(ta,null,ua);return e.type="DELETED",e},createFiberFromCoroutine:function(e,t,n){return t=new ee(aa,e.key,t),t.type=e.handler,t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromYield:function(e,t){return new ee(ia,null,t)},createFiberFromPortal:function(e,t,n){return t=new ee(ra,e.key,t),t.pendingProps=e.children||[],t.pendingWorkPriority=n,t.stateNode={containerInfo:e.containerInfo,implementation:e.implementation},t},largerPriority:function(e,t){return e!==sa&&(t===sa||t>e)?e:t}},fa=la.createHostRootFiber,pa=Nt.IndeterminateComponent,da=Nt.FunctionalComponent,ha=Nt.ClassComponent,va=Nt.HostComponent;"function"==typeof Symbol&&Symbol.for?(Cr=Symbol.for("react.coroutine"),_r=Symbol.for("react.yield")):(Cr=60104,_r=60105);var ma={createCoroutine:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Cr,key:null==r?null:""+r,children:e,handler:t,props:n}},createYield:function(e){return{$$typeof:_r,value:e}},isCoroutine:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Cr},isYield:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===_r},REACT_YIELD_TYPE:_r,REACT_COROUTINE_TYPE:Cr},ya="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.portal")||60106,ga={createPortal:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ya,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},isPortal:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ya},REACT_PORTAL_TYPE:ya},ba=ma.REACT_COROUTINE_TYPE,ka=ma.REACT_YIELD_TYPE,wa=ga.REACT_PORTAL_TYPE,xa=la.createWorkInProgress,Sa=la.createFiberFromElement,Ca=la.createFiberFromFragment,_a=la.createFiberFromText,Ea=la.createFiberFromCoroutine,Ia=la.createFiberFromYield,Pa=la.createFiberFromPortal,Fa=Array.isArray,Ta=Nt.FunctionalComponent,Ra=Nt.ClassComponent,Da=Nt.HostText,Oa=Nt.HostPortal,Aa=Nt.CoroutineComponent,Ma=Nt.YieldComponent,Na=Nt.Fragment,La=Qt.NoEffect,ja=Qt.Placement,Ba=Qt.Deletion,Ha="function"==typeof Symbol&&Symbol.iterator,Ua="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,za=ie(!0,!0),Ka=ie(!1,!0),Wa=ie(!1,!1),Va={reconcileChildFibers:za,reconcileChildFibersInPlace:Ka,mountChildFibersInPlace:Wa,cloneChildFibers:function(e,t){if(null!==e&&t.child!==e.child&&r("153"),null!==t.child){e=t.child;var n=xa(e,e.pendingWorkPriority);for(n.pendingProps=e.pendingProps,t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=xa(e,e.pendingWorkPriority),n.pendingProps=e.pendingProps,n.return=t;n.sibling=null}}},qa=Qt.Update,$a=Yr.AsyncUpdates,Ja=Qr.cacheContext,Ga=Qr.getMaskedContext,Qa=Qr.getUnmaskedContext,Ya=Qr.isContextConsumer,Xa=Lr.addUpdate,Za=Lr.addReplaceUpdate,ei=Lr.addForceUpdate,ti=Lr.beginUpdateQueue,ni=Qr.hasContextChanged,ri=rn.isMounted,ai=Va.mountChildFibersInPlace,ii=Va.reconcileChildFibers,oi=Va.reconcileChildFibersInPlace,si=Va.cloneChildFibers,ui=Lr.beginUpdateQueue,ci=Qr.getMaskedContext,li=Qr.getUnmaskedContext,fi=Qr.hasContextChanged,pi=Qr.pushContextProvider,di=Qr.pushTopLevelContextObject,hi=Qr.invalidateContextProvider,vi=Nt.IndeterminateComponent,mi=Nt.FunctionalComponent,yi=Nt.ClassComponent,gi=Nt.HostRoot,bi=Nt.HostComponent,ki=Nt.HostText,wi=Nt.HostPortal,xi=Nt.CoroutineComponent,Si=Nt.CoroutineHandlerPhase,Ci=Nt.YieldComponent,_i=Nt.Fragment,Ei=Pr.NoWork,Ii=Pr.OffscreenPriority,Pi=Qt.PerformedWork,Fi=Qt.Placement,Ti=Qt.ContentReset,Ri=Qt.Err,Di=Qt.Ref,Oi=Gt.ReactCurrentOwner,Ai=Va.reconcileChildFibers,Mi=Qr.popContextProvider,Ni=Qr.popTopLevelContextObject,Li=Nt.IndeterminateComponent,ji=Nt.FunctionalComponent,Bi=Nt.ClassComponent,Hi=Nt.HostRoot,Ui=Nt.HostComponent,zi=Nt.HostText,Ki=Nt.HostPortal,Wi=Nt.CoroutineComponent,Vi=Nt.CoroutineHandlerPhase,qi=Nt.YieldComponent,$i=Nt.Fragment,Ji=Qt.Placement,Gi=Qt.Ref,Qi=Qt.Update,Yi=Pr.OffscreenPriority,Xi=null,Zi=null,eo={injectInternals:function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.supportsFiber)return!0;try{var n=t.inject(e);Xi=ce(function(e){return t.onCommitFiberRoot(n,e)}),Zi=ce(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0},onCommitRoot:function(e){"function"==typeof Xi&&Xi(e)},onCommitUnmount:function(e){"function"==typeof Zi&&Zi(e)}},to=Nt.ClassComponent,no=Nt.HostRoot,ro=Nt.HostComponent,ao=Nt.HostText,io=Nt.HostPortal,oo=Nt.CoroutineComponent,so=Lr.commitCallbacks,uo=eo.onCommitUnmount,co=Qt.Placement,lo=Qt.Update,fo=Qt.Callback,po=Qt.ContentReset,ho=Hr.createCursor,vo=Hr.pop,mo=Hr.push,yo={},go=Nt.HostComponent,bo=Nt.HostText,ko=Nt.HostRoot,wo=Qt.Deletion,xo=Qt.Placement,So=la.createFiberFromHostInstanceForDeletion,Co=Qr.popContextProvider,_o=Hr.reset,Eo=Gt.ReactCurrentOwner,Io=la.createWorkInProgress,Po=la.largerPriority,Fo=eo.onCommitRoot,To=Pr.NoWork,Ro=Pr.SynchronousPriority,Do=Pr.TaskPriority,Oo=Pr.HighPriority,Ao=Pr.LowPriority,Mo=Pr.OffscreenPriority,No=Yr.AsyncUpdates,Lo=Qt.PerformedWork,jo=Qt.Placement,Bo=Qt.Update,Ho=Qt.PlacementAndUpdate,Uo=Qt.Deletion,zo=Qt.ContentReset,Ko=Qt.Callback,Wo=Qt.Err,Vo=Qt.Ref,qo=Nt.HostRoot,$o=Nt.HostComponent,Jo=Nt.HostPortal,Go=Nt.ClassComponent,Qo=Lr.getUpdatePriority,Yo=Qr.resetContext;ve._injectFiber=function(e){he=e};var Xo=Lr.addTopLevelUpdate,Zo=Qr.findCurrentUnmaskedContext,es=Qr.isContextProvider,ts=Qr.processChildContext,ns=Nt.HostComponent,rs=rn.findCurrentHostFiber,as=rn.findCurrentHostFiberWithNoPortals;ve._injectFiber(function(e){var t=Zo(e);return es(e)?ts(e,t,!1):t});var is=Lt.TEXT_NODE,os=null,ss={getOffsets:function(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,a=t.focusNode,i=t.focusOffset,o=t.getRangeAt(0);try{o.startContainer.nodeType,o.endContainer.nodeType}catch(e){return null}t=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset?0:o.toString().length;var s=o.cloneRange();return s.selectNodeContents(e),s.setEnd(o.startContainer,o.startOffset),e=s.startContainer===s.endContainer&&s.startOffset===s.endOffset?0:s.toString().length,o=e+t,t=document.createRange(),t.setStart(n,r),t.setEnd(a,i),n=t.collapsed,{start:n?o:e,end:n?e:o}},setOffsets:function(e,t){if(window.getSelection){var n=window.getSelection(),r=e[ge()].length,a=Math.min(t.start,r);if(t=void 0===t.end?a:Math.min(t.end,r),!n.extend&&a>t&&(r=t,t=a,a=r),r=ye(e,a),e=ye(e,t),r&&e){var i=document.createRange();i.setStart(r.node,r.offset),n.removeAllRanges(),a>t?(n.addRange(i),n.extend(e.node,e.offset)):(i.setEnd(e.node,e.offset),n.addRange(i))}}}},us=Lt.ELEMENT_NODE,cs={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=Ct();return{focusedElem:e,selectionRange:cs.hasSelectionCapabilities(e)?cs.getSelection(e):null}},restoreSelection:function(e){var t=Ct(),n=e.focusedElem;if(e=e.selectionRange,t!==n&&xt(document.documentElement,n)){for(cs.hasSelectionCapabilities(n)&&cs.setSelection(n,e),t=[],e=n;e=e.parentNode;)e.nodeType===us&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(St(n),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}},getSelection:function(e){return("selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:ss.getOffsets(e))||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n),"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):ss.setOffsets(e,t)}},ls=cs,fs=Lt.ELEMENT_NODE;we._injectFiber=function(e){be=e},we._injectStack=function(e){ke=e};var ps=Nt.HostComponent,ds={isAncestor:function(e,t){for(;t;){if(e===t||e===t.alternate)return!0;t=xe(t)}return!1},getLowestCommonAncestor:Se,getParentInstance:function(e){return xe(e)},traverseTwoPhase:function(e,t,n){for(var r=[];e;)r.push(e),e=xe(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)},traverseEnterLeave:function(e,t,n,r,a){for(var i=e&&t?Se(e,t):null,o=[];e&&e!==i;)o.push(e),e=xe(e);for(e=[];t&&t!==i;)e.push(t),t=xe(t);for(t=0;t<o.length;t++)n(o[t],"bubbled",r);for(t=e.length;0<t--;)n(e[t],"captured",a)}},hs=wn.getListener,vs={accumulateTwoPhaseDispatches:function(e){E(e,_e)},accumulateTwoPhaseDispatchesSkipTarget:function(e){E(e,Ee)},accumulateDirectDispatches:function(e){E(e,Pe)},accumulateEnterLeaveDispatches:function(e,t,n,r){ds.traverseEnterLeave(n,r,Ie,e,t)}},ms={_root:null,_startText:null,_fallbackText:null},ys={initialize:function(e){return ms._root=e,ms._startText=ys.getText(),!0},reset:function(){ms._root=null,ms._startText=null,ms._fallbackText=null},getData:function(){if(ms._fallbackText)return ms._fallbackText;var e,t,n=ms._startText,r=n.length,a=ys.getText(),i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return ms._fallbackText=a.slice(e,1<t?1-t:void 0),ms._fallbackText},getText:function(){return"value"in ms._root?ms._root.value:ms._root[ge()]}},gs=ys,bs="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),ks={type:null,target:null,currentTarget:bt.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};yt(Fe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=bt.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=bt.thatReturnsTrue)},persist:function(){this.isPersistent=bt.thatReturnsTrue},isPersistent:bt.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<bs.length;t++)this[bs[t]]=null}}),Fe.Interface=ks,Fe.augmentClass=function(e,t){function n(){}n.prototype=this.prototype;var r=new n;yt(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=yt({},this.Interface,t),e.augmentClass=this.augmentClass,De(e)},De(Fe),Fe.augmentClass(Oe,{data:null}),Fe.augmentClass(Ae,{data:null});var ws=[9,13,27,32],xs=mt.canUseDOM&&"CompositionEvent"in window,Ss=null;mt.canUseDOM&&"documentMode"in document&&(Ss=document.documentMode);var Cs;if(Cs=mt.canUseDOM&&"TextEvent"in window&&!Ss){var _s=window.opera;Cs=!("object"==typeof _s&&"function"==typeof _s.version&&12>=parseInt(_s.version(),10))}var Es=Cs,Is=mt.canUseDOM&&(!xs||Ss&&8<Ss&&11>=Ss),Ps=String.fromCharCode(32),Fs={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Ts=!1,Rs=!1,Ds={eventTypes:Fs,extractEvents:function(e,t,n,r){var a;if(xs)e:{switch(e){case"topCompositionStart":var i=Fs.compositionStart;break e;case"topCompositionEnd":i=Fs.compositionEnd;break e;case"topCompositionUpdate":i=Fs.compositionUpdate;break e}i=void 0}else Rs?Me(e,n)&&(i=Fs.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(i=Fs.compositionStart);return i?(Is&&(Rs||i!==Fs.compositionStart?i===Fs.compositionEnd&&Rs&&(a=gs.getData()):Rs=gs.initialize(r)),i=Oe.getPooled(i,t,n,r),a?i.data=a:null!==(a=Ne(n))&&(i.data=a),vs.accumulateTwoPhaseDispatches(i),a=i):a=null,(e=Es?Le(e,n):je(e,n))?(t=Ae.getPooled(Fs.beforeInput,t,n,r),t.data=e,vs.accumulateTwoPhaseDispatches(t)):t=null,[a,t]}},Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},As={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Ms=null,Ns=null,Ls=!1;mt.canUseDOM&&(Ls=R("input")&&(!document.documentMode||9<document.documentMode));var js={eventTypes:As,_isInputEventSupported:Ls,extractEvents:function(e,t,n,r){var a=t?$t.getNodeFromInstance(t):window,i=a.nodeName&&a.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===a.type)var o=Ke;else if(Be(a))if(Ls)o=Ge;else{o=$e;var s=qe}else!(i=a.nodeName)||"input"!==i.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type||(o=Je);if(o&&(o=o(e,t)))return He(o,n,r);s&&s(e,a,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||a._wrapperState)&&e.controlled&&"number"===a.type&&(e=""+a.value,a.getAttribute("value")!==e&&a.setAttribute("value",e))}};Fe.augmentClass(Qe,{view:function(e){return e.view?e.view:(e=S(e),e.window===e?e:(e=e.ownerDocument)?e.defaultView||e.parentWindow:window)},detail:function(e){return e.detail||0}});var Bs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};Qe.augmentClass(Ze,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Xe,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var Hs={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Us={eventTypes:Hs,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?$t.getClosestInstanceFromNode(t):null):e=null,e===t)return null;var i=null==e?a:$t.getNodeFromInstance(e);a=null==t?a:$t.getNodeFromInstance(t);var o=Ze.getPooled(Hs.mouseLeave,e,n,r);return o.type="mouseleave",o.target=i,o.relatedTarget=a,n=Ze.getPooled(Hs.mouseEnter,t,n,r),n.type="mouseenter",n.target=a,n.relatedTarget=i,vs.accumulateEnterLeaveDispatches(o,n,e,t),[o,n]}},zs=Lt.DOCUMENT_NODE,Ks=mt.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Ws={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},Vs=null,qs=null,$s=null,Js=!1,Gs=Fn.isListeningToAllDependencies,Qs={eventTypes:Ws,extractEvents:function(e,t,n,r){var a=r.window===r?r.document:r.nodeType===zs?r:r.ownerDocument;if(!a||!Gs("onSelect",a))return null;switch(a=t?$t.getNodeFromInstance(t):window,e){case"topFocus":(Be(a)||"true"===a.contentEditable)&&(Vs=a,qs=t,$s=null);break;case"topBlur":$s=qs=Vs=null;break;case"topMouseDown":Js=!0;break;case"topContextMenu":case"topMouseUp":return Js=!1,et(n,r);case"topSelectionChange":if(Ks)break;case"topKeyDown":case"topKeyUp":return et(n,r)}return null}};Fe.augmentClass(tt,{animationName:null,elapsedTime:null,pseudoElement:null}),Fe.augmentClass(nt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qe.augmentClass(rt,{relatedTarget:null});var Ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};Qe.augmentClass(it,{key:function(e){if(e.key){var t=Ys[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=at(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Xs[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Xe,charCode:function(e){return"keypress"===e.type?at(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?at(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ze.augmentClass(ot,{dataTransfer:null}),Qe.augmentClass(st,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Xe}),Fe.augmentClass(ut,{propertyName:null,elapsedTime:null,pseudoElement:null}),Ze.augmentClass(ct,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var Zs={},eu={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;t="top"+t,n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t]},Zs[e]=n,eu[t]=n});var tu={eventTypes:Zs,extractEvents:function(e,t,n,a){var i=eu[e];if(!i)return null;switch(e){case"topAbort":case"topCancel":case"topCanPlay":case"topCanPlayThrough":case"topClose":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topToggle":case"topVolumeChange":case"topWaiting":var o=Fe;break;case"topKeyPress":if(0===at(n))return null;case"topKeyDown":case"topKeyUp":o=it;break;case"topBlur":case"topFocus":o=rt;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":o=Ze;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":o=ot;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":o=st;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":o=tt;break;case"topTransitionEnd":o=ut;break;case"topScroll":o=Qe;break;case"topWheel":o=ct;break;case"topCopy":case"topCut":case"topPaste":o=nt}return o||r("86",e),e=o.getPooled(i,t,n,a),vs.accumulateTwoPhaseDispatches(e),e}};bn.setHandleTopLevel(Fn.handleTopLevel),wn.injection.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),un.injection.injectComponentTree($t),wn.injection.injectEventPluginsByName({SimpleEventPlugin:tu,EnterLeaveEventPlugin:Us,ChangeEventPlugin:js,SelectEventPlugin:Qs,BeforeInputEventPlugin:Ds});var nu=Mt.injection.MUST_USE_PROPERTY,ru=Mt.injection.HAS_BOOLEAN_VALUE,au=Mt.injection.HAS_NUMERIC_VALUE,iu=Mt.injection.HAS_POSITIVE_NUMERIC_VALUE,ou=Mt.injection.HAS_STRING_BOOLEAN_VALUE,su={Properties:{allowFullScreen:ru,allowTransparency:ou,async:ru,autoPlay:ru,capture:ru,checked:nu|ru,cols:iu,contentEditable:ou,controls:ru,default:ru,defer:ru,disabled:ru,download:Mt.injection.HAS_OVERLOADED_BOOLEAN_VALUE,draggable:ou,formNoValidate:ru,hidden:ru,loop:ru,multiple:nu|ru,muted:nu|ru,noValidate:ru,open:ru,playsInline:ru,readOnly:ru,required:ru,reversed:ru,rows:iu,rowSpan:au,scoped:ru,seamless:ru,selected:nu|ru,size:iu,start:au,span:iu,spellCheck:ou,style:0,itemScope:ru,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:ou},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},uu=Mt.injection.HAS_STRING_BOOLEAN_VALUE,cu={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},lu={Properties:{autoReverse:uu,externalResourcesRequired:uu,preserveAlpha:uu},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:cu.xlink,xlinkArcrole:cu.xlink,xlinkHref:cu.xlink,xlinkRole:cu.xlink,xlinkShow:cu.xlink,xlinkTitle:cu.xlink,xlinkType:cu.xlink,xmlBase:cu.xml,xmlLang:cu.xml,xmlSpace:cu.xml}},fu=/[\-\:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(fu,lt);lu.Properties[t]=0,lu.DOMAttributeNames[t]=e}),Mt.injection.injectDOMPropertyConfig(su),Mt.injection.injectDOMPropertyConfig(lu);var pu=eo.injectInternals,du=Lt.ELEMENT_NODE,hu=Lt.TEXT_NODE,vu=Lt.COMMENT_NODE,mu=Lt.DOCUMENT_NODE,yu=Lt.DOCUMENT_FRAGMENT_NODE,gu=Mt.ROOT_ATTRIBUTE_NAME,bu=It.getChildNamespace,ku=pr.createElement,wu=pr.createTextNode,xu=pr.setInitialProperties,Su=pr.diffProperties,Cu=pr.updateProperties,_u=pr.diffHydratedProperties,Eu=pr.diffHydratedText,Iu=pr.warnForDeletedHydratableElement,Pu=pr.warnForDeletedHydratableText,Fu=pr.warnForInsertedHydratedElement,Tu=pr.warnForInsertedHydratedText,Ru=$t.precacheFiberNode,Du=$t.updateFiberProps;pn.injection.injectFiberControlledHostComponent(pr),we._injectFiber(function(e){return Mu.findHostInstance(e)});var Ou=null,Au=null,Mu=function(e){var t=e.getPublicInstance;e=de(e);var n=e.scheduleUpdate,r=e.getPriorityContext;return{createContainer:function(e){var t=fa();return e={current:t,containerInfo:e,isScheduled:!1,nextScheduledRoot:null,context:null,pendingContext:null},t.stateNode=e},updateContainer:function(e,t,a,i){var o=t.current;a=ve(a),null===t.context?t.context=a:t.pendingContext=a,t=i,i=r(o,Ir.enableAsyncSubtreeAPI&&null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent),e={element:e},Xo(o,e,void 0===t?null:t,i),n(o,i)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case ns:return t(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:function(e){return e=rs(e),null===e?null:e.stateNode},findHostInstanceWithNoPortals:function(e){return e=as(e),null===e?null:e.stateNode}}}({getRootHostContext:function(e){if(e.nodeType===mu)e=(e=e.documentElement)?e.namespaceURI:bu(null,"");else{var t=e.nodeType===vu?e.parentNode:e;e=t.namespaceURI||null,t=t.tagName,e=bu(e,t)}return e},getChildHostContext:function(e,t){return bu(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){Ou=Fn.isEnabled(),Au=ls.getSelectionInformation(),Fn.setEnabled(!1)},resetAfterCommit:function(){ls.restoreSelection(Au),Au=null,Fn.setEnabled(Ou),Ou=null},createInstance:function(e,t,n,r,a){return e=ku(e,t,n,r),Ru(a,e),Du(e,t),e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){xu(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,a){return Su(e,t,n,r,a)},commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,a){Du(e,a),Cu(e,t,n,r,a)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},resetTextContent:function(e){e.textContent=""},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return e=wu(e,t),Ru(r,e),e},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){e.nodeType===vu?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){e.nodeType===vu?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){e.nodeType===vu?e.parentNode.removeChild(t):e.removeChild(t)},canHydrateInstance:function(e,t){return e.nodeType===du&&t===e.nodeName.toLowerCase()},canHydrateTextInstance:function(e,t){return""!==t&&e.nodeType===hu},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&e.nodeType!==du&&e.nodeType!==hu;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&e.nodeType!==du&&e.nodeType!==hu;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,a,i){return Ru(i,e),Du(e,n),_u(e,t,n,a,r)},hydrateTextInstance:function(e,t,n){return Ru(n,e),Eu(e,t)},didNotHydrateInstance:function(e,t){1===t.nodeType?Iu(e,t):Pu(e,t)},didNotFindHydratableInstance:function(e,t,n){Fu(e,t,n)},didNotFindHydratableTextInstance:function(e,t){Tu(e,t)},scheduleDeferredCallback:Er.rIC,useSyncScheduling:!0});hn.injection.injectFiberBatchedUpdates(Mu.batchedUpdates);var Nu={createPortal:ht,hydrate:function(e,t,n){return dt(null,e,t,!0,n)},render:function(e,t,n){return dt(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,a){return null!=e&&Jt.has(e)||r("38"),dt(e,t,n,!1,a)},unmountComponentAtNode:function(e){return ft(e)||r("40"),!!e._reactRootContainer&&(Mu.unbatchedUpdates(function(){dt(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},findDOMNode:we,unstable_createPortal:ht,unstable_batchedUpdates:hn.batchedUpdates,unstable_deferredUpdates:Mu.deferredUpdates,flushSync:Mu.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:wn,EventPluginRegistry:Rt,EventPropagators:vs,ReactControlledComponent:pn,ReactDOMComponentTree:$t,ReactDOMEventListener:bn}};pu({findFiberByHostInstance:$t.getClosestInstanceFromNode,findHostInstanceByFiber:Mu.findHostInstance,bundleType:0,version:"16.0.1",rendererPackageName:"react-dom"}),e.exports=Nu},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,u){if(a(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,u],f=0;c=new Error(t.replace(/%s/g,function(){return l[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var a=function(e){};e.exports=r},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=a},function(e,t,n){"use strict";var r=n(3),a={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=a},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function a(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var o=0;o<n.length;o++)if(!i.call(t,n[o])||!r(e[n[o]],t[n[o]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=a},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!a(e)&&(a(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var a=n(15);e.exports=r},function(e,t,n){"use strict";function r(e){return a(e)&&3==e.nodeType}var a=n(16);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}e.exports=r},function(e,t,n){"use strict";function r(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return v});var p=n(0),d=n.n(p),h=n(20),v=function(e){function t(e){return a(this,t),s(this,c(t).call(this,e))}return l(t,e),o(t,[{key:"render",value:function(){return d.a.createElement("div",{id:"editor-container"},d.a.createElement("div",{key:"editor",id:"editor"},d.a.createElement(h.a,null)))}}]),t}(d.a.Component)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){function o(e){a(u,r,i,o,s,"next",e)}function s(e){a(u,r,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return k});var h=n(0),v=n.n(h),m=n(21),y=n.n(m),g=n(22),b=(n.n(g),n(4)),k=(n.n(b),function(e){function t(e){var n;return o(this,t),n=c(this,f(t).call(this,e)),n.state={},n}return p(t,e),u(t,[{key:"componentDidMount",value:function(){this.configureEditorKit(),this.configureEditor()}},{key:"configureEditorKit",value:function(){var e=this,t=new g.EditorKitDelegate({insertRawText:function(t){e.redactor.insertion.insertHtml(t)},preprocessElement:function(t){var n=e.redactor.cleaner.input(t.outerHTML),r=$R.dom(n).nodes[0],a=!0,i=!1,o=void 0;try{for(var s,u=t.attributes[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;r.setAttribute(c.nodeName,c.nodeValue)}}catch(e){i=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}return r.tagName!=t.tagName&&(r.setAttribute("ghost",!0),r.removeAttribute("fscollapsable")),r},insertElement:function(t,n,r){n?"afterend"==r?n.insertAdjacentElement("afterend",t):"child"==r&&n.after(t):e.redactor.insertion.insertHtml(t.outerHTML)},getElementsBySelector:function(t){return e.redactor.editor.getElement().find(t).nodes},getCurrentLineText:function(){return e.redactor.selection.getCurrent().textContent},getPreviousLineText:function(){var t=e.redactor.selection.getElement(),n=t.previousSibling;return n&&n.textContent},replaceText:function(t){var n,r=t.regex,a=t.replacement,i=t.previousLine,o=e.redactor.marker.insert("start");if(n=i?e.redactor.selection.getElement().previousSibling:o.previousSibling){var s=n.textContent;s=s.replace(/&nbsp;/," "),s=s.replace(r,"").replace(/\s$/,"").trim(),0==s.length?n.remove():n.textContent=s,e.redactor.insertion.insertHtml(a,"start"),e.redactor.selection.restoreMarkers()}},onReceiveNote:function(e){},clearUndoHistory:function(){$R("#editor","module.buffer.clear")},setEditorRawText:function(t){var n=e.redactor.cleaner.input(t);$R("#editor","source.setCode",n)}});this.editorKit=new g.EditorKit({delegate:t,mode:"html",supportsFilesafe:!0,coallesedSavingDelay:0})}},{key:"configureEditor",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.editorKit.getFilesafe();case 2:t=e.sent,window.filesafe_params={embed:y.a,client:t},this.redactor=$R("#editor",{styles:!0,toolbarFixed:!0,tabAsSpaces:2,tabKey:!0,buttonsAdd:["filesafe"],buttons:["bold","italic","underline","deleted","format","fontsize","fontfamily","fontcolor","filesafe","link","lists","alignment","line","redo","undo","indent","outdent","textdirection","html"],plugins:["filesafe","fontsize","fontfamily","fontcolor","alignment","table","inlinestyle","textdirection"],fontfamily:["Arial","Helvetica","Georgia","Times New Roman","Trebuchet MS","Monospace"],callbacks:{changed:function(e){n.editorKit.onEditorValueChanged(e)},pasted:function(e){n.editorKit.onEditorPaste()},image:{resized:function(e){}}},imageEditable:!1,imageCaption:!1,imageLink:!1,imageResizable:!0,imageUpload:function(e,t,r){n.onEditorFilesDrop(t)}}),this.redactor.editor.getElement().on("keyup.textsearcher",function(e){var t=e.which;n.editorKit.onEditorKeyUp({key:t,isSpace:t==n.redactor.keycodes.SPACE,isEnter:t==n.redactor.keycodes.ENTER})}),this.redactor.editor.endFocus();case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"onEditorFilesDrop",value:function(e){if(!this.editorKit.canUploadFiles())return void this.redactor.plugin.filesafe.open();var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;this.editorKit.uploadJSFileObject(o).then(function(e){!e||e.uuid})}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"render",value:function(){return v.a.createElement("div",{key:"editor",className:"sn-component "+this.state.platform})}}]),t}(v.a.Component))},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e.exports=r},function(e,t){e.exports=n(0)},function(e,t,n){function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?i(e):t}var a=n(15),i=n(7);e.exports=r},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}var a=n(16);e.exports=r},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(8),u=n.n(s),c=function(){function e(){a()(this,e),this.unloadHandlers=[],this.dataChangeObservers=[]}return o()(e,null,[{key:"get",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),o()(e,[{key:"setFilesafeInstance",value:function(e){var t=this;this.filesafe=e,this.fsObserver=e.addDataChangeObserver(function(){var e=!0,n=!1,r=void 0;try{for(var a,i=t.dataChangeObservers[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){(0,a.value)()}}catch(e){n=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}})}},{key:"setDelegate",value:function(e){this.delegate=e}},{key:"getDelegate",value:function(){return this.delegate||{}}},{key:"addDataChangeObserver",value:function(e){this.dataChangeObservers.push(e)}},{key:"addUnloadHandler",value:function(e){this.unloadHandlers.push(e)}},{key:"unload",value:function(){var t=!0,n=!1,r=void 0;try{for(var a,i=this.unloadHandlers[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){(0,a.value)()}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.dataChangeObservers=[],this.filesafe&&this.filesafe.removeDataChangeObserver(this.fsObserver),e.instance=null}},{key:"defaultRelayServerUrl",value:function(){return window.default_fs_relay_server_url||"https://filesafe.standardnotes.org"}}]),e}();u()(c,"instance",null)},function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n},function(e,t,n){e.exports=n(20)},function(e,t){function n(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(a,i){function o(e){n(u,a,i,o,s,"next",e)}function s(e){n(u,a,i,o,s,"throw",e)}var u=e.apply(t,r);o(void 0)})}}e.exports=r},function(e,t){e.exports=n(2)},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n(9),a=n.n(r),i=n(10),o=n.n(i),s=n(0),u=n.n(s),c=n(1),l=n.n(c),f=n(3),p=n.n(f),d=n(4),h=n.n(d),v=n(7),m=n.n(v),y=n(5),g=n.n(y),b=n(8),k=n.n(b),w=n(2),x=n.n(w),S=n(6),C=function(e){function t(e){var n;return u()(this,t),n=p()(this,h()(t).call(this,e)),k()(m()(n),"setStatusForFile",function(e,t,r){n.setState({fileStatusFile:e,fileStatus:t,hasStatusSpinner:r})}),k()(m()(n),"decryptFile",function(){var e=o()(a.a.mark(function e(t){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.a.get().filesafe.integrationForFileDescriptor(t)){e.next=4;break}return alert("Unable to find integration for file. If you have deleted the integration, please re-add it and try again."),e.abrupt("return");case 4:return i=S.a.get().filesafe.displayStringForIntegration(r),n.setStatusForFile(t,"Downloading from ".concat(i,"..."),!0),e.abrupt("return",S.a.get().filesafe.downloadFileFromDescriptor(t).then(function(e){return n.setStatusForFile(t,"Decrypting...",!0),S.a.get().filesafe.decryptFile({fileDescriptor:t,fileItem:e}).then(function(e){return{base64Data:e.decryptedData,fileName:t.content.fileName,fileType:t.content.fileType}}).catch(function(e){console.error("filesafe-embed | error decrypting file:",e),n.flashError("Error decrypting file.")})}).catch(function(e){console.log("Error downloading file",e),n.flashError("Error downloading file.")}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),k()(m()(n),"downloadFile",function(){var e=o()(a.a.mark(function e(t){var r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isMobile){e.next=5;break}return r=S.a.get().filesafe.getPlatform(),i="ios"==r?"iOS":"Android",alert("Downloading files is not currently supported on ".concat(i,".")),e.abrupt("return");case 5:return e.next=7,n.decryptFile(t);case 7:o=e.sent,S.a.get().filesafe.downloadBase64Data(o),n.setStatusForFile(t,null);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),k()(m()(n),"previewFile",function(){var e=o()(a.a.mark(function e(t){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.decryptFile(t);case 2:r=e.sent,i=S.a.get().filesafe.createTemporaryFileUrl({base64Data:r.base64Data,dataType:r.fileType}),n.setStatusForFile(t,null),n.setState({previewUrl:i,previewingFile:t});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),k()(m()(n),"onClickPreview",function(){setTimeout(function(){n.revokePreview()},500)}),k()(m()(n),"selectFile",function(e,t){e.target.focus(),n.state.selectedFile==t?(n.setState({selectedFile:null}),n.delegate.onSelectFile&&n.delegate.onSelectFile(null)):(n.setState({selectedFile:t}),n.delegate.onSelectFile&&n.delegate.onSelectFile(t)),n.revokePreview()}),k()(m()(n),"deleteFile",function(e){S.a.get().filesafe.deleteFileFromDescriptor(e)}),k()(m()(n),"copyInsertionLink",function(e){var t="[FileSafe:".concat(e.uuid,":").concat(e.content.fileName,"]");S.a.get().filesafe.copyTextToClipboard(t),n.setState({copiedLink:e}),setTimeout(function(){n.setState({copiedLink:null})},1e3)}),k()(m()(n),"isFileSelected",function(e){return n.state.selectedFile==e}),k()(m()(n),"elementForFile",function(e){var t,r=S.a.get().filesafe.integrationForFileDescriptor(e);t=r?S.a.get().filesafe.displayStringForIntegration(r):"Integration Not Found";var a=e.content.serverMetadata.file_path,i=n.state.previewUrl&&n.state.previewingFile==e,o=n.state.fileStatusFile==e&&n.state.fileStatus,s=n.state.hasStatusSpinner;return x.a.createElement("div",{className:"file-item-container "+(n.isFileSelected(e)?"expanded":"")},x.a.createElement("div",{onClick:function(t){n.selectFile(t,e)},className:"file-item-button sk-button info "+(n.isFileSelected(e)?"selected":void 0)},x.a.createElement("div",{className:"sk-label"},e.content.fileName),o&&x.a.createElement("div",{className:"file-download-status sk-horizontal-group"},s&&x.a.createElement("div",{className:"sk-spinner x-small"}),x.a.createElement("div",{className:"file-status-label"},n.state.fileStatus)),n.isFileSelected(e)&&x.a.createElement("div",{className:"file-item-options-wrapper"},x.a.createElement("div",{onClick:function(e){e.stopPropagation()},className:"sk-app-bar file-item-options"},x.a.createElement("div",{className:"center"},x.a.createElement("div",{onClick:function(t){t.stopPropagation(),n.downloadFile(e)},className:"sk-app-bar-item"},x.a.createElement("div",{className:"sk-label contrast "+(n.isMobile?"disabled":"")},"Download")),x.a.createElement("div",{className:"sk-app-bar-item border"}),n.supportsPreviews&&i&&x.a.createElement("a",{className:"sk-app-bar-item",href:n.state.previewUrl,onClick:function(e){e.stopPropagation(),n.onClickPreview()},target:"_blank"},x.a.createElement("div",{className:"sk-label contrast"},"Open Preview")),n.supportsPreviews&&!i&&x.a.createElement("div",{onClick:function(t){t.stopPropagation(),n.previewFile(e)},className:"sk-app-bar-item"},x.a.createElement("div",{className:"sk-label contrast "+(n.isMobile?"disabled":"")},"Preview")),n.supportsPreviews&&x.a.createElement("div",{className:"sk-app-bar-item border"}),x.a.createElement("div",{onClick:function(t){t.stopPropagation(),n.copyInsertionLink(e)},className:"sk-app-bar-item"},x.a.createElement("div",{className:"sk-label contrast"},n.state.copiedLink==e?"Copied":"Copy Insert Link")),x.a.createElement("div",{className:"sk-app-bar-item border"}),x.a.createElement("div",{onClick:function(t){t.stopPropagation(),n.deleteFile(e)},className:"sk-app-bar-item"},x.a.createElement("div",{className:"sk-label contrast"},"Delete")))),x.a.createElement("div",{className:"file-location"},x.a.createElement("strong",null,t),x.a.createElement("span",null," ",a)))))}),n.state={},n.delegate=S.a.get().getDelegate(),n}return g()(t,e),l()(t,[{key:"revokePreview",value:function(){this.state.previewUrl&&S.a.get().filesafe.revokeTempUrl(this.state.previewUrl),this.setState({previewUrl:null,previewingFile:null})}},{key:"flashError",value:function(e){var t=this;this.setStatusForFile(e,!1),setTimeout(function(){t.setStatusForFile(null)},2500)}},{key:"render",value:function(){var e=this;return this.props.files.map(function(t){return e.elementForFile(t)})}},{key:"supportsPreviews",get:function(){if(void 0!==this._supportsPreview)return this._supportsPreview;var e=S.a.get().filesafe.getEnvironment();if(void 0==e)return!1;this._supportsPreview="web"==e}},{key:"isMobile",get:function(){return S.a.get().filesafe.isMobile()}}]),t}(x.a.Component)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n.n(r),i=n(11),o=n.n(i),s=n(14);t.default={FilesafeEmbed:s.a,React:a.a,ReactDOM:o.a}},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(0),a=n.n(r),i=n(3),o=n.n(i),s=n(4),u=n.n(s),c=n(1),l=n.n(c),f=n(5),p=n.n(f),d=n(2),h=n.n(d),v=n(11),m=n.n(v),y=n(17),g=n(6),b=function(e){function t(e){return a()(this,t),o()(this,u()(t).call(this,e))}return p()(t,e),l()(t,null,[{key:"renderInElement",value:function(e,n,r){g.a.get().setFilesafeInstance(n),g.a.get().setDelegate(r),m.a.render(h.a.createElement(t),e)}},{key:"unload",value:function(e){g.a.get().unload(),m.a.unmountComponentAtNode(e)}}]),l()(t,[{key:"render",value:function(){return h.a.createElement("div",{id:"filesafe-embed"},h.a.createElement("div",{className:"sn-component"},h.a.createElement(y.a,null)))}}]),t}(h.a.Component)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(3),u=n.n(s),c=n(4),l=n.n(c),f=n(5),p=n.n(f),d=n(2),h=n.n(d),v=n(18),m=n(19),y=n(23),g=n(24),b=(n(6),function(e){function t(e){var n;return a()(this,t),n=u()(this,l()(t).call(this,e)),n.state={messages:[]},n}return p()(t,e),o()(t,[{key:"render",value:function(){return h.a.createElement("div",{id:"home",className:"sk-panel static"},h.a.createElement("div",{id:"main-content",className:"sk-panel-content"},h.a.createElement("div",{className:"sk-panel-section"},h.a.createElement(m.a,null)),h.a.createElement("div",{className:"sk-panel-section"},h.a.createElement(g.a,null)),h.a.createElement("div",{className:"sk-panel-section"},h.a.createElement(v.a,null)),h.a.createElement("div",{className:"sk-panel-section"},h.a.createElement(y.a,null))))}}]),t}(h.a.Component))},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(3),u=n.n(s),c=n(4),l=n.n(c),f=n(7),p=n.n(f),d=n(5),h=n.n(d),v=n(8),m=n.n(v),y=n(2),g=n.n(y),b=n(6),k=function(e){function t(e){var n;return a()(this,t),n=u()(this,l()(t).call(this,e)),m()(p()(n),"exportCredential",function(e){var t=btoa(JSON.stringify(e,null,2));b.a.get().filesafe.downloadBase64Data({base64Data:t,fileName:"sn-filesafe-keys-".concat(e.created_at.toISOString(),".json"),fileType:"text/json"})}),m()(p()(n),"deleteCredential",function(e){if(0!=n.numFilesForCredential(e))return void alert("This key has files encrypted with it and cannot be deleted. First delete any associated files, then try again.");b.a.get().filesafe.deleteCredential(e)}),m()(p()(n),"createNewKeys",function(){b.a.get().filesafe.createNewCredentials()}),m()(p()(n),"labelForCredential",function(e){return e.created_at.toLocaleString()}),m()(p()(n),"numFilesForCredential",function(e){return b.a.get().filesafe.numberOfFilesEncryptedWithCredential(e)}),m()(p()(n),"setCredentialAsDefault",function(e){b.a.get().filesafe.setCredentialAsDefault(e)}),n.state={credentials:b.a.get().filesafe.getAllCredentials()||[]},b.a.get().addDataChangeObserver(function(){n.setState({credentials:b.a.get().filesafe.getAllCredentials()})}),n}return h()(t,e),o()(t,[{key:"render",value:function(){var e=this;return g.a.createElement("div",null,g.a.createElement("div",{className:"sk-panel-row"},g.a.createElement("div",{className:"sk-h2 sk-bold"},"Keys"),g.a.createElement("div",{className:"sk-button info no-border",onClick:this.createNewKeys},g.a.createElement("div",{className:"sk-label"},"Create New"))),g.a.createElement("div",{className:"list-container"},this.state.credentials.map(function(t){return g.a.createElement("div",{className:"list-item sk-horizontal-group top"},g.a.createElement("div",{className:"sk-circle x-small "+(t.content.isDefault?"info":"sk-secondary-contrast")}),g.a.createElement("div",null,g.a.createElement("div",{className:"sk-panel-row condensed sk-bold"},e.labelForCredential(t)),g.a.createElement("div",{style:{marginTop:3},className:"sk-panel-row condensed"},e.numFilesForCredential(t)," encrypted files"),g.a.createElement("div",{className:"sk-panel-row condensed"},g.a.createElement("div",{className:"sk-horizontal-group"},e.state.credentials.length>1&&!t.content.isDefault&&g.a.createElement("a",{className:"info",onClick:function(){e.setCredentialAsDefault(t)}},"Make Default"),g.a.createElement("a",{className:"info",onClick:function(){e.exportCredential(t)}},"Export"),g.a.createElement("a",{className:"danger",onClick:function(){e.deleteCredential(t)}},"Delete")))))})))}}]),t}(g.a.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return I});var r=n(9),a=n.n(r),i=n(10),o=n.n(i),s=n(0),u=n.n(s),c=n(1),l=n.n(c),f=n(3),p=n.n(f),d=n(4),h=n.n(d),v=n(7),m=n.n(v),y=n(5),g=n.n(y),b=n(8),k=n.n(b),w=n(2),x=n.n(w),S=n(21),C=n(22),_=n(12),E=n(6),I=function(e){function t(e){var n;return u()(this,t),n=p()(this,h()(t).call(this,e)),k()(m()(n),"event_preventDefaults",function(e){e.preventDefault(),e.stopPropagation()}),k()(m()(n),"event_highlight",function(e){n.event_preventDefaults(e),n.rootElement.classList.add("highlight")}),k()(m()(n),"event_unhighlight",function(e){n.event_preventDefaults(e),n.rootElement.classList.remove("highlight")}),k()(m()(n),"event_drop",function(e){n.event_unhighlight(e),n.event_preventDefaults(e);var t=e.dataTransfer,r=t.files;n.handleDroppedFiles(r)}),k()(m()(n),"handleDroppedFiles",function(){var e=o()(a.a.mark(function e(t){var r,i,o,s,u,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=E.a.get().filesafe.getAllIntegrations().length){e.next=3;break}return alert("Please set up at least one integration before attempting to upload a file. To do this, press Expand, and select Add New in the Integrations section."),e.abrupt("return");case 3:r=!0,i=!1,o=void 0,e.prev=6,s=t[Symbol.iterator]();case 8:if(r=(u=s.next()).done){e.next=17;break}if(c=u.value){e.next=12;break}return e.abrupt("continue",14);case 12:return e.next=14,n.readFile(c);case 14:r=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),i=!0,o=e.t0;case 23:e.prev=23,e.prev=24,r||null==s.return||s.return();case 26:if(e.prev=26,!i){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}},e,null,[[6,19,23,31],[24,,26,30]])}));return function(t){return e.apply(this,arguments)}}()),n.messagesManager=new S.a({credentialManager:E.a.get().filesafe.credentialManager,integrationManager:E.a.get().filesafe.integrationManager}),n.messagesManager.getMessages().then(function(e){n.setState({messages:e})}),n.state={noteFiles:E.a.get().filesafe.fileDescriptorsForCurrentNote(),messages:[]},E.a.get().addDataChangeObserver(function(){n.reload()}),E.a.get().addUnloadHandler(function(){window.removeEventListener("dragenter",n.event_highlight,!1),window.removeEventListener("dragover",n.event_highlight,!1),window.removeEventListener("dragleave",n.event_unhighlight,!1),window.removeEventListener("drop",n.event_drop,!1)}),n}return g()(t,e),l()(t,[{key:"reload",value:function(){function e(){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.messagesManager.getMessages();case 2:t=e.sent,this.setState({noteFiles:E.a.get().filesafe.fileDescriptorsForCurrentNote(),messages:t});case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentDidMount",value:function(){this.configureFileForm(),window.addEventListener("dragenter",this.event_highlight,!1),window.addEventListener("dragover",this.event_highlight,!1),window.addEventListener("dragleave",this.event_unhighlight,!1),window.addEventListener("drop",this.event_drop,!1)}},{key:"configureFileForm",value:function(){var e=this,t=this.fileInput;this.dropContainer;t&&(t.onchange=function(t){var n=t.target.files;e.handledFiles||e.handleDroppedFiles(n)})}},{key:"reset",value:function(){this.setState({rawData:null,decryptedItems:null,requestPassword:!1})}},{key:"readFile",value:function(){function e(e){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(t){var n,r,i,s=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=50,r=1e6,i=n*r,e.abrupt("return",new Promise(function(e,r){var u=new FileReader,c=!1;u.onload=function(){var r=o()(a.a.mark(function r(o){var u,l,f,p,d;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u=o.target.result,!c){r.next=7;break}u=JSON.parse(u),l=u.items[0],s.decryptDraggedFile(l).then(e),r.next=20;break;case 7:if(f=u,!((p=f.byteLength)>i)){r.next=14;break}return alert("The maximum upload size is ".concat(n," megabytes per file.")),s.setState({status:null}),e(),r.abrupt("return");case 14:return r.next=16,SFJS.crypto.arrayBufferToBase64(f);case 16:return d=r.sent,r.next=19,s.encryptFile(d,t.name,t.type);case 19:e();case 20:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}(),s.setState({status:"Reading file..."}),t.name.endsWith(".sf")||t.name.endsWith(".json")?(c=!0,u.readAsText(t)):u.readAsArrayBuffer(t)}));case 4:case"end":return e.stop()}},e)}));return e}()},{key:"decryptDraggedFile",value:function(){function e(e){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(t){var n,r,i,s,u,c,l,f,p,d=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({status:"Decrypting..."}),n=E.a.get().filesafe.getAllCredentials(),r=function(){var e=o()(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){E.a.get().filesafe.decryptFile({fileDescriptor:t,credential:n}).then(function(t){var n=t.decryptedItem;E.a.get().filesafe.downloadBase64Data({base64Data:t.decryptedData,fileName:n.content.fileName,fileType:n.content.fileType}),d.setState({status:null}),e(!0)}).catch(function(e){console.error("Error decrypting:",e),d.flashError("Error decrypting file."),r(!1)})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),i=!0,s=!1,u=void 0,e.prev=6,c=n[Symbol.iterator]();case 8:if(i=(l=c.next()).done){e.next=18;break}return f=l.value,e.next=12,r(f);case 12:if(!(p=e.sent)){e.next=15;break}return e.abrupt("return");case 15:i=!0,e.next=8;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(6),s=!0,u=e.t0;case 24:e.prev=24,e.prev=25,i||null==c.return||c.return();case 27:if(e.prev=27,!s){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}},e,this,[[6,20,24,32],[25,,27,31]])}));return e}()},{key:"wait",value:function(){function e(e){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){setTimeout(function(){e()},1e3*t)}));case 1:case"end":return e.stop()}},e)}));return e}()},{key:"encryptFile",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(t,n,r){var i,s,u=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=E.a.get().filesafe.getDefaultCredentials()){e.next=5;break}return this.setState({status:null}),alert("Please set up at least one key before attempting to upload a file. To do this, press Expand, and select Create New in the Keys section."),e.abrupt("return");case 5:if(s=E.a.get().filesafe.getDefaultIntegration()){e.next=10;break}return this.setState({status:null}),alert("Please set up at least one integration before attempting to upload a file. To do this, press Expand, and select Add New in the Integrations section."),e.abrupt("return");case 10:return this.setState({status:"Encrypting..."}),e.abrupt("return",E.a.get().filesafe.encryptFile({data:t,inputFileName:n,fileType:r,credential:i}).then(function(){var e=o()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.setState({status:"Uploading to ".concat(E.a.get().filesafe.displayStringForIntegration(s),"...")}),e.next=3,u.wait(.5);case 3:return e.abrupt("return",E.a.get().filesafe.uploadFile({fileItem:t,inputFileName:n,fileType:r,credential:i}).then(function(){u.setState({status:"Upload Success."}),setTimeout(function(){u.setState({status:null})},2e3)}).catch(function(e){console.error("fs-embed | error uploading file:",e),u.flashError("Error uploading file.")}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"flashError",value:function(e){var t=this;this.setState({status:e,statusClass:"danger"}),setTimeout(function(){t.setState({status:null,statusClass:null})},2500)}},{key:"render",value:function(){var e=this,t=this.state.statusClass?this.state.statusClass:"info",n="info"==t;return x.a.createElement("div",{className:"sn-component files-view"},x.a.createElement("div",{className:"sk-panel-row align-top"},x.a.createElement("div",{className:"files"},this.state.messages.length>0&&x.a.createElement("div",{id:"messages-container",className:"sk-panel-section"},x.a.createElement(C.a,{messages:this.state.messages})),this.state.status&&x.a.createElement("div",{id:"file-upload-status",className:"sk-horizontal-group"},n&&x.a.createElement("div",{className:"sk-spinner info small"}),x.a.createElement("div",{className:t},this.state.status)),x.a.createElement("div",{id:"add-file-button-container"},x.a.createElement("div",{className:"file sk-button info"},x.a.createElement("label",{className:"no-style"},x.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(t){e.handleDroppedFiles(t.target.files)}}),x.a.createElement("div",{id:"attach-file-button-label",className:"sk-label"},"Attach File")))),x.a.createElement(_.a,{files:this.state.noteFiles}))))}},{key:"rootElement",get:function(){return document.getElementById("filesafe-embed")}},{key:"dropContainer",get:function(){return document.getElementById("files-view")}},{key:"fileInput",get:function(){return document.getElementById("file-input")}}]),t}(x.a.Component)},function(e,t,n){var r=function(e){"use strict";function t(e,t,n,a){var i=t&&t.prototype instanceof r?t:r,o=Object.create(i.prototype),s=new p(a||[]);return o._invoke=u(e,n,s),o}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function a(){}function i(){}function o(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(r,a,i,o){var s=n(e[r],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,o)},function(e){t("throw",e,i,o)}):Promise.resolve(c).then(function(e){u.value=e,i(u)},function(e){return t("throw",e,i,o)})}o(s.arg)}function r(e,n){function r(){return new Promise(function(r,a){t(e,n,r,a)})}return a=a?a.then(r,r):r()}var a;this._invoke=r}function u(e,t,r){var a=x;return function(i,o){if(a===C)throw new Error("Generator is already running");if(a===_){if("throw"===i)throw o;return h()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var u=c(s,r);if(u){if(u===E)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===x)throw a=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=C;var l=n(e,t,r);if("normal"===l.type){if(a=r.done?_:S,l.arg===E)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=_,r.method="throw",r.arg=l.arg)}}}function c(e,t){var r=e.iterator[t.method];if(r===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var a=n(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,E;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,E):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function d(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:h}}function h(){return{value:v,done:!0}}var v,m=Object.prototype,y=m.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",w=g.toStringTag||"@@toStringTag";e.wrap=t;var x="suspendedStart",S="suspendedYield",C="executing",_="completed",E={},I={};I[b]=function(){return this};var P=Object.getPrototypeOf,F=P&&P(P(d([])));F&&F!==m&&y.call(F,b)&&(I=F);var T=i.prototype=r.prototype=Object.create(I);return a.prototype=T.constructor=i,i.constructor=a,i[w]=a.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},o(s.prototype),s.prototype[k]=function(){return this},e.AsyncIterator=s,e.async=function(n,r,a,i){var o=new s(t(n,r,a,i));return e.isGeneratorFunction(r)?o:o.next().then(function(e){return e.done?e.value:o.next()})},o(T),T[w]="Generator",T[b]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=d,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=y.call(a,"catchLoc"),s=y.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;f(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:d(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),E}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(9),a=n.n(r),i=n(10),o=n.n(i),s=n(0),u=n.n(s),c=n(1),l=n.n(c),f=function(){function e(t){var n=t.credentialManager,r=t.integrationManager;u()(this,e),this.credentialManager=n,this.integrationManager=r}return l()(e,[{key:"getMessages",value:function(){function e(){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(){var t,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.credentialManager.getDefaultCredentials();case 3:return n=e.sent,n||t.push({message:"Create keys by selecting <strong>Create New</strong> under <i>Keys</i>.",css:"sk-base"}),r=this.integrationManager.integrations,r&&0!=r.length||t.push({message:"Add a new integration by selecting <strong>Add New</strong> under <i>Integrations</i>",css:"sk-base"}),e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}));return e}()}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(3),u=n.n(s),c=n(4),l=n.n(c),f=n(5),p=n.n(f),d=n(2),h=n.n(d),v=function(e){function t(e){var n;return a()(this,t),n=u()(this,l()(t).call(this,e)),n.state={},n}return p()(t,e),o()(t,[{key:"render",value:function(){return h.a.createElement("div",{id:"messages"},h.a.createElement("div",{className:"title"},"Complete the following steps before uploading your first file:"),h.a.createElement("ul",null,this.props.messages.map(function(e){return h.a.createElement("li",{dangerouslySetInnerHTML:{__html:e.message},className:e.css})})))}}]),t}(h.a.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(3),u=n.n(s),c=n(4),l=n.n(c),f=n(7),p=n.n(f),d=n(5),h=n.n(d),v=n(8),m=n.n(v),y=n(2),g=n.n(y),b=n(12),k=n(6),w=function(e){function t(e){var n;return a()(this,t),n=u()(this,l()(t).call(this,e)),m()(p()(n),"toggleVisibility",function(){n.setState({expanded:!n.state.expanded})}),n.state={expanded:!1,files:k.a.get().filesafe.getAllFileDescriptors()||[]},k.a.get().addDataChangeObserver(function(){n.setState({files:k.a.get().filesafe.getAllFileDescriptors()})}),n}return h()(t,e),o()(t,[{key:"render",value:function(){return g.a.createElement("div",{className:"files-view"},g.a.createElement("div",{className:"sk-panel-row justify-left"},g.a.createElement("div",{className:"sk-horizontal-group"},g.a.createElement("div",{className:"sk-panel-section-title"},"All Files ",g.a.createElement("span",{style:{fontWeight:"normal"}},"(",this.state.files.length,")")),g.a.createElement("a",{className:"info",onClick:this.toggleVisibility},this.state.expanded?"Hide":"Show"))),this.state.expanded&&g.a.createElement("div",{className:"sk-panel-row"},g.a.createElement("div",{className:"files"},g.a.createElement(b.a,{files:this.state.files}))))}}]),t}(g.a.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(3),u=n.n(s),c=n(4),l=n.n(c),f=n(7),p=n.n(f),d=n(5),h=n.n(d),v=n(8),m=n.n(v),y=n(2),g=n.n(y),b=n(6),k=function(e){function t(e){var n;return a()(this,t),n=u()(this,l()(t).call(this,e)),m()(p()(n),"handleKeyPress",function(e){"Enter"===e.key&&n.submitIntegrationCode()}),m()(p()(n),"handleTextChange",function(e){var t=e.target.value;n.setState({integrationCode:t})}),m()(p()(n),"submitIntegrationCode",function(){var e=n.state.integrationCode;e&&0!=e.length&&b.a.get().filesafe.saveIntegrationFromCode(e).then(function(){n.setState({integrationCode:null,showInputForm:!1}),n.reloadIntegrations()}).catch(function(){alert("Invalid integration code. Ensure the correct value is copied and try again.")})}),m()(p()(n),"addNewIntegrationClicked",function(){window.open(b.a.get().defaultRelayServerUrl(),"_blank"),n.setState({showInputForm:!0})}),m()(p()(n),"cancelIntegrationForm",function(){n.setState({showInputForm:!1})}),m()(p()(n),"deleteIntegration",function(e){b.a.get().filesafe.deleteIntegration(e)}),m()(p()(n),"setIntegrationAsDefaultUploadSource",function(e){b.a.get().filesafe.setIntegrationAsDefault(e)}),n.state={integrations:b.a.get().filesafe.getAllIntegrations()||[]},b.a.get().addDataChangeObserver(function(){n.reloadIntegrations()}),n}return h()(t,e),o()(t,[{key:"reloadIntegrations",value:function(){var e=b.a.get().filesafe.getAllIntegrations();this.setState({integrations:e})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"displayStringForIntegration",value:function(e){return b.a.get().filesafe.displayStringForIntegration(e)}},{key:"render",value:function(){var e=this,t=this.state.integrations.length>1;return g.a.createElement("div",null,g.a.createElement("div",{className:"sk-panel-row"},g.a.createElement("div",{className:"sk-h2 sk-bold"},"Integrations"),!this.state.showInputForm&&g.a.createElement("div",{className:"sk-button info no-border",onClick:this.addNewIntegrationClicked},g.a.createElement("div",{className:"sk-label"},"Add New"))),g.a.createElement("div",{id:"integrations"},this.state.showInputForm&&g.a.createElement("div",{className:"sk-notification info"},g.a.createElement("strong",null,"New Integration"),g.a.createElement("p",{className:"sk-p"},"A new tab has opened. After you complete the authentication flow, enter the code you receive below."),g.a.createElement("div",{className:"sk-panel-row"}),g.a.createElement("input",{className:"title sk-input contrast",type:"text",placeholder:"Enter integration code",value:this.state.integrationCode,onChange:this.handleTextChange,onKeyPress:this.handleKeyPress}),g.a.createElement("div",{className:"sk-button-group",style:{marginTop:10}},g.a.createElement("div",{className:"sk-button neutral",onClick:this.cancelIntegrationForm},g.a.createElement("a",{className:"sk-label"},"Cancel")),g.a.createElement("div",{className:"sk-button sk-base",onClick:this.submitIntegrationCode},g.a.createElement("a",{className:"sk-label"},"Submit"))))),g.a.createElement("div",{className:"list-container"},this.state.integrations.map(function(n){return g.a.createElement("div",{className:"list-item sk-horizontal-group top"},g.a.createElement("div",{className:"sk-circle x-small "+(n.content.isDefaultUploadSource?"info":"sk-secondary-contrast")}),g.a.createElement("div",null,g.a.createElement("div",{className:"sk-panel-row condensed sk-bold"},e.displayStringForIntegration(n)),g.a.createElement("div",{className:"sk-panel-row condensed"},g.a.createElement("div",{className:"sk-horizontal-group"},t&&!n.content.isDefaultUploadSource&&g.a.createElement("a",{className:"info",onClick:function(){e.setIntegrationAsDefaultUploadSource(n)}},"Make Default"),g.a.createElement("a",{className:"danger",onClick:function(){e.deleteIntegration(n)}},"Delete")))))})))}}]),t}(g.a.Component)}])},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,"a",function(){return o});var o=function(){function e(){r(this,e)}return i(e,null,[{key:"htmlToText",value:function(e){var t=document.implementation.createHTMLDocument("New").body;return t.innerHTML=e,t.textContent||t.innerText||""}},{key:"truncateString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return e.length<=t?e:e.substring(0,t)+"..."}},{key:"sleep",value:function(e){return new Promise(function(t,n){setTimeout(function(){t()},1e3*e)})}}]),e}()},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"EditorKit",function(){return l});var u=n(2),c=n(8);n.d(t,"EditorKitDelegate",function(){return c.a});var l=function(){function e(t){var n=t.delegate,r=t.mode,a=void 0===r?"plaintext":r,o=t.supportsFilesafe,s=void 0!==o&&o,c=t.coallesedSavingDelay,l=void 0===c?250:c;i(this,e),this.delegate=n,this.mode=a,this.supportsFilesafe=s,this.coallesedSavingDelay=l,this.internal=new u.a({delegate:n,mode:a,supportsFilesafe:s,coallesedSavingDelay:l})}return s(e,[{key:"getFilesafe",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.internal.getFilesafe());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"onEditorValueChanged",value:function(e){this.internal.onEditorValueChanged(e)}},{key:"onEditorKeyUp",value:function(e){var t=e.key,n=e.isSpace,r=e.isEnter;this.internal.onEditorKeyUp({key:t,isSpace:n,isEnter:r})}},{key:"onEditorPaste",value:function(){this.internal.onEditorPaste()}},{key:"canUploadFiles",value:function(){return this.internal.canUploadFiles()}},{key:"uploadJSFileObject",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.internal.uploadJSFileObject(t));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),e}()},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",function(){return h});var u=n(3),c=n.n(u),l=n(0),f=n(4),p=n(5),d=n(6),h=function(){function e(t){var n=t.delegate,r=t.mode,a=t.supportsFilesafe,o=t.coallesedSavingDelay,s=void 0===o?250:o;i(this,e),this.delegate=n,this.mode=r,this.supportsFilesafe=a,this.coallesedSavingDelay=s,this.fileIdsPendingAssociation=[],this.connectToBridge(),a&&(this.filesafeImportPromise=this.importFilesafe())}return s(e,[{key:"importFilesafe",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){e()}).then(n.bind(null,7)).then(function(e){return t.FilesafeClass=e.default,t.configureFilesafe(),t.filesafe}));case 1:case"end":return e.stop()}},e)}));return e}()},{key:"getFilesafe",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.filesafe&&!this.filesafeImportPromise){e.next=5;break}if(!this.filesafeImportPromise){e.next=3;break}return e.abrupt("return",this.filesafeImportPromise);case 3:e.next=6;break;case 5:return e.abrupt("return",this.importFilesafe());case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"configureFilesafe",value:function(){var e=this;this.filesafe=new this.FilesafeClass({componentManager:this.componentManager}),this.filesafe.addDataChangeObserver(function(){var t=e.filesafe.getAllFileDescriptors();if(e.note&&e.fileIdsPendingAssociation.length>0){var n=!1,r=!0,a=!1,i=void 0;try{for(var o,s=e.fileIdsPendingAssociation.slice()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(function(){var r=o.value,a=t.find(function(e){return e.uuid==r});if(!a)return"continue";n=!0,e.fileIdsPendingAssociation.splice(e.fileIdsPendingAssociation.indexOf(r),1);var i=d.a.insertionSyntaxForFileDescriptor(a);e.delegate.insertRawText(i)})()}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}n&&e.textExpander.searchPatterns()}t.length>0&&e.fileLoader.loadFilesafeElements()}),this.filesafe.addNewFileDescriptorHandler(function(t){e.fileIdsPendingAssociation.push(t.uuid)}),this.fileLoader=new f.a({filesafe:this.filesafe,getElementsBySelector:this.delegate.getElementsBySelector,insertElement:this.delegate.insertElement,preprocessElement:this.delegate.preprocessElement}),this.textExpander=new p.a({afterExpand:function(){e.fileLoader.loadFilesafeElements()},getCurrentLineText:this.delegate.getCurrentLineText,getPreviousLineText:this.delegate.getPreviousLineText,replaceText:this.delegate.replaceText,patterns:[{regex:d.a.FilesafeSyntaxPattern,callback:function(e){return d.a.expandedFilesafeSyntax(e)}}]})}},{key:"connectToBridge",value:function(){var e=this;this.componentManager=new c.a(null,function(){document.documentElement.classList.add(e.componentManager.platform)}),this.componentManager.coallesedSavingDelay=this.coallesedSavingDelay,this.componentManager.streamContextItem(function(t){var n=e.FilesafeClass.getSFItemClass(),r=!0;if(e.note&&e.note.uuid==t.uuid&&(r=!1),e.note=new n(t),e.supportsFilesafe&&e.filesafe.setCurrentNote(e.note),!t.isMetadataUpdate){var a=t.content.text;if("html"==e.mode&&r){/<[a-z][\s\S]*>/i.test(a)||(e.ignoreNextTextChange=!0)}e.previousText=a,e.supportsFilesafe&&(e.needsFilesafeElementLoad=!0,a=d.a.expandedFilesafeSyntax(a)),e.delegate.setEditorRawText(a),r&&e.delegate.clearUndoHistory()}})}},{key:"onEditorKeyUp",value:function(e){var t=e.key,n=e.isSpace,r=e.isEnter;this.textExpander.onKeyUp({key:t,isSpace:n,isEnter:r})}},{key:"onEditorPaste",value:function(){this.textExpander.onKeyUp({isPaste:!0})}},{key:"onEditorValueChanged",value:function(e){var t=this;if(this.needsFilesafeElementLoad&&(this.needsFilesafeElementLoad=!1,this.fileLoader.loadFilesafeElements()),this.ignoreNextTextChange)return void(this.ignoreNextTextChange=!1);if(this.supportsFilesafe){e=d.a.collapseFilesafeSyntax(e);if(this.previousText==e)return}this.previousText=e;var n=this.note;n&&this.componentManager.saveItemWithPresave(n,function(){if(n.content.text=e,t.delegate.generateCustomPreview){var r=t.delegate.generateCustomPreview(e);r.html?(n.content.preview_html=r.html,n.content.preview_plain=null):r.plain&&(n.content.preview_plain=r.plain,n.content.preview_html=null)}else{if("html"==t.mode){var a=d.a.removeFilesafeSyntaxFromHtml(e);a=l.a.truncateString(l.a.htmlToText(a)),n.content.preview_plain=a.length>0?a:" "}else n.content.preview_plain=e;n.content.preview_html=null}})}},{key:"canUploadFiles",value:function(){var e=this.filesafe.getAllCredentials(),t=this.filesafe.getAllIntegrations();return e.length>0&&t.length>0}},{key:"uploadJSFileObject",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.fileLoader.insertStatusAtCursor("Processing file..."),e.abrupt("return",this.filesafe.encryptAndUploadJavaScriptFileObject(t).then(function(e){r.fileLoader.removeCursorStatus(n)}));case 2:case"end":return e.stop()}},e,this)}));return e}()}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){r(this,e),this.sentMessages=[],this.messageQueue=[],this.loggingEnabled=!1,this.acceptsThemes=!0,this.activeThemes=[],this.initialPermissions=t,this.onReadyCallback=n,this.coallesedSaving=!0,this.coallesedSavingDelay=250,this.registerMessageHandler()}return a(e,[{key:"registerMessageHandler",value:function(){var e=this,t=function(t){e.loggingEnabled&&console.log("Components API Message received:",t.data),e.origin||(e.origin=t.origin);var n=t.data,r="string"==typeof n?JSON.parse(n):n;e.handleMessage(r)};document.addEventListener("message",function(e){t(e)},!1),window.addEventListener("message",function(e){t(e)},!1)}},{key:"handleMessage",value:function(e){if("component-registered"===e.action)this.sessionKey=e.sessionKey,this.componentData=e.componentData,this.onReady(e.data),this.loggingEnabled&&console.log("Component successfully registered with payload:",e);else if("themes"===e.action)this.acceptsThemes&&this.activateThemes(e.data.themes);else if(e.original){var t=this.sentMessages.filter(function(t){return t.messageId===e.original.messageId})[0];t||alert("This extension is attempting to communicate with Standard Notes, but an error is preventing it from doing so. Please restart this extension and try again."),t.callback&&t.callback(e.data)}}},{key:"onReady",value:function(e){this.environment=e.environment,this.platform=e.platform,this.uuid=e.uuid,this.isMobile="mobile"==this.environment,this.initialPermissions&&this.initialPermissions.length>0&&this.requestPermissions(this.initialPermissions);var t=!0,n=!1,r=void 0;try{for(var a,i=this.messageQueue[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;this.postMessage(o.action,o.data,o.callback)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}this.messageQueue=[],this.loggingEnabled&&console.log("onReadyData",e),this.activateThemes(e.activeThemeUrls||[]),this.onReadyCallback&&this.onReadyCallback()}},{key:"getSelfComponentUUID",value:function(){return this.uuid}},{key:"isRunningInDesktopApplication",value:function(){return"desktop"===this.environment}},{key:"setComponentDataValueForKey",value:function(e,t){this.componentData[e]=t,this.postMessage("set-component-data",{componentData:this.componentData},function(e){})}},{key:"clearComponentData",value:function(){this.componentData={},this.postMessage("set-component-data",{componentData:this.componentData},function(e){})}},{key:"componentDataValueForKey",value:function(e){return this.componentData[e]}},{key:"postMessage",value:function(e,t,n){if(!this.sessionKey)return void this.messageQueue.push({action:e,data:t,callback:n});var r={action:e,data:t,messageId:this.generateUUID(),sessionKey:this.sessionKey,api:"component"},a=JSON.parse(JSON.stringify(r));a.callback=n,this.sentMessages.push(a),this.isMobile&&(r=JSON.stringify(r)),this.loggingEnabled&&console.log("Posting message:",r),window.parent.postMessage(r,this.origin)}},{key:"setSize",value:function(e,t,n){this.postMessage("set-size",{type:e,width:t,height:n},function(e){})}},{key:"requestPermissions",value:function(e,t){this.postMessage("request-permissions",{permissions:e},function(e){t&&t()}.bind(this))}},{key:"streamItems",value:function(e,t){Array.isArray(e)||(e=[e]),this.postMessage("stream-items",{content_types:e},function(e){t(e.items)}.bind(this))}},{key:"streamContextItem",value:function(e){var t=this;this.postMessage("stream-context-item",null,function(n){var r=n.item;(!t.lastStreamedItem||t.lastStreamedItem.uuid!==r.uuid)&&t.pendingSaveTimeout&&(clearTimeout(t.pendingSaveTimeout),t._performSavingOfItems(t.pendingSaveParams),t.pendingSaveTimeout=null,t.pendingSaveParams=null),t.lastStreamedItem=r,e(t.lastStreamedItem)})}},{key:"selectItem",value:function(e){this.postMessage("select-item",{item:this.jsonObjectForItem(e)})}},{key:"createItem",value:function(e,t){this.postMessage("create-item",{item:this.jsonObjectForItem(e)},function(e){var n=e.item;!n&&e.items&&e.items.length>0&&(n=e.items[0]),this.associateItem(n),t&&t(n)}.bind(this))}},{key:"createItems",value:function(e,t){var n=this,r=e.map(function(e){return n.jsonObjectForItem(e)});this.postMessage("create-items",{items:r},function(e){t&&t(e.items)}.bind(this))}},{key:"associateItem",value:function(e){this.postMessage("associate-item",{item:this.jsonObjectForItem(e)})}},{key:"deassociateItem",value:function(e){this.postMessage("deassociate-item",{item:this.jsonObjectForItem(e)})}},{key:"clearSelection",value:function(){this.postMessage("clear-selection",{content_type:"Tag"})}},{key:"deleteItem",value:function(e,t){this.deleteItems([e],t)}},{key:"deleteItems",value:function(e,t){var n={items:e.map(function(e){return this.jsonObjectForItem(e)}.bind(this))};this.postMessage("delete-items",n,function(e){t&&t(e)})}},{key:"sendCustomEvent",value:function(e,t,n){this.postMessage(e,t,function(e){n&&n(e)}.bind(this))}},{key:"saveItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.saveItems([e],t,n)}},{key:"saveItemWithPresave",value:function(e,t,n){this.saveItemsWithPresave([e],t,n)}},{key:"saveItemsWithPresave",value:function(e,t,n){this.saveItems(e,n,!1,t)}},{key:"_performSavingOfItems",value:function(e){var t=e.items,n=e.presave,r=e.callback;n&&n();var a=[],i=!0,o=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;a.push(this.jsonObjectForItem(l))}}catch(e){o=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}this.postMessage("save-items",{items:a},function(e){r&&r()})}},{key:"saveItems",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments[3];if(this.pendingSaveItems||(this.pendingSaveItems=[]),1!=this.coallesedSaving||r)this._performSavingOfItems({items:e,presave:a,callback:t});else{this.pendingSaveTimeout&&clearTimeout(this.pendingSaveTimeout);var i=e.map(function(e){return e.uuid}),o=this.pendingSaveItems.filter(function(e){return!i.includes(e.uuid)});this.pendingSaveItems=o.concat(e),this.pendingSaveParams={items:this.pendingSaveItems,presave:a,callback:t},this.pendingSaveTimeout=setTimeout(function(){n._performSavingOfItems(n.pendingSaveParams),n.pendingSaveItems=[],n.pendingSaveTimeout=null,n.pendingSaveParams=null},this.coallesedSavingDelay)}}},{key:"jsonObjectForItem",value:function(e){var t=Object.assign({},e);return t.children=null,t.parent=null,t}},{key:"getItemAppDataValue",value:function(e,t){var n=e.content.appData&&e.content.appData["org.standardnotes.sn"];return n?n[t]:null}},{key:"activateThemes",value:function(e){if(this.loggingEnabled&&console.log("Incoming themes",e),this.activeThemes.sort().toString()!=e.sort().toString()){var t=e||[],n=[],r=!0,a=!1,i=void 0;try{for(var o,s=this.activeThemes[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e.includes(u)?t=t.filter(function(e){return e!=u}):n.push(u)}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}this.loggingEnabled&&(console.log("Deactivating themes:",n),console.log("Activating themes:",t));var c=!0,l=!1,f=void 0;try{for(var p,d=n[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var h=p.value;this.deactivateTheme(h)}}catch(e){l=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw f}}this.activeThemes=e;var v=!0,m=!1,y=void 0;try{for(var g,b=t[Symbol.iterator]();!(v=(g=b.next()).done);v=!0){var k=g.value;if(k){var w=document.createElement("link");w.id=btoa(k),w.href=k,w.type="text/css",w.rel="stylesheet",w.media="screen,print",w.className="custom-theme",document.getElementsByTagName("head")[0].appendChild(w)}}}catch(e){m=!0,y=e}finally{try{!v&&b.return&&b.return()}finally{if(m)throw y}}}}},{key:"themeElementForUrl",value:function(e){return Array.from(document.getElementsByClassName("custom-theme")).slice().find(function(t){return t.id==btoa(e)})}},{key:"deactivateTheme",value:function(e){var t=this.themeElementForUrl(e);t&&(t.disabled=!0,t.parentNode.removeChild(t))}},{key:"generateUUID",value:function(){var e=window.crypto||window.msCrypto;if(e){var t=new Uint32Array(4);e.getRandomValues(t);var n=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){n++;var r=t[n>>3]>>n%8*4&15;return("x"==e?r:3&r|8).toString(16)})}var r=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(r+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)})}}]),e}();void 0!==e&&void 0!==e.exports&&(e.exports=i),window&&(window.ComponentManager=i)},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){function o(e){r(u,a,i,o,s,"next",e)}function s(e){r(u,a,i,o,s,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",function(){return c});var u=n(0),c=function(){function e(t){var n=t.filesafe,r=t.getElementsBySelector,a=t.preprocessElement,o=t.insertElement;i(this,e),this.filesafe=n,this.getElementsBySelector=r,this.insertElement=o,this.preprocessElement=a,this.uuidToFileTempUrlAndTypeMapping={},this.currentlyLoadingIds=[],this.statusElementMapping={},this.fileTypeToElementType={"image/png":"img","image/jpg":"img","image/jpeg":"img","image/gif":"img","image/tiff":"img","image/bmp":"img","video/mp4":"video","audio/mpeg":"audio","audio/mp3":"audio"}}return s(e,[{key:"fileTypeForElementType",value:function(e){return this.fileTypeToElementType[e.toLowerCase()]}},{key:"loadFilesafeElements",value:function(){var e=this.getElementsBySelector("*[fsplaceholder]"),t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;this.loadFilesafeElement(o)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"loadFilesafeElement",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,c,l,f,p,d,h,v=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getAttribute("fsid"),r=t.getAttribute("fsname"),a=r&&"undefined"!=r?r:"file",!(i=this.uuidToFileTempUrlAndTypeMapping[n])){e.next=7;break}return this.insertMediaElement({url:i.url,fsid:n,fileType:i.fileType,fsname:i.fsname,fsElement:t}),e.abrupt("return");case 7:if(!this.currentlyLoadingIds.includes(n)){e.next=9;break}return e.abrupt("return");case 9:if(o=this.filesafe.findFileDescriptor(n)){e.next=13;break}return this.setStatus("Unable to find ".concat(a," ").concat(n,"."),t,n,r,!0),e.abrupt("return",{success:!1});case 13:if(s='[fsid="'.concat(o.uuid,'"][fscollapsable]'),c=document.querySelectorAll("img".concat(s,", figure").concat(s,", video").concat(s,", audio").concat(s)),!(c.length>0)){e.next=17;break}return e.abrupt("return",{success:!1});case 17:return l=function(){v.currentlyLoadingIds.splice(v.currentlyLoadingIds.indexOf(n),1)},this.currentlyLoadingIds.push(n),this.setStatus("Downloading ".concat(a,"..."),t,n,r),e.next=22,u.a.sleep(.05);case 22:return e.next=24,this.filesafe.downloadFileFromDescriptor(o).catch(function(e){v.setStatus("Unable to download ".concat(a," ").concat(n,"."),t,n,r)});case 24:if(f=e.sent){e.next=27;break}return e.abrupt("return");case 27:return this.setStatus("Decrypting ".concat(a,"..."),t,n,r),e.next=30,u.a.sleep(.05);case 30:return e.next=32,this.filesafe.decryptFile({fileDescriptor:o,fileItem:f}).catch(function(e){v.setStatus("Unable to decrypt ".concat(a," ").concat(n,"."),t,n,r)});case 32:if(p=e.sent){e.next=35;break}return e.abrupt("return");case 35:return this.setStatus(null,t,n),e.next=38,u.a.sleep(.05);case 38:return d=o.content.fileType,h=this.filesafe.createTemporaryFileUrl({base64Data:p.decryptedData,dataType:d}),this.insertMediaElement({url:h,fsid:n,fileType:d,fsname:r,fsElement:t}),l(),this.uuidToFileTempUrlAndTypeMapping[n]={url:h,fileType:d,fsname:r},e.abrupt("return",{success:!0});case 44:case"end":return e.stop()}},e,this)}));return e}()},{key:"insertMediaElement",value:function(e){var t,n=e.url,r=e.fsid,a=e.fsname,i=e.fileType,o=e.fsElement,s=this.fileTypeForElementType(i);return t="img"==s?this.createImageElement({url:n,fsid:r,fsname:a,fsElement:o}):"video"==s?this.createVideoElement({url:n,fsid:r,fileType:i,fsname:a,fsElement:o}):"audio"==s?this.createAudioElement({url:n,fsid:r,fsname:a}):this.createDownloadElement({url:n,fsid:r,fileType:i,fsname:a,fsElement:o}),this.insertElementNearElement(t,o),o.remove(),!0}},{key:"wrapElementInTag",value:function(e){var t=e.element,n=e.tagName,r=e.fsid,a=e.fsname,i=document.createElement(n);return i.setAttribute("fsid",r),i.setAttribute("fsname",a),i.setAttribute("fscollapsable",!0),i.setAttribute("contenteditable",!0),i.append(t),i}},{key:"basicwrapElementInTag",value:function(e,t){var n=document.createElement(t);return n.append(e),n}},{key:"createImageElement",value:function(e){var t=e.url,n=e.fsid,r=e.fsname,a=e.fsElement,i=document.createElement("img");return i.setAttribute("src",t),i.setAttribute("srcset","".concat(t," 2x")),i.setAttribute("fsid",n),i.setAttribute("fsname",r),i.setAttribute("fscollapsable",!0),a.getAttribute("width")&&(i.setAttribute("width",a.getAttribute("width")),i.setAttribute("height",a.getAttribute("height"))),i}},{key:"createVideoElement",value:function(e){var t=e.url,n=e.fsid,r=e.fileType,a=e.fsname,i=e.fsElement,o=document.createElement("video");o.setAttribute("controls",!0),o.setAttribute("fsid",n),o.setAttribute("fsname",a),o.setAttribute("fscollapsable",!0),i.getAttribute("width")&&(o.setAttribute("width",i.getAttribute("width")),o.setAttribute("height",i.getAttribute("height")));var s=document.createElement("source");return s.setAttribute("src",t),s.setAttribute("type",r),o.append(s),this.wrapElementInTag({element:o,tagName:"p",fsid:n,fsname:a})}},{key:"createDownloadElement",value:function(e){var t=e.url,n=e.fsid,r=(e.fileType,e.fsname),a=(e.fsElement,document.createElement("a"));return a.setAttribute("fsid",n),a.setAttribute("fsname",r),a.setAttribute("ghost","true"),a.setAttribute("fscollapsable",!0),a.setAttribute("href",t),a.textContent="".concat(r),a}},{key:"createAudioElement",value:function(e){var t=e.url,n=e.fsid,r=e.fsname,a=document.createElement("audio");return a.setAttribute("src",t),a.setAttribute("controls",!0),a.setAttribute("fsid",n),a.setAttribute("fsname",r),a.setAttribute("fscollapsable",!0),this.wrapElementInTag({element:a,tagName:"p",fsid:n,fsname:r})}},{key:"setStatus",value:function(e,t,n,r,a){if(n){var i=this.statusElementMapping[n];i&&(i.remove(),delete this.statusElementMapping[n])}if(e){var o=document.createElement("label");return o.setAttribute("id",n),o.setAttribute("ghost","true"),o.setAttribute("contenteditable",!1),o.style.fontWeight="bold",o.textContent=e,a&&(o.style.userSelect="all"),o=this.insertElementNearElement(o,t),n&&(this.statusElementMapping[n]=o),o}}},{key:"insertStatusAtCursor",value:function(e){var t=Math.random().toString(36).substring(7);return this.setStatus(e,null,t),t}},{key:"removeCursorStatus",value:function(e){var t=this.getElementsBySelector("#".concat(e));t.length>0&&t[0].remove()}},{key:"insertElementNearElement",value:function(e,t){var n=this.preprocessElement(e),r="child";if("figure"==n.tagName.toLowerCase()){var a=t.closest("p");a&&(t=a,r="afterend")}return this.insertElement(n,t,r),n}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,"a",function(){return o});var o=function(){function e(t){var n=t.patterns,a=t.afterExpand,i=t.beforeExpand,o=t.getCurrentLineText,s=t.getPreviousLineText,u=t.replaceText;r(this,e),this.patterns=n,this.afterExpand=a,this.beforeExpand=i,this.getCurrentLineText=o,this.getPreviousLineText=s,this.replaceText=u}return i(e,[{key:"onKeyUp",value:function(e){var t=(e.key,e.isSpace),n=e.isEnter,r=e.isPaste;(t||n||r)&&this.searchPatterns({searchPreviousLine:n})}},{key:"searchPatterns",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.searchPreviousLine;e=n?this.getPreviousLineText():this.getCurrentLineText();var r=!0,a=!1,i=void 0;try{for(var o,s=this.patterns[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=u.regex.exec(e);if(c){var l=c[0];if(l){var f=u.callback(l);this.replaceSelection(u.regex,f,n)}}}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}},{key:"replaceSelection",value:function(e,t,n){this.beforeExpand&&this.beforeExpand(),this.replaceText({regex:e,replacement:t,previousLine:n}),this.afterExpand&&this.afterExpand()}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,"a",function(){return o});var o=function(){function e(){r(this,e)}return i(e,null,[{key:"expandedFilesafeSyntax",value:function(e){var t=this;return e.replace(this.FilesafeSyntaxPattern,function(e){return t.filesafeSyntaxToHtmlElement(e)})}},{key:"removeFilesafeSyntaxFromHtml",value:function(e){return e.replace(this.FilesafeSyntaxPattern,function(e){return""})}},{key:"insertionSyntaxForFileDescriptor",value:function(e){return"[FileSafe:".concat(e.uuid,":").concat(e.content.fileName,"]")}},{key:"filesafeSyntaxToHtmlElement",value:function(e){e=e.replace("<p>",""),e=e.replace("</p>",""),e=e.replace("[","").replace("]","");var t=e.split(":"),n=t[1],r=t[2],a=t[3],i="";if(a){var o=a.split("x");i="width=".concat(o[0]," height=").concat(o[1])}return"<p fsplaceholder=true style='display: none;' fscollapsable=true ghost=true fsid='".concat(n,"' fsname='").concat(r,"' ").concat(i,"></p>")}},{key:"collapseFilesafeSyntax",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelectorAll("*[fscollapsable]"),r=!0,a=!1,i=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=u.getAttribute("fsid"),l=u.getAttribute("fsname"),f=u.getAttribute("width"),p=u.getAttribute("height"),d=["FileSafe",c,l];if(f||p){var h="".concat(f,"x").concat(p);d.push(h)}var v="<p>[".concat(d.join(":"),"]</p>");u.insertAdjacentHTML("afterend",v),u.remove()}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return t.querySelectorAll("*[ghost]").forEach(function(e){e.remove()}),t.body.innerHTML}}]),e}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(o,"FilesafeSyntaxPattern",/(<p>)?\[FileSafe[^\]]*\](<\/p>)?/g)},function(e,t){e.exports=n(4)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a});var a=function e(t){var n=t.insertRawText,a=t.onReceiveNote,i=t.setEditorRawText,o=t.getCurrentLineText,s=t.getPreviousLineText,u=t.replaceText,c=t.getElementsBySelector,l=t.insertElement,f=t.preprocessElement,p=t.clearUndoHistory,d=t.generateCustomPreview;r(this,e),this.insertRawText=n,this.onReceiveNote=a,this.setEditorRawText=i,this.getCurrentLineText=o,this.getPreviousLineText=s,this.replaceText=u,this.getElementsBySelector=c,this.insertElement=l,this.preprocessElement=f,this.clearUndoHistory=p,this.generateCustomPreview=d}}])},function(e,t){}]);